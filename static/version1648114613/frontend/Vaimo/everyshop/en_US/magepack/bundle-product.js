define('Vaimo_JdgroupFrontend/js/catalog/price-decimals',[],function(){'use strict';return function(config,element){element.textContent=element.textContent.split('.')[0];};});define('Magento_Review/js/testfreaks-summary',['jquery','underscore'],function($,_){'use strict';var testFreaksApi='https://js.testfreaks.com/onpage/%1/reviews.json?key=%2';function scoreToPercent(score){return Math.round(score)*10+'%';}
return function(config,element){var observerConfig={rootMargin:'0px 80px 100px 80px',threshold:[0]},observer;if(!config.clientId||!config.productId){return false;}
function processReviewSummary(result){var reviewCount=0,score=0,$elem,jsonLd=document.createElement('script');if('pro_review_count'in result||'user_review_count'in result||'score'in result){reviewCount=result['pro_review_count']?parseInt(result['pro_review_count'],10):0;if(result['user_review_count']){reviewCount+=parseInt(result['user_review_count'],10);}
if(typeof result['your_review_count']!=='undefined'){reviewCount+=parseInt(result['your_review_count'],10);}
if(result['score']){score=parseFloat(result['score']);}
$elem=$(element);if(document.body.classList.contains('catalog-product-view')&&window.innerWidth>=768){$elem.css('top',$('.page-title-wrapper').height()+1);}
$elem.find('.review-mask').css('width',scoreToPercent(score));$elem.find('.count').text(reviewCount);$elem.show();jsonLd.type='application/ld+json';jsonLd.text=JSON.stringify({"@context":"http://schema.org/Product","@type":"Product","@id":config.productId,"aggregateRating":{"@context":"http://schema.org/AggregateRating","@type":"AggregateRating","itemReviewed":config.productId,"ratingCount":reviewCount,"ratingValue":result['score']}});element.appendChild(jsonLd);_.defer(function(){$elem.addClass('slide-in');});}}
function getReviews(){var apiUrl=testFreaksApi.replace('%1',config.clientId).replace('%2',config.productId);$.ajax({url:apiUrl,cache:true,dataType:'json'}).done(processReviewSummary);}
function toggleReviewsTab(){var $tabWrap,$tabCont,$topFixed;if(typeof config.toggleTabSel==='undefined'||typeof config.tabWrapper==='undefined'||typeof config.tabContentSel==='undefined'){return;}
$(config.toggleTabSel).click(function(){$tabWrap=$(config.tabWrapper);$topFixed=config.topFixedSel||'.page-header';$topFixed=$($topFixed);if(!$tabWrap.length){return;}
$tabCont=$tabWrap.find(config.tabContentSel);if(!$tabCont.length){return;}
$('#tab-label-reviews:not(.active)').trigger('click');window.scrollTo(0,$tabCont.offset().top-$topFixed.height());});}
window.testFreaks=window.testFreaks||[];window.testFreaks.push(["setProductId",config.productId]);window.testFreaks.push(["setAnalytics","dataLayer"]);window.testFreaks.push(["setAggregateRatingSchema","json-ld"]);if(config.loadReviewList&&config.loadVideo){window.testFreaks.push(["load",["reviews","videos"]]);$(element).show();}else if(config.loadReviewList){window.testFreaks.push(["load",["reviews"]]);$(element).show();}
observer=new IntersectionObserver(function(entries){entries.forEach(function(entry){if(entry.intersectionRatio>0){observer.unobserve(entry.target);getReviews();}});},observerConfig);observer.observe(element.parentNode);toggleReviewsTab();};});define('Vaimo_OfficeWidget/js/loadWidget',['jquery','jquery-ui-modules/widget'],function($){$.widget('vaimo.officeWidget',{options:{ccsData:{cpn:'',mf:'',pn:'',lang:'en',market:'ZA',_SKey:'',_ZoneId:''},ccsScript:'cdn.cnetcontent.com/jsc/h.js'},_create:function(){this._loadScript();},_loadScript:function(){var scriptElement,iterator,ccsDataKeys=Object.keys(this.options.ccsData);if(typeof window.ccs_cc_log_startTime!=='undefined'||typeof window.ccs_cc_args!=='undefined'){return;}
window['ccs_cc_args']=window['ccs_cc_args']||[];for(iterator=0;iterator<ccsDataKeys.length;iterator++){window['ccs_cc_args'].push([ccsDataKeys[iterator],this.options.ccsData[ccsDataKeys[iterator]]]);}
scriptElement=$('<script></script>');scriptElement.attr('src',('https:'===document.location.protocol?'https://':'http://')+this.options.ccsScript);scriptElement.attr('type','text/javascript');$(document.body).prepend(scriptElement);}});return $.vaimo.officeWidget;});define('google-tag-manager/product-detail-view',['domReady!'],function(){'use strict';return function(gtmConfig){if(typeof dataLayer==='undefined'){return;}
if('gtmProductDetail'in gtmConfig&&gtmConfig.gtmProductDetail){dataLayer.push({event:'productDetail',ecommerce:{'detail':gtmConfig.gtmProductDetail}});}
if('gtmImpressions'in gtmConfig&&gtmConfig.gtmImpressions){dataLayer.push({event:'productImpression',ecommerce:{'impressions':gtmConfig.gtmImpressions}});}};});define('google-tag-manager/product-click',['jquery','domReady!'],function($){'use strict';return function(gtmConfig){if(typeof dataLayer==='undefined'){return;}
var clickItems=[],defaultDataAttribute='data-gtm-data',directDataAttribute='data-gtm-product';if(gtmConfig.gtmRelatedClicks){var relatedItem=gtmConfig.gtmRelatedClicksConfig['item'],relatedIdentifier=gtmConfig.gtmRelatedClicksConfig['identifier'],relatedLinks=gtmConfig.gtmRelatedClicksConfig['links'];$.each(relatedLinks,function(key,value){clickItems.push(relatedItem+' '+value);});if(relatedIdentifier&&Array.isArray(gtmConfig.gtmRelatedClicks)){$.each(gtmConfig.gtmRelatedClicks,function(key,value){var valueString=JSON.stringify(value),filterSelector='['+relatedIdentifier+'="'+value.id+'"]';$(relatedItem).filter(filterSelector).attr(defaultDataAttribute,valueString);});}}
if(gtmConfig.gtmUpsellClicks){var upsellItem=gtmConfig.gtmUpsellClicksConfig['item'],upsellIdentifier=gtmConfig.gtmUpsellClicksConfig['identifier'],upsellLinks=gtmConfig.gtmUpsellClicksConfig['links'];$.each(upsellLinks,function(key,value){clickItems.push(upsellItem+' '+value);});if(upsellIdentifier&&Array.isArray(gtmConfig.gtmUpsellClicks)){$.each(gtmConfig.gtmUpsellClicks,function(key,value){var valueString=JSON.stringify(value),filterSelector='['+upsellIdentifier+'="'+value.id+'"]';$(upsellItem).filter(filterSelector).attr(defaultDataAttribute,valueString);});}}
if(gtmConfig.gtmCrosssellClicks){var crosssellItem=gtmConfig.gtmCrosssellClicksConfig['item'],crosssellIdentifier=gtmConfig.gtmCrosssellClicksConfig['identifier'],crosssellLinks=gtmConfig.gtmCrosssellClicksConfig['links'];$.each(crosssellLinks,function(key,value){clickItems.push(crosssellItem+' '+value);});if(crosssellIdentifier&&Array.isArray(gtmConfig.gtmCrosssellClicks)){$.each(gtmConfig.gtmCrosssellClicks,function(key,value){var valueString=JSON.stringify(value),filterSelector='['+crosssellIdentifier+'="'+value.id+'"]';$(crosssellItem).filter(filterSelector).attr(defaultDataAttribute,valueString);});}}
if(clickItems.length){$(document).on('click',clickItems.join(','),function(){var productData=getProductData($(this)),gtmData=productData?JSON.parse(productData):null,list=gtmData.list;delete gtmData.list;if(gtmData){dataLayer.push({'event':'productClick','ecommerce':{'click':{'actionField':{'list':list},'products':[gtmData]}}});}});var getProductData=function(element){var productData='';if(element.closest('['+directDataAttribute+']').length){productData=element.closest('['+directDataAttribute+']').attr(directDataAttribute);}else{productData=element.closest('['+defaultDataAttribute+']').attr(defaultDataAttribute);}
return productData;};}};});define('Magento_Wishlist/js/add-to-wishlist',['jquery','jquery-ui-modules/widget'],function($){'use strict';$.widget('mage.addToWishlist',{options:{bundleInfo:'div.control [name^=bundle_option]',configurableInfo:'.super-attribute-select',groupedInfo:'#super-product-table input',downloadableInfo:'#downloadable-links-list input',customOptionsInfo:'.product-custom-option',qtyInfo:'#qty'},_create:function(){this._bind();},_bind:function(){var options=this.options,dataUpdateFunc='_updateWishlistData',changeCustomOption='change '+options.customOptionsInfo,changeQty='change '+options.qtyInfo,events={},key;if('productType'in options){if(typeof options.productType==='string'){options.productType=[options.productType];}}else{options.productType=[];}
events[changeCustomOption]=dataUpdateFunc;events[changeQty]=dataUpdateFunc;for(key in options.productType){if(options.productType.hasOwnProperty(key)&&options.productType[key]+'Info'in options){events['change '+options[options.productType[key]+'Info']]=dataUpdateFunc;}}
this._on(events);},_updateWishlistData:function(event){var dataToAdd={},isFileUploaded=false,self=this;if(event.handleObj.selector==this.options.qtyInfo){this._updateAddToWishlistButton({});event.stopPropagation();return;}
$(event.handleObj.selector).each(function(index,element){if($(element).is('input[type=text]')||$(element).is('input[type=email]')||$(element).is('input[type=number]')||$(element).is('input[type=hidden]')||$(element).is('input[type=checkbox]:checked')||$(element).is('input[type=radio]:checked')||$(element).is('textarea')||$('#'+element.id+' option:selected').length){if($(element).data('selector')||$(element).attr('name')){dataToAdd=$.extend({},dataToAdd,self._getElementData(element));}
return;}
if($(element).is('input[type=file]')&&$(element).val()){isFileUploaded=true;}});if(isFileUploaded){this.bindFormSubmit();}
this._updateAddToWishlistButton(dataToAdd);event.stopPropagation();},_updateAddToWishlistButton:function(dataToAdd){var self=this;$('[data-action="add-to-wishlist"]').each(function(index,element){var params=$(element).data('post');if(!params){params={'data':{}};}
params.data=$.extend({},params.data,dataToAdd,{'qty':$(self.options.qtyInfo).val()});$(element).data('post',params);});},_arrayDiffByKeys:function(array1,array2){var result={};$.each(array1,function(key,value){if(key.indexOf('option')===-1){return;}
if(!array2[key]){result[key]=value;}});return result;},_getElementData:function(element){var data,elementName,elementValue;element=$(element);data={};elementName=element.data('selector')?element.data('selector'):element.attr('name');elementValue=element.val();if(element.is('select[multiple]')&&elementValue!==null){if(elementName.substr(elementName.length-2)=='[]'){elementName=elementName.substring(0,elementName.length-2);}
$.each(elementValue,function(key,option){data[elementName+'['+option+']']=option;});}else if(elementName.substr(elementName.length-2)=='[]'){elementName=elementName.substring(0,elementName.length-2);data[elementName+'['+elementValue+']']=elementValue;}else{data[elementName]=elementValue;}
return data;},_removeExcessiveData:function(params,dataToAdd){var dataToRemove=this._arrayDiffByKeys(params.data,dataToAdd);$.each(dataToRemove,function(key){delete params.data[key];});},bindFormSubmit:function(){var self=this;$('[data-action="add-to-wishlist"]').on('click',function(event){var element,params,form,action;event.stopPropagation();event.preventDefault();element=$('input[type=file]'+self.options.customOptionsInfo);params=$(event.currentTarget).data('post');form=$(element).closest('form');action=params.action;if(params.data.id){$('<input>',{type:'hidden',name:'id',value:params.data.id}).appendTo(form);}
if(params.data.uenc){action+='uenc/'+params.data.uenc;}
$(form).attr('action',action).submit();});}});return $.mage.addToWishlist;});define('Magento_Wishlist/js/add-to-wishlist-mixin',['jquery','jquery-ui-modules/widget'],function($){"use strict";return function(widget){var prototype=widget.prototype;$.widget(prototype.namespace+'.'+prototype.widgetName,widget,{_updateWishlistData:function(event){var dataToAdd={},isFileUploaded=false,self=this,bundleBodyClass=document.body.classList.contains('page-product-bundle');if(event.handleObj.selector===this.options.qtyInfo){this._updateAddToWishlistButton({});if(!document.body.classList.contains('page-product-bundle')){event.stopPropagation();}
return;}
$(event.handleObj.selector).each(function(index,element){var elementObject=$(element);if(elementObject.is('input[type=text]')||elementObject.is('input[type=email]')||elementObject.is('input[type=number]')||elementObject.is('input[type=hidden]')||elementObject.is('input[type=checkbox]:checked')||elementObject.is('input[type=radio]:checked')||elementObject.is('textarea')||$('#'+element.id+' option:selected').length){if(elementObject.data('selector')||elementObject.attr('name')){dataToAdd=$.extend({},dataToAdd,self._getElementData(element));}
return;}
if(elementObject.is('input[type=file]')&&elementObject.val()){isFileUploaded=true;}});if(isFileUploaded){this.bindFormSubmit();}
this._updateAddToWishlistButton(dataToAdd);if(!bundleBodyClass){event.stopPropagation();}}});return $[prototype.namespace][prototype.widgetName];};});define('Magento_Catalog/js/product/view/tabs',['jquery','matchMedia','tabs','domReady!'],function($,mediaCheck){'use strict';mediaCheck({media:'(min-width: 768px)',entry:function(){$('.product.info.detailed .product.data.items').each(function(){var $tabsWrapper=$(this);$tabsWrapper.find('.data.item.content').each(function(index){$tabsWrapper.append($(this));$(this).data('original-index',index);});});$('.product.info.detailed .product.data.items').tabs({collapsible:true,openedState:'active',preventScrollOnChange:true});},exit:function(){$('.product.info.detailed .product.data.items').each(function(){var $tabsWrapper=$(this);$tabsWrapper.find('.data.item.content').each(function(){var $tabContent=$(this);$tabContent.insertAfter($tabsWrapper.find('.data.item.title').eq($tabContent.data('original-index')));});});$('.product.info.detailed .product.data.items').tabs({collapsible:true,openedState:'active',preventScrollOnChange:true});}});});define('Vaimo_Menu/js/mixins/Magento_Theme/view-breadcrumbs-mixin',['jquery','jquery-ui-modules/widget'],function($){'use strict';return function(widget){var prototype=widget.prototype;$.widget(prototype.namespace+'.'+prototype.widgetName,widget,{options:{classes:{labelComponentBlacklist:['js-toggle-navigation','sr-only']}},_vmenuLabelShouldIncludeNode:function(node){if(node.nodeType!==node.ELEMENT_NODE){return true;}
return this.options.classes.labelComponentBlacklist.reduce(function(result,item){return result&&!node.classList.contains(item);},true);}});return $[prototype.namespace][prototype.widgetName];};});define('Vaimo_EnquiryForm/js/form-mixin',['jquery','uiLayout','ko','uiRegistry','Magento_Ui/js/modal/modal'],function($,layout,ko,uiRegistry){'use strict';var mixin={defaults:{productSkuValue:$('.product-info-stock-sku.new .sku-code').text()},showModal:function(selector){var self=this;setTimeout(function(){$('.vaimo-md .input-text, .vaimo-md select, .vaimo-md textarea').material().material('init');},200);$(selector).modal({type:'popup',responsive:false,title:this.modalPopupTitle,innerScroll:true,modalClass:'_inner-scroll enquiry-popup-modal',buttons:[{text:$.mage.__('Send Message'),class:'action submit primary',click:function(){$('#enquiry-form').submit();}},{text:$.mage.__('Cancel'),class:'action cancel',click:function(){self.onFormCancel();}}]});window._reCaptcha.enabled['enquiry']=true;layout([{name:'enquiryForm.msp_recaptcha',component:'MSP_ReCaptcha/js/reCaptcha',isTemplate:false,config:{reCaptchaId:'msp-recaptcha-enquiry',zone:'enquiry',settings:window._reCaptcha}}]);ko.applyBindings(uiRegistry.get('enquiryForm.msp_recaptcha'),$(selector).get(0));$(selector).trigger('openModal');},onFormCancel:function(){var dataForm=$('#enquiry-form'),modal=$('.modal-popup.enquiry-popup-modal');dataForm[0].reset();dataForm.find('input[type=text], textarea').val('');modal.find('.action-close').trigger('click');}};return function(target){return target.extend(mixin);};});define('Vaimo_VoucherApps/js/report-product-form-mixin',['jquery','Magento_Ui/js/modal/modal'],function($){'use strict';var mixin={defaults:{productSkuValue:$('.product-info-stock-sku .sku-code').text()},toggleComment:function(reason){var comment=$('.field.comment');if(reason.hasClass('other')){comment.removeClass('hide');comment.addClass('show');}else if(comment.hasClass('show')){comment.removeClass('show');comment.addClass('hide');}},showModal:function(){setTimeout(function(){$('.vaimo-md .input-text, .vaimo-md select, .vaimo-md textarea').material().material('init');},200);return this._super();}};return function(target){return target.extend(mixin);};});define('Magento_Cookie/js/require-cookie',['jquery','Magento_Ui/js/modal/alert','jquery-ui-modules/widget','mage/mage','mage/translate'],function($,alert){'use strict';$.widget('mage.requireCookie',{options:{event:'click',noCookieUrl:'enable-cookies',triggers:['.action.login','.action.submit'],isRedirectCmsPage:true},_create:function(){this._bind();},_bind:function(){var events={};$.each(this.options.triggers,function(index,value){events['click '+value]='_checkCookie';});this._on(events);},_checkCookie:function(event){if(navigator.cookieEnabled){return;}
event.preventDefault();if(this.options.isRedirectCmsPage){window.location=this.options.noCookieUrl;}else{alert({content:$.mage.__('Cookies are disabled in your browser.')});}}});return $.mage.requireCookie;});define('text!Magento_Theme/templates/breadcrumbs.html',function(){return '<!--\n/**\n * Copyright \xA9 Magento, Inc. All rights reserved.\n * See COPYING.txt for license details.\n */\n-->\n<ul class="items">\n<% _.each(breadcrumbs, function(crumb) { %>\n    <li class="item <%- crumb.name %>">\n        <% if (crumb.link) { %>\n        <a href="<%= crumb.link %>" title="<%- crumb.title %>"><%- crumb.label %></a>\n        <% } else if (crumb.last) { %>\n        <strong><%= crumb.label %></strong>\n        <% } else { %>\n        <%= crumb.label %>\n        <% } %>\n    </li>\n<% }); %>\n</ul>\n';});define('text!Vaimo_VoucherApps/template/popup-init.html',function(){return '<!--\n* Copyright \xA9 Vaimo Group. All rights reserved.\n* See LICENSE_VAIMO.txt for license details.\n-->\n\n<div class="popup-content contact-seller">\n    <div data-role="application-loader"\n         class="loading-mask"\n         style="display: none;"\n         data-mage-init=\'{"checkoutLoader": {}}\'>\n        <div class="loader">\n            <div class="preloader-wrapper big active">\n                <div class="spinner-layer">\n                    <div class="circle-clipper left">\n                        <div class="circle"></div>\n                    </div>\n                    <div class="gap-patch">\n                        <div class="circle"></div>\n                    </div>\n                    <div class="circle-clipper right">\n                        <div class="circle"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <%= formTemplate %>\n</div>\n\n\n';});define('text!Vaimo_VoucherApps/template/report-product-form.html',function(){return '<!--\n* Copyright \xA9 Vaimo Group. All rights reserved.\n* See LICENSE_VAIMO.txt for license details.\n-->\n\n<form class="form report-product"\n      id="report-product-form"\n      method="post"\n      data-mage-init=\'{"validation":{}}\'>\n    <fieldset class="fieldset">\n        <div class="field form_type">\n            <div class="control">\n                <input name="type"\n                       id="type"\n                       value="<%= formType %>"\n                       class="input-text"\n                       type="hidden"/>\n            </div>\n        </div>\n        <div class="field reason">\n            <div class="control">\n                <input name="reason"\n                       id="reason"\n                       value=""\n                       class="input-text"\n                       type="hidden"/>\n            </div>\n        </div>\n        <div class="field sku">\n            <div class="control">\n                <input name="product_sku"\n                       id="product_sku"\n                       value="<%= productSku %>"\n                       class="input-text"\n                       type="hidden"/>\n            </div>\n        </div>\n        <div class="field name required">\n            <label class="label" for="name">\n                <span data-bind="18n: \'Name\'">Name</span>\n            </label>\n            <div class="control">\n                <input name="name"\n                       id="name"\n                       title="Name"\n                       class="input-text"\n                       type="text"\n                       data-validate="{required:true}"/>\n            </div>\n        </div>\n        <div class="field email required">\n            <label class="label" for="email">\n                <span data-bind="18n: \'Email\'">Email</span>\n            </label>\n            <div class="control">\n                <input name="email"\n                       id="email"\n                       title="Email"\n                       class="input-text"\n                       type="email"\n                       data-validate="{required:true, \'validate-email\':true}"/>\n            </div>\n        </div>\n        <div class="field reason-selection">\n            <span data-bind="18n: \'Reason for reporting this product:\'">\n                Reason for reporting this product:\n            </span>\n            <ul class="reasons">\n                <% _.each(formConfigReasons, function(reason) { %>\n                    <li class="reason-item">\n                            <span role="button"\n                                  tabindex="0"\n                                  data-action-keypress="false"\n                                  data-action="select-reason"\n                                  title="<%- reason %>">\n                                <%= reason %>\n                            </span>\n                    </li>\n                <% }); %>\n                <li class="reason-item">\n                    <span role="button"\n                          class="other"\n                          tabindex="0"\n                          data-action-keypress="false"\n                          data-action="select-reason"\n                          title="Other">\n                        Other\n                    </span>\n                </li>\n            </ul>\n        </div>\n        <div class="field comment hide">\n            <label class="label" for="comment">\n                <span>Message</span>\n            </label>\n            <div class="control">\n                <textarea name="comment"\n                          id="report-comment"\n                          title="Message"\n                          class="input-text"\n                          cols="5"\n                          rows="3"/>\n            </div>\n        </div>\n    </fieldset>\n\n    <div data-bind="scope: \'reportProductForm.msp_recaptcha\'">\n        <!-- ko template: getTemplate() --><!-- /ko -->\n    </div>\n</form>\n';});define('Vaimo_VoucherApps/js/view/report-product-form',['jquery','ko','uiRegistry','uiLayout','uiComponent','MSP_ReCaptcha/js/registry','mage/url','mage/template','text!Vaimo_VoucherApps/template/popup-init.html','text!Vaimo_VoucherApps/template/report-product-form.html','mage/validation','Magento_Ui/js/modal/modal'],function($,ko,uiRegistry,layout,component,reCaptchaRegistry,url,templateEngine,popupTmpl,formTmpl){'use strict';var loaderTimeout;window.contactSellerFormInit=typeof window.contactSellerFormInit==='undefined'?false:window.contactSellerFormInit;window.modalInit=typeof window.modalInit==='undefined'?false:window.modalInit;return component.extend({defaults:{modalContentSelector:'.popup-content.contact-seller',productSkuValue:$('.product.sku .value').text(),attrTitleForModal:false,modalPopupTitle:false,formType:'productreport',formTypeFromUrl:false,formTypeUrlSeparator:'~',urlHashValueRemove:true},initialize:function(){var _this=this;this._super();if(window.contactSellerFormInit){return;}
window.contactSellerFormInit=true;this.defaultModalPopupTitle=$.mage.__('Report this product');this.defaultFormType='productreport';if(!this.modalPopupTitle){this.modalPopupTitle=this.defaultModalPopupTitle;}
$(document.body).on('click',this.buttonSelector,function(event){var $button=$(event.target);if($button.is('a')){event.preventDefault();}
this.setModalTitle($button);this.setModalFormType($button);this.removeUrlHashValue();if(window.modalInit){$(this.modalContentSelector).modal('openModal');}else{this.templateFormCall();this.showModal(this.modalContentSelector);window.modalInit=true;}}.bind(this));$(document).on('click','[data-action="select-reason"]',function(e){var currentTarget=$(e.currentTarget);$('#reason').val(currentTarget.attr('title'));currentTarget.addClass('selected-reason');currentTarget.parent().siblings().children().removeClass('selected-reason');_this.toggleComment(currentTarget);return false;});$(document).on('submit','#report-product-form',function(e){e.preventDefault();this.onFormSumbit();}.bind(this));},toggleComment:function(reason){var comment=$('#report-comment');if(reason.hasClass('other')){comment.removeClass('hide');comment.addClass('show');}else if(comment.hasClass('show')){comment.removeClass('show');comment.addClass('hide');}},removeUrlHashValue:function(){if(typeof parent.location.hash!=='undefined'&&this.urlHashValueRemove){if(parent.location.hash.length){parent.location.hash='';}}},setModalTitle:function($button){var attrTitle;if(this.attrTitleForModal){attrTitle=$button.attr('title');if(attrTitle&&attrTitle.length){this.modalPopupTitle=attrTitle;}else{this.modalPopupTitle=this.defaultModalPopupTitle;}
if(window.modalInit){$(this.modalContentSelector).closest('.modal-popup').find('.modal-title').html(this.modalPopupTitle);}}},setModalFormType:function($button){var attrHref;if(this.formTypeFromUrl){attrHref=$button.attr('href');if(attrHref.indexOf(this.formTypeUrlSeparator)===-1||attrHref.indexOf(this.formTypeUrlSeparator)===(attrHref.length-1)){this.formType=this.defaultFormType;}else{this.formType=attrHref.split(this.formTypeUrlSeparator).pop();}
if(window.modalInit){$(this.modalContentSelector).find('#type').val(this.formType);}}},templateFormCall:function(){var $formTmpl=templateEngine(formTmpl,{formType:this.formType,formConfigReasons:this.configuredReasons,productSku:this.productSkuValue}),$popupTmpl=$(templateEngine(popupTmpl,{formTemplate:$formTmpl}));$(document.body).prepend($popupTmpl);},showModal:function(selector){var self=this;$(selector).modal({type:'popup',responsive:false,title:this.modalPopupTitle,innerScroll:true,modalClass:'_inner-scroll report-product-popup-modal',buttons:[{text:$.mage.__('Submit'),class:'action submit primary',click:function(){self.onFormSumbit();}}]});window._reCaptcha.enabled['reportProduct']=true;layout([{name:'reportProductForm.msp_recaptcha',component:'MSP_ReCaptcha/js/reCaptcha',isTemplate:false,config:{reCaptchaId:'msp-recaptcha-enquiry',zone:'reportProduct',settings:window._reCaptcha}}]);ko.applyBindings(uiRegistry.get('reportProductForm.msp_recaptcha'),$(selector).get(0));$(selector).trigger('openModal');},onFormSumbit:function(){var dataForm=$('#report-product-form'),self=this,reCaptchaIndex=reCaptchaRegistry.captchaList()[reCaptchaRegistry.ids().indexOf('msp-recaptcha-enquiry')],reCaptchaToken=reCaptchaRegistry.tokenFields()[reCaptchaIndex];clearTimeout(loaderTimeout);if(dataForm.validation()&&dataForm.validation('isValid')){if(!reCaptchaToken||typeof grecaptcha==='undefined'){self._sendData();}
if(reCaptchaToken.value&&$.active===0){self._sendData();}else if($.active===0){$('.report-product .loading-mask').show();window.grecaptcha.reset(reCaptchaIndex);window.grecaptcha.execute(reCaptchaIndex);loaderTimeout=setTimeout(function(){$('.report-product .loading-mask').hide();},5*1000);}}},_sendData:function(){var requestUrl=url.build('report-product/form/submit'),dataForm=$('#report-product-form'),self=this;$.ajax({type:'POST',url:requestUrl,data:dataForm.serialize(),success:function(){console.log(dataForm.serialize());$(self.modalContentSelector).modal('closeModal');$('.report-product .loading-mask').hide();$('#report-product-form input,'+
'#report-product-form textarea').val('');},fail:function(){$('.report-product .loading-mask').hide();}});}});});define('text!Vaimo_EnquiryForm/template/form.html',function(){return '<!--\n* Copyright \xA9 Vaimo Group. All rights reserved.\n* See LICENSE_VAIMO.txt for license details.\n-->\n\n<% if (productName || productSku) { %>\n<div class="field info">\n    <div class="product-info">\n        <strong data-bind="18n: \'Product:\'">Product:</strong>\n        <span class="info"><%= productName %></span>\n    </div>\n    <div class="product-info">\n        <strong data-bind="18n: \'Sku:\'">Sku:</strong>\n        <span class="info"><%= productSku %></span>\n    </div>\n</div>\n<% } %>\n\n<form class="form enquiry"\n      id="enquiry-form"\n      method="post"\n      data-mage-init=\'{"validation":{}}\'>\n    <fieldset class="fieldset">\n        <div class="field form_type">\n            <div class="control">\n                <input name="form_type"\n                       id="form_type"\n                       value="<%= formType %>"\n                       class="input-text"\n                       type="hidden"/>\n            </div>\n        </div>\n        <div class="field product_name">\n            <div class="control">\n                <input name="product_name"\n                       id="product_name"\n                       value="<%= productName %>"\n                       class="input-text"\n                       type="hidden"/>\n            </div>\n        </div>\n        <div class="field sku">\n            <div class="control">\n                <input name="sku"\n                       id="sku"\n                       value="<%= productSku %>"\n                       class="input-text"\n                       type="hidden"/>\n            </div>\n        </div>\n        <div class="field price">\n            <div class="control">\n                <input name="price"\n                       id="price"\n                       value="<%= productPrice %>"\n                       class="input-text"\n                       type="hidden"/>\n            </div>\n        </div>\n        <div class="field description">\n            <div class="control">\n                <input name="description"\n                       id="description"\n                       value="<%= productName %>"\n                       class="input-text"\n                       type="hidden" />\n            </div>\n        </div>\n        <div class="field first_name required">\n            <label class="label" for="first_name">\n                <span data-bind="18n: \'Full Name\'">Full Name</span>\n            </label>\n            <div class="control">\n                <input name="first_name"\n                       id="first_name"\n                       title="Name"\n                       class="input-text"\n                       type="text"\n                       data-validate="{required:true}"/>\n            </div>\n        </div>\n        <div class="field email required">\n            <label class="label" for="email">\n                <span data-bind="18n: \'Email Address\'">Email Address</span>\n            </label>\n            <div class="control">\n                <input name="email"\n                       id="email"\n                       title="Email"\n                       class="input-text"\n                       type="email"\n                       data-validate="{required:true, \'validate-email\':true}"/>\n            </div>\n        </div>\n        <div class="field phone required">\n            <label class="label" for="phone">\n                <span data-bind="18n: \'Phone number\'">Phone number</span>\n            </label>\n            <div class="control">\n                <input name="phone"\n                       id="phone"\n                       title="Phone number"\n                       class="input-text"\n                       type="text"\n                       data-validate="{required:true}" />\n            </div>\n        </div>\n        <div class="field comment required">\n            <label class="label" for="comment">\n                <span>What would you like to say?</span>\n            </label>\n            <div class="control">\n                <textarea name="comment"\n                          id="comment"\n                          title="Message"\n                          class="input-text"\n                          cols="5"\n                          rows="3"\n                          data-validate="{required:true}"/>\n            </div>\n        </div>\n        <div class="field preferred_store">\n            <label class="label" for="preferred_store">\n                <span data-bind="18n: \'Preferred Store\'">Preferred Store</span>\n            </label>\n            <select name="preferred_store"\n                    id="preferred_store"\n                    title="Prefered Store"\n                    type="hidden">\n                <option value="">Select Preferred Store</option>\n            </select>\n        </div>\n\n        <input type="hidden" name="hideit" id="hideit" value="" />\n    </fieldset>\n\n    <div data-bind="scope: \'enquiryForm.msp_recaptcha\'">\n        <!-- ko template: getTemplate() --><!-- /ko -->\n    </div>\n</form>\n';});define('text!Vaimo_EnquiryForm/template/popup-init.html',function(){return '<!--\n* Copyright \xA9 Vaimo Group. All rights reserved.\n* See LICENSE_VAIMO.txt for license details.\n-->\n\n<div class="popup-content enquiry">\n    <div data-role="application-loader"\n         class="loading-mask"\n         style="display: none;"\n         data-mage-init=\'{"checkoutLoader": {}}\'>\n        <div class="loader">\n            <div class="preloader-wrapper big active">\n                <div class="spinner-layer">\n                    <div class="circle-clipper left">\n                        <div class="circle"></div>\n                    </div>\n                    <div class="gap-patch">\n                        <div class="circle"></div>\n                    </div>\n                    <div class="circle-clipper right">\n                        <div class="circle"></div>\n                    </div>\n                </div>\n            </div>\n        </div>\n    </div>\n\n    <%= formTemplate %>\n</div>\n\n';});define('Vaimo_EnquiryForm/js/form',['jquery','ko','uiRegistry','uiLayout','uiComponent','MSP_ReCaptcha/js/registry','mage/url','mage/template','text!Vaimo_EnquiryForm/template/popup-init.html','text!Vaimo_EnquiryForm/template/form.html','mage/validation','Magento_Ui/js/modal/modal'],function($,ko,uiRegistry,layout,component,reCaptchaRegistry,url,templateEngine,popupTmpl,formTmpl){'use strict';var loaderTimeout,modalInit;window.enquiryFormInit=typeof window.enquiryFormInit==='undefined'?false:window.enquiryFormInit;return component.extend({defaults:{productNameValue:$('.page-title-wrapper.product .base').first().text(),productSkuValue:$('.product.sku .value').text(),productDescription:"",productPrice:$('.product-info-price .price').first().text().replace(/[^0-9.]/g,''),storeList:[],modalContentSelector:'.popup-content.enquiry',attrTitleForModal:false,modalPopupTitle:false,formType:'generic',formTypeFromUrl:false,formTypeUrlSeparator:'~',urlHashValueRemove:true},initialize:function(){this._super();if(window.enquiryFormInit){return;}
window.enquiryFormInit=true;this.defaultModalPopupTitle=$.mage.__('Talk to a Consultant');this.defaultFormType='generic';if(!this.modalPopupTitle){this.modalPopupTitle=this.defaultModalPopupTitle;}
$(document.body).on('click',this.buttonSelector,function(event){var $button=$(event.target);if($button.is('a')){event.preventDefault();}
this.setModalTitle($button);this.setModalFormType($button);this.removeUrlHashValue();if(modalInit){$(this.modalContentSelector).modal('openModal');}else{this.receiveData();this.templateFormCall();this.showModal(this.modalContentSelector);$('.enquiry .loading-mask').show();modalInit=true;}}.bind(this));$(document).on('submit','#enquiry-form',function(e){e.preventDefault();this.onFormSumbit();}.bind(this));},removeUrlHashValue:function(){if(typeof parent.location.hash!=='undefined'&&this.urlHashValueRemove){if(parent.location.hash.length){parent.location.hash='';}}},setModalTitle:function($button){var attrTitle;if(this.attrTitleForModal){attrTitle=$button.attr('title');if(attrTitle&&attrTitle.length){this.modalPopupTitle=attrTitle;}else{this.modalPopupTitle=this.defaultModalPopupTitle;}
if(window.modalInit){$(this.modalContentSelector).closest('.modal-popup').find('.modal-title').html(this.modalPopupTitle);}}},setModalFormType:function($button){var attrHref;if(this.formTypeFromUrl){attrHref=$button.attr('href');if(attrHref.indexOf(this.formTypeUrlSeparator)===-1||attrHref.indexOf(this.formTypeUrlSeparator)===(attrHref.length-1)){this.formType=this.defaultFormType;}else{this.formType=attrHref.split(this.formTypeUrlSeparator).pop();}
if(window.modalInit){$(this.modalContentSelector).find('#form_type').val(this.formType);}}},receiveData:function(){var requestUrl=url.build('enquiry/form/location'),self=this;$.get(requestUrl,function(data){this.storeList=Object.keys(data).sort();}.bind(this)).done(function(){self.appendStoreList();});},appendStoreList:function(){var storeListSelect=$('#preferred_store'),option="";$.each(this.storeList,function(value){option=$("<option>",{value:this.storeList[value],text:this.storeList[value].toLowerCase()});storeListSelect.append(option);}.bind(this));$('.enquiry .loading-mask').hide();},templateFormCall:function(){var $formTmpl=templateEngine(formTmpl,{productName:this.productNameValue,productSku:this.productSkuValue,productPrice:this.productPrice,productDescription:this.productDescription,formType:this.formType}),$popupTmpl=$(templateEngine(popupTmpl,{formTemplate:$formTmpl}));$(document.body).prepend($popupTmpl);},showModal:function(selector){$(selector).modal({type:'popup',responsive:false,title:this.modalPopupTitle,innerScroll:true,modalClass:'_inner-scroll enquiry-popup-modal',buttons:[{text:$.mage.__('Send Message'),class:'action submit primary',click:function(){$('#enquiry-form').submit();}}]});window._reCaptcha.enabled['enquiry']=true;layout([{name:'enquiryForm.msp_recaptcha',component:'MSP_ReCaptcha/js/reCaptcha',isTemplate:false,config:{reCaptchaId:'msp-recaptcha-enquiry',zone:'enquiry',settings:window._reCaptcha}}]);ko.applyBindings(uiRegistry.get('enquiryForm.msp_recaptcha'),$(selector).get(0));$(selector).trigger('openModal');},onFormSumbit:function(){var dataForm=$('#enquiry-form');if(dataForm.validation()&&dataForm.validation('isValid')){this._sendData();}},_sendData:function(){var requestUrl=url.build('enquiry/index/post'),dataForm=$('#enquiry-form'),self=this;$('.enquiry .loading-mask').show();$.ajax({type:'POST',url:requestUrl,data:dataForm.serialize(),success:function(){$(self.modalContentSelector).modal('closeModal');$('.enquiry .loading-mask').hide();$('#enquiry-form input:not([name="token"])'+
':not([name="form_type"])'+
':not([name="product_name"])'+
':not([name="sku"])'+
':not([name="price"])'+
':not([name="description"])'+
':not([name="form_key"]),'+
'#enquiry-form textarea,'+
'#enquiry-form select').val('');},fail:function(){$('.enquiry .loading-mask').hide();}});}});});define('Vaimo_SyndicatedContent/js/product/abstract',['jquery','tabs','jquery-ui-modules/widget'],function($){'use strict';$.widget('vaimo.syndicatedContent',{options:{tabIndex:0,tabPillId:'tab-label-syndicatedContent',marginRemoveDirection:'right',nodeId:'',flixSettings:{},cnetSettings:{},product:{brand:'',ean:'',mpn:'',sku:'',price:''}},_create:function(){this._disableAdditonalContent();this._attachDomListener();this._loadScript();},_toggleMargin:function(toggle){var $pill=$('#'+this.options.tabPillId),$siblings=$('#'+this.options.tabPillId).parent().children().filter('.title'),index=$siblings.index($pill.get(0)),$toAdjust=$siblings.eq(this.options.marginRemoveDirection==='right'?index+1:index-1);if(toggle){$toAdjust.css('margin',$toAdjust.data('margin'));}else{$toAdjust.data('margin',$toAdjust.css('margin'));$toAdjust.css('margin','0px');}},_disableAdditonalContent:function(){if(document.getElementById('tab-label-syndicatedContent').role==='tab'){this._getParent().tabs('disable',this.options.tabIndex);this._getParent().tabs('activate',this.options.tabIndex===0?this.options.tabIndex+1:0);}else{$('#description').show();$('#tab-label-description').addClass('active');}
$('#'+this.options.tabPillId).hide();this._toggleMargin(false);},_enableAdditionalContent:function(){$('#'+this.options.tabPillId).show();this._toggleMargin(true);if(document.getElementById('tab-label-syndicatedContent').role==='tab'){this._getParent().tabs('enable',this.options.tabIndex);this._getParent().tabs('activate',this.options.tabIndex);}else{$('#tab-label-syndicatedContent').show().addClass('active');$('#tab-label-description').removeClass('active');$('#syndicatedContent').show();$('#description').hide();}},_getParent:function(){return this.element.parents('[role="tablist"]');},_attachDomListener:function(){var $widget=this;function attachEvent(){$('#'+$widget.options.nodeId).one('DOMSubtreeModified',function(){var $content=$('#'+$widget.options.nodeId);if($content.children().length>0&&$content.find('div').eq(0).children().length>0){$widget._enableAdditionalContent();}else{attachEvent();}});}
attachEvent();},_loadScript:$.noop});return $.vaimo.syndicatedContent;});define('Vaimo_SyndicatedContent/js/product/flix-media',['jquery','Vaimo_SyndicatedContent/js/product/abstract','jquery-ui-modules/widget',],function($,abstract){'use strict';$.widget('vaimo.flixMedia',abstract,{options:{nodeId:'flix-inpage',flixSettings:{src:'//media.flixfacts.com/js/loader.js',language:'za',distributor:''}},_loadScript:function(){var sFlix=document.createElement('script');sFlix.setAttribute('type','text/javascript');sFlix.setAttribute('src',this.options.flixSettings.src);sFlix.setAttribute('data-flix-distributor',this.options.flixSettings.distributor);sFlix.setAttribute('data-flix-language',this.options.flixSettings.language);sFlix.setAttribute('data-flix-brand',this.options.product.sku.toUpperCase());sFlix.setAttribute('data-flix-mpn',this.options.product.mpn);sFlix.setAttribute('data-flix-ean',this.options.product.ean);sFlix.setAttribute('data-flix-sku',this.options.product.sku);sFlix.setAttribute('data-flix-inpage',this.options.nodeId);sFlix.setAttribute('data-flix-price',this.options.product.price);document.getElementsByTagName('head')[0].appendChild(sFlix);}});return $.vaimo.flixMedia;});define('Magento_Catalog/js/gallery',['jquery','jquery-ui-modules/widget'],function($){'use strict';$.widget('mage.gallery',{options:{minWidth:300,widthOffset:90,heightOffset:210,closeWindow:'div.buttons-set a[role="close-window"]'},_create:function(){$(this.options.closeWindow).on('click',function(){window.close();});this._resizeWindow();},_resizeWindow:function(){var img=this.element,width=img.width()<this.options.minWidth?this.options.minWidth:img.width();window.resizeTo(width+this.options.widthOffset,img.height()+this.options.heightOffset);}});return $.mage.gallery;});define('Magento_ProductVideo/js/load-player',['jquery','jquery-ui-modules/widget'],function($){'use strict';var videoRegister={_register:{},isRegistered:function(api){return this._register[api]!==undefined;},isLoaded:function(api){return this._register[api]!==undefined&&this._register[api]===true;},register:function(api,loaded){loaded=loaded||false;this._register[api]=loaded;}};$.widget('mage.productVideoLoader',{_create:function(){switch(this.element.data('type')){case 'youtube':this.element.videoYoutube();this._player=this.element.data('mageVideoYoutube');break;case 'vimeo':this.element.videoVimeo();this._player=this.element.data('mageVideoVimeo');break;default:throw{name:'Video Error',message:'Unknown video type',toString:function(){return this.name+': '+this.message;}};}},_initialize:function(){this._params=this.element.data('params')||{};this._code=this.element.data('code');this._width=this.element.data('width');this._height=this.element.data('height');this._autoplay=!!this.element.data('autoplay');this._playing=this._autoplay||false;this._loop=this.element.data('loop');this._rel=this.element.data('related');this.useYoutubeNocookie=this.element.data('youtubenocookie')||false;this._responsive=this.element.data('responsive')!==false;if(this._responsive===true){this.element.addClass('responsive');}
this._calculateRatio();},play:function(){this._player.play();},pause:function(){this._player.pause();},stop:function(){this._player.stop();},playing:function(){return this._player.playing();},destroy:function(){this._player.destroy();},_calculateRatio:function(){if(!this._responsive){return;}
this.element.css('paddingBottom',this._height/this._width*100+'%');}});$.widget('mage.videoYoutube',$.mage.productVideoLoader,{_create:function(){var self=this;this._initialize();this.element.append('<div/>');this._on(window,{'youtubeapiready':function(){var host='https://www.youtube.com';if(self.useYoutubeNocookie){host='https://www.youtube-nocookie.com';}
if(self._player!==undefined){return;}
self._autoplay=true;if(self._autoplay){self._params.autoplay=1;}
if(!self._rel){self._params.rel=0;}
self._player=new window.YT.Player(self.element.children(':first')[0],{height:self._height,width:self._width,videoId:self._code,playerVars:self._params,host:host,events:{'onReady':function onPlayerReady(){self._player.getDuration();self.element.closest('.fotorama__stage__frame').addClass('fotorama__product-video--loaded');},onStateChange:function(data){switch(window.parseInt(data.data,10)){case 1:self._playing=true;break;default:self._playing=false;break;}
self._trigger('statechange',{},data);if(data.data===window.YT.PlayerState.ENDED&&self._loop){self._player.playVideo();}}}});}});this._loadApi();},_loadApi:function(){var element,scriptTag;if(videoRegister.isRegistered('youtube')){if(videoRegister.isLoaded('youtube')){$(window).trigger('youtubeapiready');}
return;}
videoRegister.register('youtube');element=document.createElement('script');scriptTag=document.getElementsByTagName('script')[0];element.async=true;element.src='https://www.youtube.com/iframe_api';scriptTag.parentNode.insertBefore(element,scriptTag);window.onYouTubeIframeAPIReady=function(){$(window).trigger('youtubeapiready');videoRegister.register('youtube',true);};},play:function(){this._player.playVideo();this._playing=true;},pause:function(){this._player.pauseVideo();this._playing=false;},stop:function(){this._player.stopVideo();this._playing=false;},playing:function(){return this._playing;},destroy:function(){this.stop();this._player.destroy();}});$.widget('mage.videoVimeo',$.mage.productVideoLoader,{_create:function(){var timestamp,additionalParams='',src;this._initialize();timestamp=new Date().getTime();this._autoplay=true;if(this._autoplay){additionalParams+='&autoplay=1';}
if(this._loop){additionalParams+='&loop=1';}
src='https://player.vimeo.com/video/'+
this._code+'?api=1&player_id=vimeo'+
this._code+
timestamp+
additionalParams;this.element.append($('<iframe/>').attr('frameborder',0).attr('id','vimeo'+this._code+timestamp).attr('width',this._width).attr('height',this._height).attr('src',src).attr('webkitallowfullscreen','').attr('mozallowfullscreen','').attr('allowfullscreen','').attr('referrerPolicy','origin'));this._player=window.$f(this.element.children(':first')[0]);this._player.addEvent('ready',function(id){$('#'+id).closest('.fotorama__stage__frame').addClass('fotorama__product-video--loaded');});},play:function(){this._player.api('play');this._playing=true;},pause:function(){this._player.api('pause');this._playing=false;},stop:function(){this._player.api('unload');this._playing=false;},playing:function(){return this._playing;}});});define('Magento_ProductVideo/js/fotorama-add-video-events',['jquery','jquery-ui-modules/widget','catalogGallery','loadPlayer'],function($){'use strict';var allowBase=true;function parseHref(href){var a=document.createElement('a');a.href=href;return a;}
function parseURL(href,forceVideo){var id,type,ampersandPosition,vimeoRegex,useYoutubeNocookie=false;function _getYoutubeId(srcid){if(srcid){ampersandPosition=srcid.indexOf('&');if(ampersandPosition===-1){return srcid;}
srcid=srcid.substring(0,ampersandPosition);}
return srcid;}
if(typeof href!=='string'){return href;}
href=parseHref(href);if(href.host.match(/youtube\.com/)&&href.search){id=href.search.split('v=')[1];if(id){id=_getYoutubeId(id);type='youtube';}}else if(href.host.match(/youtube\.com|youtu\.be|youtube-nocookie.com/)){id=href.pathname.replace(/^\/(embed\/|v\/)?/,'').replace(/\/.*/,'');type='youtube';if(href.host.match(/youtube-nocookie.com/)){useYoutubeNocookie=true;}}else if(href.host.match(/vimeo\.com/)){type='vimeo';vimeoRegex=new RegExp(['https?:\\/\\/(?:www\\.|player\\.)?vimeo.com\\/(?:channels\\/(?:\\w+\\/)','?|groups\\/([^\\/]*)\\/videos\\/|album\\/(\\d+)\\/video\\/|video\\/|)(\\d+)(?:$|\\/|\\?)'].join(''));id=href.href.match(vimeoRegex)[3];}
if((!id||!type)&&forceVideo){id=href.href;type='custom';}
return id?{id:id,type:type,s:href.search.replace(/^\?/,''),useYoutubeNocookie:useYoutubeNocookie}:false;}
$.widget('mage.AddFotoramaVideoEvents',{options:{videoData:'',videoSettings:'',optionsVideoData:'',dataMergeStrategy:'replace',vimeoJSFrameworkLoaded:false},onVimeoJSFramework:function(){},defaultVideoData:[],PV:'product-video',VU:'video-unplayed',PVLOADED:'fotorama__product-video--loaded',PVLOADING:'fotorama__product-video--loading',VID:'video',VI:'vimeo',FTVC:'fotorama__video-close',FTAR:'fotorama__arr',fotoramaSpinner:'fotorama__spinner',fotoramaSpinnerShow:'fotorama__spinner--show',TI:'video-thumb-icon',isFullscreen:false,FTCF:'[data-gallery-role="fotorama__fullscreen-icon"]',Base:0,MobileMaxWidth:767,GP:'gallery-placeholder',videoData:null,videoDataPlaceholder:[{id:'',isBase:true,mediaType:'image',provider:''}],_create:function(){$(this.element).on('gallery:loaded',$.proxy(function(){this.fotoramaItem=$(this.element).find('.fotorama-item');this._initialize();},this));},_initialize:function(){if(!this.defaultVideoData.length){this.defaultVideoData=this.options.videoData;}
if(!this.defaultVideoData.length&&!this.options.videoData.length){this.defaultVideoData=this.options.videoData=this.videoDataPlaceholder;}
this.clearEvents();if(this._checkForVideoExist()){this._checkFullscreen();this._listenForFullscreen();this._checkForVimeo();this._isVideoBase();this._initFotoramaVideo();this._attachFotoramaEvents();}},clearEvents:function(){if(this.fotoramaItem!==undefined){this.fotoramaItem.off('fotorama:show.'+this.PV+
' fotorama:showend.'+this.PV+
' fotorama:fullscreenenter.'+this.PV+
' fotorama:fullscreenexit.'+this.PV);}},_setOptions:function(options){if(options.videoData&&options.videoData.length){this.options.videoData=options.videoData;}
this._loadVideoData(options);this._initialize();},_loadVideoData:function(options){if(options.selectedOption){if(options.dataMergeStrategy==='prepend'){this.options.videoData=[].concat(this.options.optionsVideoData[options.selectedOption],this.defaultVideoData);}else{this.options.videoData=this.options.optionsVideoData[options.selectedOption];}}else{this.options.videoData=this.defaultVideoData;}},_checkFullscreen:function(){if(this.fotoramaItem.data('fotorama').fullScreen||false){this.isFullscreen=true;}},_listenForFullscreen:function(){this.fotoramaItem.on('fotorama:fullscreenenter.'+this.PV,$.proxy(function(){this.isFullscreen=true;},this));this.fotoramaItem.on('fotorama:fullscreenexit.'+this.PV,$.proxy(function(){this.isFullscreen=false;this._hideVideoArrows();},this));},_createVideoData:function(inputData,isJSON){var videoData=[],dataUrl,tmpVideoData,tmpInputData,i;if(isJSON){inputData=$.parseJSON(inputData);}
for(i=0;i<inputData.length;i++){tmpInputData=inputData[i];dataUrl='';tmpVideoData={mediaType:'',isBase:'',id:'',provider:''};tmpVideoData.mediaType=this.VID;if(tmpInputData.mediaType!=='external-video'){tmpVideoData.mediaType=tmpInputData.mediaType;}
tmpVideoData.isBase=tmpInputData.isBase;if(tmpInputData.videoUrl&&tmpInputData.videoUrl!==null){dataUrl=tmpInputData.videoUrl;dataUrl=parseURL(dataUrl);tmpVideoData.id=dataUrl.id;tmpVideoData.provider=dataUrl.type;tmpVideoData.videoUrl=tmpInputData.videoUrl;tmpVideoData.useYoutubeNocookie=dataUrl.useYoutubeNocookie;}
videoData.push(tmpVideoData);}
return videoData;},_createCloseVideo:function(fotorama,isBase){var closeVideo;this.fotoramaItem.find('.'+this.FTVC).remove();this.fotoramaItem.append('<div class="'+this.FTVC+'"></div>');this.fotoramaItem.css('position','relative');closeVideo=this.fotoramaItem.find('.'+this.FTVC);this._closeVideoSetEvents(closeVideo,fotorama);if(isBase&&this.options.videoData[fotorama.activeIndex].isBase&&$(window).width()>this.MobileMaxWidth){this._showCloseVideo();}},_hideCloseVideo:function(){this.fotoramaItem.find('.'+this.FTVC).removeClass('fotorama-show-control');},_showCloseVideo:function(){this.fotoramaItem.find('.'+this.FTVC).addClass('fotorama-show-control');},_closeVideoSetEvents:function($closeVideo,fotorama){$closeVideo.on('click',$.proxy(function(){this._unloadVideoPlayer(fotorama.activeFrame.$stageFrame.parent(),fotorama,true);this._hideCloseVideo();},this));},_checkForVideoExist:function(){var key,result,checker,videoSettings;if(!this.options.videoData){return false;}
if(!this.options.videoSettings){return false;}
result=this._createVideoData(this.options.videoData,false);checker=false;videoSettings=this.options.videoSettings[0];videoSettings.playIfBase=parseInt(videoSettings.playIfBase,10);videoSettings.showRelated=parseInt(videoSettings.showRelated,10);videoSettings.videoAutoRestart=parseInt(videoSettings.videoAutoRestart,10);for(key in result){if(result[key].mediaType===this.VID){checker=true;}}
if(checker){this.options.videoData=result;}
return checker;},_checkForVimeo:function(){var allVideoData=this.options.videoData,videoItem;if(window.Froogaloop){return;}
for(videoItem in allVideoData){if(allVideoData[videoItem].provider===this.VI){this._loadVimeoJSFramework();return;}}},_isVideoBase:function(){var allVideoData=this.options.videoData,videoItem,allVideoDataKeys,key,i;allVideoDataKeys=Object.keys(allVideoData);for(i=0;i<allVideoDataKeys.length;i++){key=allVideoDataKeys[i];videoItem=allVideoData[key];if(videoItem.mediaType===this.VID&&videoItem.isBase&&this.options.videoSettings[0].playIfBase&&allowBase){this.Base=true;allowBase=false;}}
if(!this.isFullscreen){this._createCloseVideo(this.fotoramaItem.data('fotorama'),this.Base);}},_loadVimeoJSFramework:function(){var element=document.createElement('script'),scriptTag=document.getElementsByTagName('script')[0];element.async=true;element.src='https://f.vimeocdn.com/js/froogaloop2.min.js';element.onload=function(){this.onVimeoJSFramework();this.vimeoJSFrameworkLoaded=true;}.bind(this);scriptTag.parentNode.insertBefore(element,scriptTag);},_initFotoramaVideo:function(e){var fotorama=this.fotoramaItem.data('fotorama'),thumbsParent,thumbs,t;if(!fotorama.activeFrame.$navThumbFrame){this.fotoramaItem.on('fotorama:showend.'+this.PV,$.proxy(function(evt,fotoramaData){$(fotoramaData.activeFrame.$stageFrame).removeAttr('href');},this));this._startPrepareForPlayer(e,fotorama);return null;}
fotorama.data.map($.proxy(this._setItemType,this));thumbsParent=fotorama.activeFrame.$navThumbFrame.parent();thumbs=thumbsParent.find('.fotorama__nav__frame:visible');for(t=0;t<thumbs.length;t++){this._setThumbsIcon(thumbs.eq(t),t);this._checkForVideo(e,fotorama,t+1);}
this.fotoramaItem.on('fotorama:showend.'+this.PV,$.proxy(function(evt,fotoramaData){$(fotoramaData.activeFrame.$stageFrame).removeAttr('href');},this));},_setThumbsIcon:function(elem,i){var fotorama=this.fotoramaItem.data('fotorama');if(fotorama.options.nav==='dots'&&elem.hasClass(this.TI)){elem.removeClass(this.TI);}
if(this.options.videoData[i].mediaType===this.VID&&fotorama.data[i].type===this.VID&&fotorama.options.nav==='thumbs'){elem.addClass(this.TI);}},_setItemType:function(item,i){!item.type&&(item.type=this.options.videoData[i].mediaType);},_attachFotoramaEvents:function(){this.fotoramaItem.on('fotorama:showend.'+this.PV,$.proxy(function(e,fotorama){this._startPrepareForPlayer(e,fotorama);},this));this.fotoramaItem.on('fotorama:show.'+this.PV,$.proxy(function(e,fotorama){this._unloadVideoPlayer(fotorama.activeFrame.$stageFrame.parent(),fotorama,true);},this));this.fotoramaItem.on('fotorama:fullscreenexit.'+this.PV,$.proxy(function(e,fotorama){fotorama.activeFrame.$stageFrame.find('.'+this.PV).remove();this._startPrepareForPlayer(e,fotorama);},this));},_startPrepareForPlayer:function(e,fotorama){this._unloadVideoPlayer(fotorama.activeFrame.$stageFrame.parent(),fotorama,false);this._checkForVideo(e,fotorama,fotorama.activeFrame.i);this._checkForVideo(e,fotorama,fotorama.activeFrame.i-1);this._checkForVideo(e,fotorama,fotorama.activeFrame.i+1);},_checkForVideo:function(e,fotorama,number){var videoData=this.options.videoData[number-1],$image=fotorama.data[number-1];if($image){!$image.type&&this._setItemType($image,number-1);if($image.type==='image'){$image.$navThumbFrame&&$image.$navThumbFrame.removeClass(this.TI);this._hideCloseVideo();return;}else if($image.$navThumbFrame&&$image.type==='video'){!$image.$navThumbFrame.hasClass(this.TI)&&$image.$navThumbFrame.addClass(this.TI);}
$image=$image.$stageFrame;}
if($image&&videoData&&videoData.mediaType===this.VID){$(fotorama.activeFrame.$stageFrame).removeAttr('href');this._prepareForVideoContainer($image,videoData,fotorama,number);}
if(this.isFullscreen&&this.fotoramaItem.data('fotorama').activeFrame.i===number){this.fotoramaItem.data('fotorama').activeFrame.$stageFrame[0].click();}},_prepareForVideoContainer:function($image,videoData,fotorama,number){$image.addClass('fotorama-video-container').addClass(this.VU);this._createVideoContainer(videoData,$image);this._setVideoEvent($image,this.PV,fotorama,number);},_createVideoContainer:function(videoData,$image){var videoSettings;videoSettings=this.options.videoSettings[0];$image.find('.'+this.PV).remove();$image.append('<div class="'+
this.PV+
'" data-related="'+
videoSettings.showRelated+
'" data-loop="'+
videoSettings.videoAutoRestart+
'" data-type="'+
videoData.provider+
'" data-code="'+
videoData.id+
'"  data-youtubenocookie="'+
videoData.useYoutubeNocookie+
'" data-width="100%" data-height="100%"></div>');},_setVideoEvent:function($image,PV,fotorama,number){$image.find('.magnify-lens').remove();$image.off('click tap',$.proxy(this._clickHandler,this)).on('click tap',$.proxy(this._clickHandler,this));this._handleBaseVideo(fotorama,number);},_hideVideoArrows:function(){var arrows=$('.'+this.FTAR);arrows.removeClass('fotorama__arr--shown');arrows.removeClass('fotorama__arr--hidden');},_showLoader:function(){var spinner=this.fotoramaItem.find('.'+this.fotoramaSpinner);spinner.addClass(this.fotoramaSpinnerShow);this.fotoramaItem.data('fotorama').activeFrame.$stageFrame.addClass(this.PVLOADING);},_hideLoader:function(){var spinner=this.fotoramaItem.find('.'+this.fotoramaSpinner);spinner.removeClass(this.fotoramaSpinnerShow);this.fotoramaItem.data('fotorama').activeFrame.$stageFrame.removeClass(this.PVLOADING);},_clickHandler:function(event){var type;if($(event.target).hasClass(this.VU)&&$(event.target).find('iframe').length===0){$(event.target).removeClass(this.VU);type=$(event.target).find('.'+this.PV).data('type');if(this.vimeoJSFrameworkLoaded&&type===this.VI){$(event.target).find('.'+this.PV).productVideoLoader();}else if(type===this.VI){this._showLoader();this.onVimeoJSFramework=function(){$(event.target).find('.'+this.PV).productVideoLoader();this._hideLoader();}.bind(this);}else{$(event.target).find('.'+this.PV).productVideoLoader();}
$('.'+this.FTAR).addClass(this.isFullscreen?'fotorama__arr--shown':'fotorama__arr--hidden');}},_handleBaseVideo:function(fotorama,srcNumber){var waitForFroogaloop,videoData=this.options.videoData,activeIndex=fotorama.activeIndex,number=parseInt(srcNumber,10),activeIndexIsBase=videoData[activeIndex];if(!this.Base){return;}
if(activeIndexIsBase&&number===1&&$(window).width()>this.MobileMaxWidth){if(this.options.videoData[fotorama.activeIndex].provider===this.VI){waitForFroogaloop=setInterval($.proxy(function(){if(window.Froogaloop){clearInterval(waitForFroogaloop);fotorama.requestFullScreen();this.fotoramaItem.data('fotorama').activeFrame.$stageFrame[0].click();this.Base=false;}},this),50);}else{setTimeout($.proxy(function(){fotorama.requestFullScreen();this.fotoramaItem.data('fotorama').activeFrame.$stageFrame[0].click();this.Base=false;},this),50);}}},_unloadVideoPlayer:function($wrapper,current,close){var self=this;if(!$wrapper){return;}
$wrapper.find('.'+this.PVLOADED).removeClass(this.PVLOADED);this._hideLoader();$wrapper.find('.'+this.PV).each(function(){var $item=$(this).parent(),cloneVideoDiv,iframeElement=$(this).find('iframe'),currentIndex,itemIndex;if(iframeElement.length===0){return;}
currentIndex=current.activeFrame.$stageFrame.index();itemIndex=$item.index();if(currentIndex===itemIndex&&!close){return;}
if(currentIndex!==itemIndex&&close){return;}
iframeElement.remove();cloneVideoDiv=$(this).clone();$(this).remove();$item.append(cloneVideoDiv);$item.addClass(self.VU);self._hideCloseVideo();self._hideVideoArrows();if(self.isFullscreen&&!self.fotoramaItem.data('fotorama').options.fullscreen.arrows){if($('.'+self.FTAR+'--prev').is(':focus')||$('.'+self.FTAR+'--next').is(':focus')){$(self.FTCF).focus();}}});}});return $.mage.AddFotoramaVideoEvents;});define('Magento_Catalog/js/price-utils',['jquery','underscore'],function($,_){'use strict';var globalPriceFormat={requiredPrecision:2,integerRequired:1,decimalSymbol:',',groupSymbol:',',groupLength:','};function stringPad(string,times){return(new Array(times+1)).join(string);}
function formatPrice(amount,format,isShowSign){var s='',precision,integerRequired,decimalSymbol,groupSymbol,groupLength,pattern,i,pad,j,re,r,am;format=_.extend(globalPriceFormat,format);precision=isNaN(format.requiredPrecision=Math.abs(format.requiredPrecision))?2:format.requiredPrecision;integerRequired=isNaN(format.integerRequired=Math.abs(format.integerRequired))?1:format.integerRequired;decimalSymbol=format.decimalSymbol===undefined?',':format.decimalSymbol;groupSymbol=format.groupSymbol===undefined?'.':format.groupSymbol;groupLength=format.groupLength===undefined?3:format.groupLength;pattern=format.pattern||'%s';if(isShowSign===undefined||isShowSign===true){s=amount<0?'-':isShowSign?'+':'';}else if(isShowSign===false){s='';}
pattern=pattern.indexOf('{sign}')<0?s+pattern:pattern.replace('{sign}',s);i=parseInt(amount=Number(Math.round(Math.abs(+amount||0)+'e+'+precision)+('e-'+precision)),10)+'';pad=i.length<integerRequired?integerRequired-i.length:0;i=stringPad('0',pad)+i;j=i.length>groupLength?i.length%groupLength:0;re=new RegExp('(\\d{'+groupLength+'})(?=\\d)','g');am=Number(Math.round(Math.abs(amount-i)+'e+'+precision)+('e-'+precision));r=(j?i.substr(0,j)+groupSymbol:'')+
i.substr(j).replace(re,'$1'+groupSymbol)+
(precision?decimalSymbol+am.toFixed(precision).replace(/-/,0).slice(2):'');return pattern.replace('%s',r).replace(/^\s\s*/,'').replace(/\s\s*$/,'');}
function objectDeepClone(obj){return JSON.parse(JSON.stringify(obj));}
function findOptionId(element){var re,id,name;if(!element){return id;}
name=$(element).attr('name');if(name.indexOf('[')!==-1){re=/\[([^\]]+)?\]/;}else{re=/_([^\]]+)?_/;}
id=re.exec(name)&&re.exec(name)[1];if(id){return id;}}
return{formatPrice:formatPrice,deepClone:objectDeepClone,strPad:stringPad,findOptionId:findOptionId};});define('Magento_Catalog/js/price-box',['jquery','Magento_Catalog/js/price-utils','underscore','mage/template','jquery-ui-modules/widget'],function($,utils,_,mageTemplate){'use strict';var globalOptions={productId:null,priceConfig:null,prices:{},priceTemplate:'<span class="price"><%- data.formatted %></span>'};$.widget('mage.priceBox',{options:globalOptions,_init:function initPriceBox(){var box=this.element;box.trigger('updatePrice');this.cache.displayPrices=utils.deepClone(this.options.prices);},_create:function createPriceBox(){var box=this.element;this.cache={};this._setDefaultsFromPriceConfig();this._setDefaultsFromDataSet();box.on('reloadPrice',this.reloadPrice.bind(this));box.on('updatePrice',this.onUpdatePrice.bind(this));box.trigger('price-box-initialized');},onUpdatePrice:function onUpdatePrice(event,prices){return this.updatePrice(prices);},updatePrice:function updatePrice(newPrices){var prices=this.cache.displayPrices,additionalPrice={},pricesCode=[],priceValue,origin,finalPrice;this.cache.additionalPriceObject=this.cache.additionalPriceObject||{};if(newPrices){$.extend(this.cache.additionalPriceObject,newPrices);}
if(!_.isEmpty(additionalPrice)){pricesCode=_.keys(additionalPrice);}else if(!_.isEmpty(prices)){pricesCode=_.keys(prices);}
_.each(this.cache.additionalPriceObject,function(additional){if(additional&&!_.isEmpty(additional)){pricesCode=_.keys(additional);}
_.each(pricesCode,function(priceCode){priceValue=additional[priceCode]||{};priceValue.amount=+priceValue.amount||0;priceValue.adjustments=priceValue.adjustments||{};additionalPrice[priceCode]=additionalPrice[priceCode]||{'amount':0,'adjustments':{}};additionalPrice[priceCode].amount=0+(additionalPrice[priceCode].amount||0)+
priceValue.amount;_.each(priceValue.adjustments,function(adValue,adCode){additionalPrice[priceCode].adjustments[adCode]=0+
(additionalPrice[priceCode].adjustments[adCode]||0)+adValue;});});});if(_.isEmpty(additionalPrice)){this.cache.displayPrices=utils.deepClone(this.options.prices);}else{_.each(additionalPrice,function(option,priceCode){origin=this.options.prices[priceCode]||{};finalPrice=prices[priceCode]||{};option.amount=option.amount||0;origin.amount=origin.amount||0;origin.adjustments=origin.adjustments||{};finalPrice.adjustments=finalPrice.adjustments||{};finalPrice.amount=0+origin.amount+option.amount;_.each(option.adjustments,function(pa,paCode){finalPrice.adjustments[paCode]=0+(origin.adjustments[paCode]||0)+pa;});},this);}
this.element.trigger('reloadPrice');},reloadPrice:function reDrawPrices(){var priceFormat=(this.options.priceConfig&&this.options.priceConfig.priceFormat)||{},priceTemplate=mageTemplate(this.options.priceTemplate);_.each(this.cache.displayPrices,function(price,priceCode){price.final=_.reduce(price.adjustments,function(memo,amount){return memo+amount;},price.amount);price.formatted=utils.formatPrice(price.final,priceFormat);$('[data-price-type="'+priceCode+'"]',this.element).html(priceTemplate({data:price}));},this);},setDefault:function setDefaultPrices(prices){this.cache.displayPrices=utils.deepClone(prices);this.options.prices=utils.deepClone(prices);},_setOptions:function setOptions(options){$.extend(true,this.options,options);if('disabled'in options){this._setOption('disabled',options.disabled);}
return this;},_setDefaultsFromDataSet:function _setDefaultsFromDataSet(){var box=this.element,priceHolders=$('[data-price-type]',box),prices=this.options.prices;this.options.productId=box.data('productId');if(_.isEmpty(prices)){priceHolders.each(function(index,element){var type=$(element).data('priceType'),amount=parseFloat($(element).data('priceAmount'));if(type&&!_.isNaN(amount)){prices[type]={amount:amount};}});}},_setDefaultsFromPriceConfig:function _setDefaultsFromPriceConfig(){var config=this.options.priceConfig;if(config&&config.prices){this.options.prices=config.prices;}}});return $.mage.priceBox;});define('Magento_Catalog/js/price-box-mixin',['jquery','Magento_Catalog/js/price-utils','underscore','jquery-ui-modules/widget'],function($,utils,_){"use strict";return function(widget){var prototype=widget.prototype;$.widget(prototype.namespace+'.'+prototype.widgetName,widget,{updatePrice:function updatePrice(newPrices){var prices=this.cache.displayPrices,additionalPrice={},pricesCode=[],bundleBodyClass=document.body.classList.contains('page-product-bundle'),priceValue,origin,finalPrice;this.cache.additionalPriceObject=this.cache.additionalPriceObject||{};if(newPrices){$.extend(this.cache.additionalPriceObject,newPrices);}
if(!_.isEmpty(additionalPrice)){pricesCode=_.keys(additionalPrice);}else if(!_.isEmpty(prices)){pricesCode=_.keys(prices);}
_.each(this.cache.additionalPriceObject,function(additional){if(additional&&!_.isEmpty(additional)){pricesCode=_.keys(additional);}
_.each(pricesCode,function(priceCode){priceValue=additional[priceCode]||{};priceValue.amount=+priceValue.amount||0;priceValue.adjustments=priceValue.adjustments||{};additionalPrice[priceCode]=additionalPrice[priceCode]||{'amount':0,'adjustments':{}};additionalPrice[priceCode].amount=0+(additionalPrice[priceCode].amount||0)+
priceValue.amount;_.each(priceValue.adjustments,function(adValue,adCode){additionalPrice[priceCode].adjustments[adCode]=0+
(additionalPrice[priceCode].adjustments[adCode]||0)+adValue;});});});if(_.isEmpty(additionalPrice)){this.cache.displayPrices=utils.deepClone(this.options.prices);}else{_.each(additionalPrice,function(option,priceCode){origin=this.options.prices[priceCode]||{};finalPrice=prices[priceCode]||{};option.amount=option.amount||0;origin.amount=origin.amount||0;origin.adjustments=origin.adjustments||{};finalPrice.adjustments=finalPrice.adjustments||{};if(bundleBodyClass){finalPrice.amount=0+option.amount;}else{finalPrice.amount=0+origin.amount+option.amount;}
_.each(option.adjustments,function(pa,paCode){finalPrice.adjustments[paCode]=0+(origin.adjustments[paCode]||0)+pa;});},this);}
this.element.trigger('reloadPrice');}});return $[prototype.namespace][prototype.widgetName];};});define('Magento_Theme/js/model/breadcrumb-list',[],function(){'use strict';return[];});define('Magento_Catalog/js/product/breadcrumbs',['jquery','Magento_Theme/js/model/breadcrumb-list'],function($,breadcrumbList){'use strict';return function(widget){var sessionItemKey='vaimo.breadcrumbs.item-clicked';$.widget('mage.breadcrumbs',widget,{options:{categoryUrlSuffix:'',useCategoryPathInUrl:false,product:''},_render:function(){this._convertJsonMenu();this._appendCatalogCrumbs();this._super();},_appendCatalogCrumbs:function(){var categoryCrumbs=this._resolveCategoryCrumbs();if(sessionStorage.getItem(sessionItemKey)!=='klevu'){categoryCrumbs.forEach(function(crumbInfo){breadcrumbList.push(crumbInfo);});}else{sessionStorage.removeItem(sessionItemKey);}
if(this.options.product){breadcrumbList.push(this._getProductCrumb());}},_resolveCategoryCrumbs:function(){var categoryCrumbs=[],categoryUrl=this._resolveCategoryUrl(),path,tree;if(categoryUrl.length&&this.menu.tree.length){path=this._resolveCategoryPath(categoryUrl);tree=this.menu.tree;categoryCrumbs=this._resolveMenuTreeCrumbs(path,tree);}
return categoryCrumbs;},_resolveMenuTreeCrumbs:function(path,tree){var crumbs=[],crumbsIteration={};while(tree){crumbsIteration=this._resolveCurrentTreeCrumbs(path,tree);crumbs=crumbs.concat(crumbsIteration.crumbs);tree=crumbsIteration.tree;path=crumbsIteration.path;}
return crumbs;},_resolveCurrentTreeCrumbs:function(path,tree){var breadCrumbs=this,crumbs=[],foundChild=false;tree.forEach(function(child){if(foundChild)return;if(child.url_key===path[0]){foundChild=true;path.shift();crumbs.push(breadCrumbs._getCategoryCrumb(child));tree=breadCrumbs._menuTreeNextStep(child,path);}});return{path:path,tree:(foundChild)?tree:false,crumbs:crumbs};},_menuTreeNextStep:function(child,path){var nextChildren=false;if(path.length){nextChildren=child.children;while(nextChildren[0].is_pseudo){nextChildren=this._combineChildrenArrays(nextChildren);}}
return nextChildren;},_combineChildrenArrays:function(childrenArray){var result=[],childIndex;for(childIndex=0;childIndex<childrenArray.length;childIndex++){result=result.concat(childrenArray[childIndex].children);}
return result;},_getCategoryCrumb:function(menuItem){return{'name':'category','label':menuItem.name,'link':this.menu.base_url+menuItem.url,'title':''};},_getProductCrumb:function(){return{'name':'product','label':this.options.product,'link':'','title':''};},_resolveCategoryUrl:function(){var categoryUrl;if(this.options.useCategoryPathInUrl){categoryUrl=window.location.href.split('?')[0];categoryUrl=categoryUrl.substring(0,categoryUrl.lastIndexOf('/'))+
this.options.categoryUrlSuffix;}else{categoryUrl=document.referrer;if(categoryUrl.indexOf('?')>0){categoryUrl=categoryUrl.substr(0,categoryUrl.indexOf('?'));}}
return categoryUrl;},_resolveCategoryPath:function(categoryUrl){var categoryPath=categoryUrl;categoryPath=categoryPath.split("//")[1];categoryPath=categoryPath.split("/");categoryPath.shift();return categoryPath;},_sanitizeJson:function(json){return json.replace(/\n/g,"\\n").replace(/\r/g,"\\r").replace(/\t/g,"\\t").replace(/\f/g,"\\f");},_convertJsonMenu:function(){var menuSource;if('jsonMenu'in window){try{menuSource=JSON.parse(this._sanitizeJson(window['jsonMenu']));}catch(e){console.error(e);menuSource={};}
if('tree'in menuSource){this.menu=menuSource;}}}});return $.mage.breadcrumbs;};});define('Magento_Theme/js/view/add-home-breadcrumb',['jquery','Magento_Theme/js/model/breadcrumb-list','mage/translate'],function($,breadcrumbList){'use strict';var homeCrumb=function(){return{name:'home',label:$.mage.__('Home'),title:$.mage.__('Go to Home Page'),link:BASE_URL||''};};return function(breadcrumb){breadcrumbList.unshift(homeCrumb());return breadcrumb;};});define('Magento_Theme/js/view/breadcrumbs',['jquery','mage/template','Magento_Theme/js/model/breadcrumb-list','text!Magento_Theme/templates/breadcrumbs.html','jquery-ui-modules/widget'],function($,mageTemplate,breadcrumbList,tpl){'use strict';$.widget('mage.breadcrumbs',{_init:function(){this._super();this._render();},_render:function(){var html,crumbs=breadcrumbList,template=mageTemplate(tpl);this._decorate(crumbs);html=template({'breadcrumbs':crumbs});if(html.length){$(this.element).html(html);}},_decorate:function(list){if(list.length){list[0].first=true;}
if(list.length>1){list[list.length-1].last=true;}}});return $.mage.breadcrumbs;});define('magnifier/magnifier',(require.s.contexts._.config.shim['magnifier/magnifier']&&require.s.contexts._.config.shim['magnifier/magnifier'].deps||[]),function(){(function($){$.fn.magnify=function(options){'use strict';var magnify=new Magnify($(this),options);return magnify;};function Magnify(element,options){var customUserOptions=options||{},$box=$(element),$thumb,that=this,largeWrapper=options.largeWrapper||'.magnifier-preview',$magnifierPreview=$(largeWrapper);curThumb=null,magnifierOptions={x:0,y:0,w:0,h:0,lensW:0,lensH:0,lensBgX:0,lensBgY:0,largeW:0,largeH:0,largeL:0,largeT:0,zoom:2,zoomMin:1.1,zoomMax:5,mode:'outside',eventType:'click',status:0,zoomAttached:false,zoomable:customUserOptions.zoomable!==undefined?customUserOptions.zoomable:false,onthumbenter:customUserOptions.onthumbenter!==undefined?customUserOptions.onthumbenter:null,onthumbmove:customUserOptions.onthumbmove!==undefined?customUserOptions.onthumbmove:null,onthumbleave:customUserOptions.onthumbleave!==undefined?customUserOptions.onthumbleave:null,onzoom:customUserOptions.onzoom!==undefined?customUserOptions.onzoom:null},pos={t:0,l:0,x:0,y:0},gId=0,status=0,curIdx='',curLens=null,curLarge=null,lensbg=customUserOptions.bg!==undefined?customUserOptions.lensbg:true,gZoom=customUserOptions.zoom!==undefined?customUserOptions.zoom:magnifierOptions.zoom,gZoomMin=customUserOptions.zoomMin!==undefined?customUserOptions.zoomMin:magnifierOptions.zoomMin,gZoomMax=customUserOptions.zoomMax!==undefined?customUserOptions.zoomMax:magnifierOptions.zoomMax,gMode=customUserOptions.mode||magnifierOptions.mode,gEventType=customUserOptions.eventType||magnifierOptions.eventType,data={},inBounds=false,isOverThumb=false,rate=1,paddingX=0,paddingY=0,enabled=true,showWrapper=true;var MagnifyCls={magnifyHidden:'magnify-hidden',magnifyOpaque:'magnify-opaque',magnifyFull:'magnify-fullimage'};that.update=function(){updateLensOnLoad();};that.init=function(){_init($box,options);};function _toBoolean(str){if(typeof str==='string'){if(str==='true'){return true;}else if(str==='false'||''){return false;}
console.warn('Wrong type: can\'t be transformed to Boolean');}else if(typeof str==='boolean'){return str;}}
function createLens(thumb){if($(thumb).siblings('.magnify-lens').length){return false;}
var lens=$('<div class="magnify-lens magnify-hidden" data-gallery-role="magnifier-zoom"></div>');$(thumb).parent().append(lens);}
function updateLensOnLoad(idSelectorMainImg,thumb,largeImgInMagnifyLens,largeWrapper){var magnifyLensElement=$box.find('.magnify-lens'),textWrapper;if(data[idSelectorMainImg].status===1){textWrapper=$('<div class="magnifier-loader-text"></div>');magnifyLensElement.className='magnifier-loader magnify-hidden';textWrapper.html('Loading...');magnifyLensElement.html('').append(textWrapper);}else if(data[idSelectorMainImg].status===2){magnifyLensElement.addClass(MagnifyCls.magnifyHidden);magnifyLensElement.html('');largeImgInMagnifyLens.id=idSelectorMainImg+'-large';largeImgInMagnifyLens.style.width=data[idSelectorMainImg].largeImgInMagnifyLensWidth+'px';largeImgInMagnifyLens.style.height=data[idSelectorMainImg].largeImgInMagnifyLensHeight+'px';largeImgInMagnifyLens.className='magnifier-large magnify-hidden';if(data[idSelectorMainImg].mode==='inside'){magnifyLensElement.append(largeImgInMagnifyLens);}else{largeWrapper.html('').append(largeImgInMagnifyLens);}}
data[idSelectorMainImg].lensH=data[idSelectorMainImg].lensH>$thumb.height()?$thumb.height():data[idSelectorMainImg].lensH;if(Math.round(data[idSelectorMainImg].lensW)===0){magnifyLensElement.css('display','none');}else{magnifyLensElement.css({width:Math.round(data[idSelectorMainImg].lensW)+'px',height:Math.round(data[idSelectorMainImg].lensH)+'px',display:''});}}
function getMousePos(){var xPos=pos.x-magnifierOptions.x,yPos=pos.y-magnifierOptions.y,t,l;inBounds=xPos<0||yPos<0||xPos>magnifierOptions.w||yPos>magnifierOptions.h?false:true;l=xPos-magnifierOptions.lensW/2;t=yPos-magnifierOptions.lensH/2;if(xPos<magnifierOptions.lensW/2){l=0;}
if(yPos<magnifierOptions.lensH/2){t=0;}
if(xPos-magnifierOptions.w+Math.ceil(magnifierOptions.lensW/2)>0){l=magnifierOptions.w-Math.ceil(magnifierOptions.lensW+2);}
if(yPos-magnifierOptions.h+Math.ceil(magnifierOptions.lensH/2)>0){t=magnifierOptions.h-Math.ceil(magnifierOptions.lensH);}
pos.l=l;pos.t=t;magnifierOptions.lensBgX=pos.l;magnifierOptions.lensBgY=pos.t;if(magnifierOptions.mode==='inside'){magnifierOptions.largeL=Math.round(xPos*(magnifierOptions.zoom-magnifierOptions.lensW/magnifierOptions.w));magnifierOptions.largeT=Math.round(yPos*(magnifierOptions.zoom-magnifierOptions.lensH/magnifierOptions.h));}else{magnifierOptions.largeL=Math.round(magnifierOptions.lensBgX*magnifierOptions.zoom*(magnifierOptions.largeWrapperW/magnifierOptions.w));magnifierOptions.largeT=Math.round(magnifierOptions.lensBgY*magnifierOptions.zoom*(magnifierOptions.largeWrapperH/magnifierOptions.h));}}
function onThumbEnter(){if(_toBoolean(enabled)){magnifierOptions=data[curIdx];curLens=$box.find('.magnify-lens');if(magnifierOptions.status===2){curLens.removeClass(MagnifyCls.magnifyOpaque);curLarge=$('#'+curIdx+'-large');curLarge.removeClass(MagnifyCls.magnifyHidden);}else if(magnifierOptions.status===1){curLens.className='magnifier-loader';}}}
function onThumbLeave(){if(magnifierOptions.status>0){var handler=magnifierOptions.onthumbleave;if(handler!==null){handler({thumb:curThumb,lens:curLens,large:curLarge,x:pos.x,y:pos.y});}
if(!curLens.hasClass(MagnifyCls.magnifyHidden)){curLens.addClass(MagnifyCls.magnifyHidden);if(curLarge!==null){curLarge.addClass(MagnifyCls.magnifyHidden);}}}}
function move(){if(_toBoolean(enabled)){if(status!==magnifierOptions.status){onThumbEnter();}
if(magnifierOptions.status>0){curThumb.className=magnifierOptions.thumbCssClass+' magnify-opaque';if(magnifierOptions.status===1){curLens.className='magnifier-loader';}else if(magnifierOptions.status===2){curLens.removeClass(MagnifyCls.magnifyHidden);curLarge.removeClass(MagnifyCls.magnifyHidden);curLarge.css({left:'-'+magnifierOptions.largeL+'px',top:'-'+magnifierOptions.largeT+'px'});}
var borderOffset=2;pos.t=pos.t<=0?0:pos.t-borderOffset;curLens.css({left:pos.l+paddingX+'px',top:pos.t+paddingY+'px'});if(lensbg){curLens.css({'background-color':'rgba(f,f,f,.5)'});}else{curLens.get(0).style.backgroundPosition='-'+
magnifierOptions.lensBgX+'px -'+
magnifierOptions.lensBgY+'px';}
var handler=magnifierOptions.onthumbmove;if(handler!==null){handler({thumb:curThumb,lens:curLens,large:curLarge,x:pos.x,y:pos.y});}}
status=magnifierOptions.status;}}
function setThumbData(mainImage,mainImageData){var thumbBounds=mainImage.getBoundingClientRect(),w=0,h=0;mainImageData.x=Math.round(thumbBounds.left);mainImageData.y=Math.round(thumbBounds.top);mainImageData.w=Math.round(thumbBounds.right-mainImageData.x);mainImageData.h=Math.round(thumbBounds.bottom-mainImageData.y);if(mainImageData.mode==='inside'){w=mainImageData.w;h=mainImageData.h;}else{w=mainImageData.largeWrapperW;h=mainImageData.largeWrapperH;}
mainImageData.largeImgInMagnifyLensWidth=Math.round(mainImageData.zoom*w);mainImageData.largeImgInMagnifyLensHeight=Math.round(mainImageData.zoom*h);mainImageData.lensW=Math.round(mainImageData.w/mainImageData.zoom);mainImageData.lensH=Math.round(mainImageData.h/mainImageData.zoom);}
function _init($box,options){var opts={};if(options.thumb===undefined){return false;}
$thumb=$box.find(options.thumb);if($thumb.length){for(var key in options){opts[key]=options[key];}
opts.thumb=$thumb;enabled=opts.enabled;if(_toBoolean(enabled)){$magnifierPreview.show().css('display','');$magnifierPreview.addClass(MagnifyCls.magnifyHidden);set(opts);}else{$magnifierPreview.empty().hide();}}
return that;}
function hoverEvents(thumb){$(thumb).on('mouseover',function(e){if(showWrapper){if(magnifierOptions.status!==0){onThumbLeave();}
handleEvents(e);isOverThumb=inBounds;}}).trigger('mouseover');}
function clickEvents(thumb){$(thumb).on('click',function(e){if(showWrapper){if(!isOverThumb){if(magnifierOptions.status!==0){onThumbLeave();}
handleEvents(e);isOverThumb=true;}}});}
function bindEvents(eType,thumb){switch(eType){case 'hover':hoverEvents(thumb);break;case 'click':clickEvents(thumb);break;}}
function handleEvents(e){var src=e.target;curIdx=src.id;curThumb=src;onThumbEnter(src);setThumbData(curThumb,magnifierOptions);pos.x=e.clientX;pos.y=e.clientY;getMousePos();move();var handler=magnifierOptions.onthumbenter;if(handler!==null){handler({thumb:curThumb,lens:curLens,large:curLarge,x:pos.x,y:pos.y});}}
function set(options){if(data[options.thumb.id]!==undefined){curThumb=options.thumb;return false;}
var thumbObj=new Image(),largeObj=new Image(),$thumb=options.thumb,thumb=$thumb.get(0),idx=thumb.id,largeUrl,largeWrapper=$(options.largeWrapper),zoom=options.zoom||thumb.getAttribute('data-zoom')||gZoom,zoomMin=options.zoomMin||gZoomMin,zoomMax=options.zoomMax||gZoomMax,mode=options.mode||thumb.getAttribute('data-mode')||gMode,eventType=options.eventType||thumb.getAttribute('data-eventType')||gEventType,onthumbenter=options.onthumbenter!==undefined?options.onthumbenter:magnifierOptions.onthumbenter,onthumbleave=options.onthumbleave!==undefined?options.onthumbleave:magnifierOptions.onthumbleave,onthumbmove=options.onthumbmove!==undefined?options.onthumbmove:magnifierOptions.onthumbmove;largeUrl=$thumb.data('original')||customUserOptions.full||$thumb.attr('src');if(thumb.id===''){idx=thumb.id='magnifier-item-'+gId;gId+=1;}
createLens(thumb,idx);if(options.width){largeWrapper.width(options.width);}
if(options.height){largeWrapper.height(options.height);}
if(options.top){if(typeof options.top=='function'){var top=options.top()+'px';}else{var top=options.top+'px';}
if(largeWrapper.length){largeWrapper[0].style.top=top.replace('%px','%');}}
if(options.left){if(typeof options.left=='function'){var left=options.left()+'px';}else{var left=options.left+'px';}
if(largeWrapper.length){largeWrapper[0].style.left=left.replace('%px','%');}}
data[idx]={zoom:zoom,zoomMin:zoomMin,zoomMax:zoomMax,mode:mode,eventType:eventType,thumbCssClass:thumb.className,zoomAttached:false,status:0,largeUrl:largeUrl,largeWrapperId:mode==='outside'?largeWrapper.attr('id'):null,largeWrapperW:mode==='outside'?largeWrapper.width():null,largeWrapperH:mode==='outside'?largeWrapper.height():null,onthumbenter:onthumbenter,onthumbleave:onthumbleave,onthumbmove:onthumbmove};paddingX=($thumb.parent().width()-$thumb.width())/2;paddingY=($thumb.parent().height()-$thumb.height())/2;showWrapper=false;$(thumbObj).on('load',function(){data[idx].status=1;$(largeObj).on('load',function(){if(largeObj.width>largeWrapper.width()||largeObj.height>largeWrapper.height()){showWrapper=true;bindEvents(eventType,thumb);data[idx].status=2;if(largeObj.width>largeObj.height){data[idx].zoom=largeObj.width/largeWrapper.width();}else{data[idx].zoom=largeObj.height/largeWrapper.height();}
setThumbData(thumb,data[idx]);updateLensOnLoad(idx,thumb,largeObj,largeWrapper);}});largeObj.src=data[idx].largeUrl;});thumbObj.src=thumb.src;}
function onMouseLeave(){onThumbLeave();isOverThumb=false;$magnifierPreview.addClass(MagnifyCls.magnifyHidden);}
function onMousemove(e){pos.x=e.clientX;pos.y=e.clientY;getMousePos();if(gEventType==='hover'){isOverThumb=inBounds;}
if(inBounds&&isOverThumb&&gMode==='outside'){$magnifierPreview.removeClass(MagnifyCls.magnifyHidden);move();}}
function onScroll(){if(curThumb!==null){setThumbData(curThumb,magnifierOptions);}}
$(window).on('scroll',onScroll);$(window).resize(function(){_init($box,customUserOptions);});$box.on('mousemove',onMousemove);$box.on('mouseleave',onMouseLeave);_init($box,customUserOptions);}}(jQuery));return(require.s.contexts._.config.shim['magnifier/magnifier']&&require.s.contexts._.config.shim['magnifier/magnifier'].exportsFn&&require.s.contexts._.config.shim['magnifier/magnifier'].exportsFn());}.bind(window));define('magnifier/magnify',['jquery','underscore','magnifier/magnifier'],function($,_){'use strict';return function(config,element){var isTouchEnabled='ontouchstart'in document.documentElement,gallerySelector='[data-gallery-role="gallery"]',magnifierSelector='[data-gallery-role="magnifier"]',magnifierZoomSelector='[data-gallery-role="magnifier-zoom"]',zoomInButtonSelector='[data-gallery-role="fotorama__zoom-in"]',zoomOutButtonSelector='[data-gallery-role="fotorama__zoom-out"]',fullscreenImageSelector='[data-gallery-role="stage-shaft"] [data-active="true"] .fotorama__img--full',imageDraggableClass='fotorama__img--draggable',imageZoommable='fotorama__img--zoommable',zoomInLoaded='zoom-in-loaded',zoomOutLoaded='zoom-out-loaded',zoomInDisabled='fotorama__zoom-in--disabled',zoomOutDisabled='fotorama__zoom-out--disabled',keyboardNavigation,videoContainerClass='fotorama-video-container',hideMagnifier,dragFlag,endX,transitionEnabled,transitionActive=false,tapFlag=0,allowZoomOut=false,allowZoomIn=true;(function(){var style=document.documentElement.style,transitionEnabled=style.transition!==undefined||style.WebkitTransition!==undefined||style.MozTransition!==undefined||style.MsTransition!==undefined||style.OTransition!==undefined;})();function getImageSize(img){return{rw:img.naturalWidth,rh:img.naturalHeight};}
function calculateMinSize($image){var minHeight,minWidth,height=$image.height(),width=$image.width(),parentHeight=$image.parent().height(),parentWidth=$image.parent().width();if(width>parentWidth||height>parentHeight){if(width/height<parentWidth/parentHeight){minHeight=parentHeight;minWidth=width*(parentHeight/height);}else{minWidth=parentWidth;minHeight=height*parentWidth/width;}
$image.css({'min-width':minWidth,'min-height':minHeight});}}
function toggleZoomable($image,flag){if(flag){$image.css({'min-width':$image.width(),'min-height':$image.height(),'width':$image.width(),'height':$image.height()}).addClass(imageZoommable);}else{$image.css({width:'',height:'',top:'',left:'',right:'',bottom:''}).removeClass(imageZoommable);calculateMinSize($image);}}
function resetVars($image){allowZoomIn=true;allowZoomOut=dragFlag=transitionActive=false;$image.hasClass(imageDraggableClass)&&$image.removeClass(imageDraggableClass);toggleZoomable($image,false);}
function hideZoomControls(isHide){if(isHide){$(zoomInButtonSelector).addClass(zoomInDisabled);$(zoomOutButtonSelector).addClass(zoomOutDisabled);}else{$(zoomInButtonSelector).removeClass(zoomInDisabled);$(zoomOutButtonSelector).removeClass(zoomOutDisabled);}}
function asyncToggleZoomButtons(path,$image){var img=new Image();img.onload=function(){this.height>$image.parent().height()||this.width>$image.parent().width()?hideZoomControls(false):hideZoomControls(true);};img.src=path;}
function toggleZoomButtons($image,isTouchScreen,isVideoActiveFrame){var path=$image.attr('src');if(path&&!isTouchScreen&&!isVideoActiveFrame){asyncToggleZoomButtons(path,$image);}else{hideZoomControls(true);}}
function resizeHandler(e,$image){var imageSize,parentWidth,parentHeight,isImageSmall,isImageFit;if(!e.data.$image||!e.data.$image.length)
return;imageSize=getImageSize($(fullscreenImageSelector)[0]);parentWidth=e.data.$image.parent().width();parentHeight=e.data.$image.parent().height();isImageSmall=parentWidth>=imageSize.rw&&parentHeight>=imageSize.rh;isImageFit=parentWidth>e.data.$image.width()&&parentHeight>e.data.$image.height();toggleZoomButtons(e.data.$image,isTouchEnabled,checkForVideo(e.data.fotorama.activeFrame.$stageFrame));calculateMinSize(e.data.$image);if(e.data.$image.hasClass(imageZoommable)&&!allowZoomOut||isImageSmall||isImageFit){resetVars(e.data.$image);}
if(!isImageSmall){toggleStandartNavigation();}}
function getTopValue($image,topProp,step,height,containerHeight){var top;if(parseInt($image.css('marginTop'))||parseInt($image.css('marginLeft'))){top=dragFlag?topProp-step/4:0;top=top<containerHeight-height?containerHeight-height:top;top=top>height-containerHeight?height-containerHeight:top;}else{top=topProp+step/2;top=top<containerHeight-height?containerHeight-height:top;top=top>0?0:top;if(!dragFlag&&step<0){top=top<(containerHeight-height)/2?(containerHeight-height)/2:top;}}
return top;}
function getLeftValue(leftProp,step,width,containerWidth){var left;left=leftProp+step/2;left=left<containerWidth-width?containerWidth-width:left;left=left>0?0:left;if(!dragFlag&&step<0){left=left<(containerWidth-width)/2?(containerWidth-width)/2:left;}
return left;}
function checkFullscreenImagePosition($image,dimentions,widthStep,heightStep){var $imageContainer,containerWidth,containerHeight,settings,top,left,right,bottom,ratio;if($(gallerySelector).data('fotorama').fullScreen){transitionActive=true;$imageContainer=$image.parent();containerWidth=$imageContainer.width();containerHeight=$imageContainer.height();top=$image.position().top;left=$image.position().left;ratio=$image.width()/$image.height();dimentions.height=isNaN(dimentions.height)?dimentions.width/ratio:dimentions.height;dimentions.width=isNaN(dimentions.width)?dimentions.height*ratio:dimentions.width;top=dimentions.height>=containerHeight?getTopValue($image,top,heightStep,dimentions.height,containerHeight):0;left=dimentions.width>=containerWidth?getLeftValue(left,widthStep,dimentions.width,containerWidth):0;right=dragFlag&&left<(containerWidth-dimentions.width)/2?0:left;bottom=dragFlag?0:top;settings=$.extend(dimentions,{top:top,left:left,right:right});$image.css(settings);}}
function toggleStandartNavigation(){var $selectable=$('a[href], area[href], input, select, textarea, button, iframe, object, embed, *[tabindex], *[contenteditable]').not('[tabindex=-1], [disabled], :hidden'),fotorama=$(gallerySelector).data('fotorama'),$focus=$(':focus'),index;if(fotorama.fullScreen){$selectable.each(function(number){if($(this).is($focus)){index=number;}});fotorama.setOptions({swipe:!allowZoomOut,keyboard:!allowZoomOut});if(_.isNumber(index)){$selectable.eq(index).focus();}}}
function zoomIn(e,xStep,yStep){var $image,imgOriginalSize,imageWidth,imageHeight,zoomWidthStep,zoomHeightStep,widthResult,heightResult,ratio,dimentions={};if(allowZoomIn&&(!transitionEnabled||!transitionActive)&&(isTouchEnabled||!$(zoomInButtonSelector).hasClass(zoomInDisabled))){$image=$(fullscreenImageSelector);imgOriginalSize=getImageSize($image[0]);imageWidth=$image.width();imageHeight=$image.height();ratio=imageWidth/imageHeight;allowZoomOut=true;toggleStandartNavigation();if(!$image.hasClass(imageZoommable)){toggleZoomable($image,true);}
e.preventDefault();if(imageWidth>=imageHeight){zoomWidthStep=xStep||Math.ceil(imageWidth*parseFloat(config.magnifierOpts.fullscreenzoom)/100);widthResult=imageWidth+zoomWidthStep;if(widthResult>=imgOriginalSize.rw){widthResult=imgOriginalSize.rw;zoomWidthStep=xStep||widthResult-imageWidth;allowZoomIn=false;}
heightResult=widthResult/ratio;zoomHeightStep=yStep||heightResult-imageHeight;}else{zoomHeightStep=yStep||Math.ceil(imageHeight*parseFloat(config.magnifierOpts.fullscreenzoom)/100);heightResult=imageHeight+zoomHeightStep;if(heightResult>=imgOriginalSize.rh){heightResult=imgOriginalSize.rh;zoomHeightStep=yStep||heightResult-imageHeight;allowZoomIn=false;}
widthResult=heightResult*ratio;zoomWidthStep=xStep||widthResult-imageWidth;}
if(imageWidth>=imageHeight&&imageWidth!==imgOriginalSize.rw){dimentions=$.extend(dimentions,{width:widthResult,height:'auto'});checkFullscreenImagePosition($image,dimentions,-zoomWidthStep,-zoomHeightStep);}else if(imageWidth<imageHeight&&imageHeight!==imgOriginalSize.rh){dimentions=$.extend(dimentions,{width:'auto',height:heightResult});checkFullscreenImagePosition($image,dimentions,-zoomWidthStep,-zoomHeightStep);}}
return false;}
function zoomOut(e,xStep,yStep){var $image,widthResult,heightResult,dimentions,parentWidth,parentHeight,imageWidth,imageHeight,zoomWidthStep,zoomHeightStep,ratio,fitIntoParent;if(allowZoomOut&&(!transitionEnabled||!transitionActive)&&(isTouchEnabled||!$(zoomOutButtonSelector).hasClass(zoomOutDisabled))){allowZoomIn=true;$image=$(fullscreenImageSelector);parentWidth=$image.parent().width();parentHeight=$image.parent().height();imageWidth=$image.width();imageHeight=$image.height();ratio=imageWidth/imageHeight;e.preventDefault();if(imageWidth>=imageHeight){zoomWidthStep=xStep||Math.ceil(imageWidth*parseFloat(config.magnifierOpts.fullscreenzoom)/100);widthResult=imageWidth-zoomWidthStep;heightResult=widthResult/ratio;zoomHeightStep=yStep||imageHeight-heightResult;}else{zoomHeightStep=yStep||Math.ceil(imageHeight*parseFloat(config.magnifierOpts.fullscreenzoom)/100);heightResult=imageHeight-zoomHeightStep;widthResult=heightResult*ratio;zoomWidthStep=xStep||imageWidth-widthResult;}
fitIntoParent=function(){if(ratio>parentWidth/parentHeight){widthResult=parentWidth;zoomWidthStep=imageWidth-widthResult;heightResult=widthResult/ratio;zoomHeightStep=imageHeight-heightResult;dimentions={width:widthResult,height:'auto'};}else{heightResult=parentHeight;zoomHeightStep=imageHeight-heightResult;widthResult=heightResult*ratio;zoomWidthStep=imageWidth-widthResult;dimentions={width:'auto',height:heightResult};}
checkFullscreenImagePosition($image,dimentions,zoomWidthStep,zoomHeightStep);};if(imageWidth>=imageHeight){if(widthResult>parentWidth){dimentions={width:widthResult,height:'auto'};checkFullscreenImagePosition($image,dimentions,zoomWidthStep,zoomHeightStep);}else if(heightResult>parentHeight){dimentions={width:widthResult,height:'auto'};checkFullscreenImagePosition($image,dimentions,zoomWidthStep,zoomHeightStep);}else{allowZoomOut=dragFlag=false;toggleStandartNavigation();fitIntoParent();}}else if(heightResult>parentHeight){dimentions={width:'auto',height:heightResult};checkFullscreenImagePosition($image,dimentions,zoomWidthStep,zoomHeightStep);}else if(widthResult>parentWidth){dimentions={width:'auto',height:heightResult};checkFullscreenImagePosition($image,dimentions,zoomWidthStep,zoomHeightStep);}else{allowZoomOut=dragFlag=false;toggleStandartNavigation();fitIntoParent();}}
return false;}
function mousewheel(e,fotorama,element){var $fotoramaStage=fotorama.activeFrame.$stageFrame,fotoramaStage=$fotoramaStage.get(0);function onWheel(e){var delta=e.deltaY||e.wheelDelta,ev=e||window.event;if($(gallerySelector).data('fotorama').fullScreen){if(e.deltaY){if(delta>0){zoomOut(ev);}else{zoomIn(ev);}}else if(delta>0){zoomIn(ev);}else{zoomOut(ev);}
e.preventDefault?e.preventDefault():e.returnValue=false;}}
if(!$fotoramaStage.hasClass('magnify-wheel-loaded')){if(fotoramaStage&&fotoramaStage.addEventListener){if('onwheel'in document){fotoramaStage.addEventListener('wheel',onWheel);}else if('onmousewheel'in document){fotoramaStage.addEventListener('mousewheel',onWheel);}else{fotoramaStage.addEventListener('MozMousePixelScroll',onWheel);}
$fotoramaStage.addClass('magnify-wheel-loaded');}}}
function magnifierFullscreen(fotorama){var isDragActive=false,startX,startY,imagePosX,imagePosY,touch,swipeSlide,$gallery=$(gallerySelector),$image=$(fullscreenImageSelector,$gallery),$imageContainer=$('[data-gallery-role="stage-shaft"] [data-active="true"]'),gallery=$gallery.data('fotorama'),pinchDimention;swipeSlide=_.throttle(function(direction){$(gallerySelector).data('fotorama').show(direction);},500,{trailing:false});function getTop($el){return parseInt($el.get(0).style.top);}
function shiftImage(dx,dy,e){var top=+imagePosY+dy,left=+imagePosX+dx,swipeCondition=$image.width()/10+20;dragFlag=true;if($image.offset().left===$imageContainer.offset().left+$imageContainer.width()-$image.width()&&e.keyCode===39||endX-1<$imageContainer.offset().left+$imageContainer.width()-$image.width()&&dx<0&&_.isNumber(endX)&&(e.type==='mousemove'||e.type==='touchmove'||e.type==='pointermove'||e.type==='MSPointerMove')){endX=null;swipeSlide('>');return;}
if($image.offset().left===$imageContainer.offset().left&&dx!==0&&e.keyCode===37||endX===$imageContainer.offset().left&&dx>0&&(e.type==='mousemove'||e.type==='touchmove'||e.type==='pointermove'||e.type==='MSPointerMove')){endX=null;swipeSlide('<');return;}
if($image.height()>$imageContainer.height()){if($imageContainer.height()>$image.height()+top){$image.css('top',$imageContainer.height()-$image.height());}else{top=$image.height()-getTop($image)-$imageContainer.height();dy=dy<top?dy:top;$image.css('top',getTop($image)+dy);}}
if($image.width()>$imageContainer.width()){if($imageContainer.offset().left+$imageContainer.width()>left+$image.width()){left=$imageContainer.offset().left+$imageContainer.width()-$image.width();}else{left=$imageContainer.offset().left<left?$imageContainer.offset().left:left;}
$image.offset({'left':left});$image.css('right','');}else if(Math.abs(dy)<1&&allowZoomOut&&!(e.type==='mousemove'||e.type==='touchmove'||e.type==='pointermove'||e.type==='MSPointerMove')){dx<0?$(gallerySelector).data('fotorama').show('>'):$(gallerySelector).data('fotorama').show('<');}
if($image.width()<=$imageContainer.width()&&allowZoomOut&&(e.type==='mousemove'||e.type==='touchmove'||e.type==='pointermove'||e.type==='MSPointerMove')&&Math.abs(dx)>Math.abs(dy)&&Math.abs(dx)>swipeCondition){dx<0?swipeSlide('>'):swipeSlide('<');}}
function dblClickHandler(e){var imgOriginalSize=getImageSize($image[0]),proportions;if(imgOriginalSize.rh<$image.parent().height()&&imgOriginalSize.rw<$image.parent().width()){return;}
proportions=imgOriginalSize.rw/imgOriginalSize.rh;if(allowZoomIn){zoomIn(e,imgOriginalSize.rw-$image.width(),imgOriginalSize.rh-$image.height());}else if(proportions>$imageContainer.width()/$imageContainer.height()){zoomOut(e,imgOriginalSize.rw-$imageContainer.width(),imgOriginalSize.rw/proportions);}else{zoomOut(e,imgOriginalSize.rw*proportions,imgOriginalSize.rh-$imageContainer.height());}}
function detectDoubleTap(e){var now=new Date().getTime(),timesince=now-tapFlag;if(timesince<400&&timesince>0){transitionActive=false;tapFlag=0;dblClickHandler(e);}else{tapFlag=new Date().getTime();}}
if(isTouchEnabled){$image.off('tap');$image.on('tap',function(e){if(e.originalEvent.originalEvent.touches.length===0){detectDoubleTap(e);}});}else{$image.unbind('dblclick');$image.dblclick(dblClickHandler);}
if(gallery.fullScreen){toggleZoomButtons($image,isTouchEnabled,checkForVideo(fotorama.activeFrame.$stageFrame));}
function getDimention(event){return Math.sqrt((event.touches[0].clientX-event.touches[1].clientX)*(event.touches[0].clientX-event.touches[1].clientX)+
(event.touches[0].clientY-event.touches[1].clientY)*(event.touches[0].clientY-event.touches[1].clientY));}
$image.off(isTouchEnabled?'touchstart':'pointerdown mousedown MSPointerDown');$image.on(isTouchEnabled?'touchstart':'pointerdown mousedown MSPointerDown',function(e){if(e&&e.originalEvent.touches&&e.originalEvent.touches.length>=2){e.preventDefault();pinchDimention=getDimention(e.originalEvent);isDragActive=false;if($image.hasClass(imageDraggableClass)){$image.removeClass(imageDraggableClass);}}else if(gallery.fullScreen&&(!transitionEnabled||!transitionActive)){imagePosY=getTop($image);imagePosX=$image.offset().left;if(isTouchEnabled){touch=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];e.clientX=touch.pageX;e.clientY=touch.pageY;}
startX=e.clientX||e.originalEvent.clientX;startY=e.clientY||e.originalEvent.clientY;isDragActive=true;}
if($image.offset()&&$image.width()>$imageContainer.width()){endX=$image.offset().left;}});$image.off(isTouchEnabled?'touchmove':'mousemove pointermove MSPointerMove');$image.on(isTouchEnabled?'touchmove':'mousemove pointermove MSPointerMove',function(e){if(e&&e.originalEvent.touches&&e.originalEvent.touches.length>=2){e.preventDefault();var currentDimention=getDimention(e.originalEvent);if($image.hasClass(imageDraggableClass)){$image.removeClass(imageDraggableClass);}
if(currentDimention<pinchDimention){zoomOut(e);pinchDimention=currentDimention;}else if(currentDimention>pinchDimention){zoomIn(e);pinchDimention=currentDimention;}}else{var clientX,clientY;if(gallery.fullScreen&&isDragActive&&(!transitionEnabled||!transitionActive)){if(allowZoomOut&&!$image.hasClass(imageDraggableClass)){$image.addClass(imageDraggableClass);}
clientX=e.clientX||e.originalEvent.clientX;clientY=e.clientY||e.originalEvent.clientY;e.preventDefault();if(isTouchEnabled){touch=e.originalEvent.touches[0]||e.originalEvent.changedTouches[0];clientX=touch.pageX;clientY=touch.pageY;}
if(allowZoomOut){imagePosY=getTop($(fullscreenImageSelector,$gallery));shiftImage(clientX-startX,clientY-startY,e);}}}});$image.off('transitionend webkitTransitionEnd mozTransitionEnd msTransitionEnd ');$image.on('transitionend webkitTransitionEnd mozTransitionEnd msTransitionEnd',function(){transitionActive=false;});if(keyboardNavigation){$(document).unbind('keydown',keyboardNavigation);}
keyboardNavigation=function(e){var step=40,$focus=$(':focus'),isFullScreen=$(gallerySelector).data('fotorama').fullScreen,initVars=function(){imagePosX=$(fullscreenImageSelector,$gallery).offset().left;imagePosY=getTop($(fullscreenImageSelector,$gallery));};if(($focus.attr('data-gallery-role')||!$focus.length)&&allowZoomOut){if(isFullScreen){imagePosX=$(fullscreenImageSelector,$(gallerySelector)).offset().left;imagePosY=getTop($(fullscreenImageSelector,$(gallerySelector)));}
if(e.keyCode===39){if(isFullScreen){initVars();shiftImage(-step,0,e);}}
if(e.keyCode===38){if(isFullScreen){initVars();shiftImage(0,step,e);}}
if(e.keyCode===37){if(isFullScreen){initVars();shiftImage(step,0,e);}}
if(e.keyCode===40){if(isFullScreen){e.preventDefault();initVars();shiftImage(0,-step,e);}}}
if(e.keyCode===27&&isFullScreen&&allowZoomOut){$(gallerySelector).data('fotorama').cancelFullScreen();}};$(document).keydown(keyboardNavigation);$(document).on(isTouchEnabled?'touchend':'mouseup pointerup MSPointerUp',function(e){if(gallery.fullScreen){if($image.offset()&&$image.width()>$imageContainer.width()){endX=$image.offset().left;}
isDragActive=false;$image.removeClass(imageDraggableClass);}});$(window).off('resize',resizeHandler);$(window).on('resize',{$image:$image,fotorama:fotorama},resizeHandler);}
hideMagnifier=function(){$(magnifierSelector).empty().hide();$(magnifierZoomSelector).remove();};function checkForVideo($stageFrame){return $stageFrame.hasClass(videoContainerClass);}
function behaveOnDrag(e,initPos){var pos=[e.pageX,e.pageY],isArrow=$(e.target).data('gallery-role')==='arrow',isClick=initPos[0]===pos[0]&&initPos[1]===pos[1],isImg=$(e.target).parent().data('active');if(isArrow||isImg&&!isClick){hideMagnifier();}}
if(config.magnifierOpts.enabled){$(element).on('pointerdown mousedown MSPointerDown',function(e){var pos=[e.pageX,e.pageY];$(element).on('mousemove pointermove MSPointerMove',function(ev){navigator.msPointerEnabled?hideMagnifier():behaveOnDrag(ev,pos);});$(document).on('mouseup pointerup MSPointerUp',function(){$(element).off('mousemove pointermove MSPointerMove');});});}
$.extend(config.magnifierOpts,{zoomable:false,thumb:'.fotorama__img',largeWrapper:'[data-gallery-role="magnifier"]',height:config.magnifierOpts.height||function(){return $('[data-active="true"]').height();},width:config.magnifierOpts.width||function(){var productMedia=$(gallerySelector).parent().parent();return productMedia.parent().width()-productMedia.width()-20;},left:config.magnifierOpts.left||function(){return $(gallerySelector).offset().left+$(gallerySelector).width()+20;},top:config.magnifierOpts.top||function(){return $(gallerySelector).offset().top;}});$(element).on('fotorama:load fotorama:showend fotorama:fullscreenexit fotorama:ready',function(e,fotorama){var $activeStageFrame=$(gallerySelector).data('fotorama').activeFrame.$stageFrame;if(!$activeStageFrame.find(magnifierZoomSelector).length){hideMagnifier();if(config.magnifierOpts){config.magnifierOpts.large=$(gallerySelector).data('fotorama').activeFrame.img;config.magnifierOpts.full=fotorama.data[fotorama.activeIndex].original;!checkForVideo($activeStageFrame)&&$($activeStageFrame).magnify(config.magnifierOpts);}}});$(element).on('gallery:loaded',function(e){var $prevImage;$(element).find(gallerySelector).on('fotorama:ready',function(e,fotorama){var $zoomIn=$(zoomInButtonSelector),$zoomOut=$(zoomOutButtonSelector);if(!$zoomIn.hasClass(zoomInLoaded)){$zoomIn.on('click touchstart',zoomIn);$zoomIn.on('mousedown',function(e){e.stopPropagation();});$zoomIn.keyup(function(e){if(e.keyCode===13){zoomIn(e);}});$(window).keyup(function(e){if(e.keyCode===107||fotorama.fullscreen){zoomIn(e);}});$zoomIn.addClass(zoomInLoaded);}
if(!$zoomOut.hasClass(zoomOutLoaded)){$zoomOut.on('click touchstart',zoomOut);$zoomOut.on('mousedown',function(e){e.stopPropagation();});$zoomOut.keyup(function(e){if(e.keyCode===13){zoomOut(e);}});$(window).keyup(function(e){if(e.keyCode===109||fotorama.fullscreen){zoomOut(e);}});$zoomOut.addClass(zoomOutLoaded);}}).on('fotorama:fullscreenenter fotorama:showend',function(e,fotorama){hideMagnifier();if(!$(fullscreenImageSelector).is($prevImage)){resetVars($(fullscreenImageSelector));}
magnifierFullscreen(fotorama);mousewheel(e,fotorama,element);if($prevImage){calculateMinSize($prevImage);if(!$(fullscreenImageSelector).is($prevImage)){resetVars($prevImage);}}
toggleStandartNavigation();}).on('fotorama:load',function(e,fotorama){if($(gallerySelector).data('fotorama').fullScreen){toggleZoomButtons($(fullscreenImageSelector),isTouchEnabled,checkForVideo(fotorama.activeFrame.$stageFrame));}
magnifierFullscreen(fotorama);}).on('fotorama:show',function(e,fotorama){$prevImage=_.clone($(fullscreenImageSelector));hideMagnifier();}).on('fotorama:fullscreenexit',function(e,fotorama){resetVars($(fullscreenImageSelector));hideMagnifier();hideZoomControls(true);});});return config;};});define('Magento_Catalog/product/view/validation',['jquery','jquery-ui-modules/widget','mage/validation/validation'],function($){'use strict';$.widget('mage.validation',$.mage.validation,{options:{radioCheckboxClosest:'ul, ol',errorPlacement:function(error,element){var messageBox,dataValidate;if($(element).hasClass('datetime-picker')){element=$(element).parent();if(element.parent().find('[generated=true].mage-error').length){return;}}
if(element.attr('data-errors-message-box')){messageBox=$(element.attr('data-errors-message-box'));messageBox.html(error);return;}
dataValidate=element.attr('data-validate');if(dataValidate&&dataValidate.indexOf('validate-one-checkbox-required-by-name')>0){error.appendTo('#links-advice-container');}else if(element.is(':radio, :checkbox')){element.closest(this.radioCheckboxClosest).after(error);}else{element.after(error);}},highlight:function(element,errorClass){var dataValidate=$(element).attr('data-validate');if(dataValidate&&dataValidate.indexOf('validate-required-datetime')>0){$(element).parent().find('.datetime-picker').each(function(){$(this).removeClass(errorClass);if($(this).val().length===0){$(this).addClass(errorClass);}});}else if($(element).is(':radio, :checkbox')){$(element).closest(this.radioCheckboxClosest).addClass(errorClass);}else{$(element).addClass(errorClass);}},unhighlight:function(element,errorClass){var dataValidate=$(element).attr('data-validate');if(dataValidate&&dataValidate.indexOf('validate-required-datetime')>0){$(element).parent().find('.datetime-picker').removeClass(errorClass);}else if($(element).is(':radio, :checkbox')){$(element).closest(this.radioCheckboxClosest).removeClass(errorClass);}else{$(element).removeClass(errorClass);}}}});return $.mage.validation;});define('text!Magento_Checkout/template/cart/qty-updater.html',function(){return '<!--\n/**\n * Copyright \xA9 Vaimo Group. All rights reserved.\n * See LICENSE_VAIMO.txt for license details.\n */\n-->\n\n<div class="qty-action-wrap">\n    <!-- ko if: qty() == 1 && hasRemove -->\n        <button type="button" class="qty-action remove" data-bind="click: remove">\n            <span class="icon__trash"/>\n        </button>\n    <!-- /ko -->\n\n    <!-- ko if: qty() != 1 || !hasRemove -->\n    <button type="button" class="qty-action reduce" data-bind="click: reduce, enable: qty() > 1">\n        <span class="icon__minus"/>\n    </button>\n    <!-- /ko -->\n\n    <button type="button" class="qty-action increase" data-bind="click: increase">\n        <span class="icon__plus-math"/>\n    </button>\n</div>\n\n<!-- ko if: showUpdate() && hasUpdate -->\n    <button type="button" class="qty-action update update-cart-item" data-bind="click: update">\n        <span data-bind="text: updateLabel"/>\n    </button>\n<!-- /ko -->\n';});define('Magento_Checkout/js/qty-updater',['jquery','underscore','ko','uiRegistry','mage/template','text!Magento_Checkout/template/cart/qty-updater.html','mage/translate'],function($,_,ko,uiRegistry,templateEngine,qtyUpdaterTpl){'use strict';var scopeIncrement=0,defaults={hasRemove:true,hasUpdate:true,onShowUpdate:$.noop,onUpdate:$.noop,onRemove:$.noop};return function(config,element){var settings=_.extend({},defaults,config),$qtyInput=$(element),qtyParent=$qtyInput.parent().get(0),initialValue=$qtyInput.val(),qtyObservable=ko.observable(initialValue),showUpdate=ko.observable(false),scope='qty-changer__'+scopeIncrement++,viewModel,qtyInterval;viewModel={qty:qtyObservable,showUpdate:showUpdate,hasRemove:settings.hasRemove,hasUpdate:settings.hasUpdate,updateLabel:$.mage.__('Update'),remove:settings.onRemove,reduce:function(){$qtyInput.val(parseInt($qtyInput.val(),10)-1||1).trigger('change');},increase:function(){$qtyInput.val(parseInt($qtyInput.val(),10)+1).trigger('change');},update:settings.onUpdate};qtyInterval=setInterval(function(){if(typeof ko.uid!=='undefined'){clearInterval(qtyInterval);$qtyInput.parent().append(templateEngine(qtyUpdaterTpl));uiRegistry.set(scope,viewModel);qtyParent.setAttribute('data-bind','scope: "'+scope+'"');ko.applyBindings(viewModel,qtyParent);$qtyInput.on('change',shouldShowUpdate);$qtyInput.on('keyup',shouldShowUpdate);}},200);function shouldShowUpdate(){qtyObservable($qtyInput.val());showUpdate(initialValue!==$qtyInput.val()&&parseInt($qtyInput.val(),10)>0);}
if(settings.hasUpdate){showUpdate.subscribe(settings.onShowUpdate);}};});define('Magento_Catalog/js/qty-updater',['jquery','Magento_Checkout/js/qty-updater','jquery-ui-modules/widget'],function($,qtyUpdater){"use strict";return function(widget){var prototype=widget.prototype;$.widget(prototype.namespace+'.'+prototype.widgetName,widget,{_create:function(){var qty=this.element.find('#qty').get(0);this._super();if(qty){qtyUpdater({hasRemove:false,hasUpdate:false},qty);}}});return $[prototype.namespace][prototype.widgetName];};});define('Magento_Catalog/js/product/list/related-slick',['jquery','slick','uiComponent','matchMedia'],function($,slick,Component,mediaCheck){'use strict';var relatedSlick=$('.block.related ol'),relatedProductQty=relatedSlick.find('li').length;return Component.extend({initialize:function(){var self=this;this._super();mediaCheck({media:'(min-width: 1024px)',entry:function(){self._initRelatedSlick(6,6);}});mediaCheck({media:'(min-width: 768px) and (max-width: 1023px)',entry:function(){self._initRelatedSlick(5,5);}});mediaCheck({media:'(min-width: 651px) and (max-width: 767px)',entry:function(){self._initRelatedSlick(4,4);}});mediaCheck({media:'(min-width: 320px) and (max-width: 650px)',entry:function(){self._initRelatedSlick(3,3);}});},_initRelatedSlick:function(productCount,slides){if(typeof relatedSlick!=='undefined'){if(relatedProductQty>productCount){this._destroySlick();relatedSlick.not('.slick-initialized').slick({autoplay:false,dots:true,arrows:true,slidesToShow:slides,slidesToScroll:1});}}},_destroySlick:function(){if(typeof relatedSlick!=='undefined'&&relatedSlick.hasClass('slick-slider')){relatedSlick.slick('unslick');}}});});define('Magento_Catalog/js/product/view/provider',['underscore','uiElement','Magento_Catalog/js/product/storage/storage-service'],function(_,Element,storage){'use strict';return Element.extend({defaults:{identifiersConfig:{namespace:'recently_viewed_product'},productStorageConfig:{namespace:'product_data_storage',updateRequestConfig:{method:'GET',dataType:'json'},className:'DataStorage'}},initialize:function(){this._super().initIdsStorage().initDataStorage();return this;},initIdsStorage:function(){storage.onStorageInit(this.identifiersConfig.namespace,this.idsStorageHandler.bind(this));return this;},initDataStorage:function(){storage.onStorageInit(this.productStorageConfig.namespace,this.dataStorageHandler.bind(this));return this;},dataStorageHandler:function(dataStorage){this.productStorage=dataStorage;this.productStorage.add(this.data.items);},idsStorageHandler:function(idsStorage){this.idsStorage=idsStorage;this.idsStorage.add(this.getIdentifiers());},getIdentifiers:function(){var result={},productCurrentScope=this.data.productCurrentScope,scopeId=productCurrentScope==='store'?window.checkout.storeId:productCurrentScope==='group'?window.checkout.storeGroupId:window.checkout.websiteId;_.each(this.data.items,function(item,key){result[productCurrentScope+'-'+scopeId+'-'+key]={'added_at':new Date().getTime()/1000,'product_id':key,'scope_id':scopeId};},this);return result;}});});define('mage/gallery/fotorama-options',['jquery','matchMedia'],function($,mediaCheck){'use strict';var mixin={wrapFullscreenApi:function(){var fotorama=this.settings.api.fotorama,original=fotorama.requestFullScreen;fotorama.requestFullScreen=function(){var $stage=$((fotorama.activeFrame||{}).$stageFrame||{}),hasClassToRemove=$stage.hasClass('fotorama-video-container');if(fotorama.fromFullscreenTrigger&&hasClassToRemove){$stage.removeClass('fotorama-video-container');}
original();if(fotorama.fromFullscreenTrigger&&hasClassToRemove){$stage.addClass('fotorama-video-container');}};},initialize:function(config,element){config.options.thumbfit='contain';config.options.thumbmargin=16;config.options.maxheight=512;this._super(config,element);this.settings.$element.on('click','.fotorama__fullscreen-trigger',function(e){e.preventDefault();this.settings.api.fotorama.fromFullscreenTrigger=true;this.openFullScreen();this.settings.api.fotorama.fromFullscreenTrigger=false;}.bind(this));this.wrapFullscreenApi();mediaCheck({media:'(min-width: 768px)',entry:function(){if($('.fotorama__nav-wrap').css('display')!=='none'){$('.product.media .product-item-save-badge').css('left','112px');}},exit:function(){$('.product.media .product-item-save-badge').css('left','0');}});}};return function(target){return target.extend(mixin);};});define('Magento_Catalog/js/product/view/product-ids',['ko'],function(ko){'use strict';return ko.observableArray([]);});define('Magento_Catalog/js/product/view/product-ids-resolver',['underscore','Magento_Catalog/js/product/view/product-ids'],function(_,productIds){'use strict';return function($form){var idSet=productIds(),product=_.findWhere($form.serializeArray(),{name:'product'});if(!_.isUndefined(product)){idSet.push(product.value);}
return _.uniq(idSet);};});define('Magento_Catalog/js/catalog-add-to-cart',['jquery','mage/translate','underscore','Magento_Catalog/js/product/view/product-ids-resolver','jquery-ui-modules/widget'],function($,$t,_,idsResolver){'use strict';$.widget('mage.catalogAddToCart',{options:{processStart:null,processStop:null,bindSubmit:true,minicartSelector:'[data-block="minicart"]',messagesSelector:'[data-placeholder="messages"]',productStatusSelector:'.stock.available',addToCartButtonSelector:'.action.tocart',addToCartButtonDisabledClass:'disabled',addToCartButtonTextWhileAdding:'',addToCartButtonTextAdded:'',addToCartButtonTextDefault:''},_create:function(){if(this.options.bindSubmit){this._bindSubmit();}},_bindSubmit:function(){var self=this;if(this.element.data('catalog-addtocart-initialized')){return;}
this.element.data('catalog-addtocart-initialized',1);this.element.on('submit',function(e){e.preventDefault();self.submitForm($(this));});},_redirect:function(url){var urlParts,locationParts,forceReload;urlParts=url.split('#');locationParts=window.location.href.split('#');forceReload=urlParts[0]===locationParts[0];window.location.assign(url);if(forceReload){window.location.reload();}},isLoaderEnabled:function(){return this.options.processStart&&this.options.processStop;},submitForm:function(form){this.ajaxSubmit(form);},ajaxSubmit:function(form){var self=this,productIds=idsResolver(form),formData;$(self.options.minicartSelector).trigger('contentLoading');self.disableAddToCartButton(form);formData=new FormData(form[0]);$.ajax({url:form.attr('action'),data:formData,type:'post',dataType:'json',cache:false,contentType:false,processData:false,beforeSend:function(){if(self.isLoaderEnabled()){$('body').trigger(self.options.processStart);}},success:function(res){var eventData,parameters;$(document).trigger('ajax:addToCart',{'sku':form.data().productSku,'productIds':productIds,'form':form,'response':res});if(self.isLoaderEnabled()){$('body').trigger(self.options.processStop);}
if(res.backUrl){eventData={'form':form,'redirectParameters':[]};$('body').trigger('catalogCategoryAddToCartRedirect',eventData);if(eventData.redirectParameters.length>0&&window.location.href.split(/[?#]/)[0]===res.backUrl){parameters=res.backUrl.split('#');parameters.push(eventData.redirectParameters.join('&'));res.backUrl=parameters.join('#');}
self._redirect(res.backUrl);return;}
if(res.messages){$(self.options.messagesSelector).html(res.messages);}
if(res.minicart){$(self.options.minicartSelector).replaceWith(res.minicart);$(self.options.minicartSelector).trigger('contentUpdated');}
if(res.product&&res.product.statusText){$(self.options.productStatusSelector).removeClass('available').addClass('unavailable').find('span').html(res.product.statusText);}
self.enableAddToCartButton(form);},error:function(res){$(document).trigger('ajax:addToCart:error',{'sku':form.data().productSku,'productIds':productIds,'form':form,'response':res});},complete:function(res){if(res.state()==='rejected'){location.reload();}}});},disableAddToCartButton:function(form){var addToCartButtonTextWhileAdding=this.options.addToCartButtonTextWhileAdding||$t('Adding...'),addToCartButton=$(form).find(this.options.addToCartButtonSelector);addToCartButton.addClass(this.options.addToCartButtonDisabledClass);addToCartButton.find('span').text(addToCartButtonTextWhileAdding);addToCartButton.attr('title',addToCartButtonTextWhileAdding);},enableAddToCartButton:function(form){var addToCartButtonTextAdded=this.options.addToCartButtonTextAdded||$t('Added'),self=this,addToCartButton=$(form).find(this.options.addToCartButtonSelector);addToCartButton.find('span').text(addToCartButtonTextAdded);addToCartButton.attr('title',addToCartButtonTextAdded);setTimeout(function(){var addToCartButtonTextDefault=self.options.addToCartButtonTextDefault||$t('Add to Cart');addToCartButton.removeClass(self.options.addToCartButtonDisabledClass);addToCartButton.find('span').text(addToCartButtonTextDefault);addToCartButton.attr('title',addToCartButtonTextDefault);},1000);}});return $.mage.catalogAddToCart;});define('Magento_Catalog/js/validate-product',['jquery','mage/mage','Magento_Catalog/product/view/validation','catalogAddToCart'],function($){'use strict';$.widget('mage.productValidate',{options:{bindSubmit:false,radioCheckboxClosest:'.nested',addToCartButtonSelector:'.action.tocart'},_create:function(){var bindSubmit=this.options.bindSubmit;this.element.validation({radioCheckboxClosest:this.options.radioCheckboxClosest,submitHandler:function(form){var jqForm=$(form).catalogAddToCart({bindSubmit:bindSubmit,processStart:'pdpAddToCartStart',processStop:'pdpAddToCartStop'});jqForm.catalogAddToCart('submitForm',jqForm);return false;}});$(this.options.addToCartButtonSelector).attr('disabled',false);}});return $.mage.productValidate;});define('text!mage/gallery/gallery.html',function(){return '<!--\n/**\n * Copyright \xA9 Vaimo Group. All rights reserved.\n * See LICENSE_VAIMO.txt for license details.\n */\n-->\n<div class="fotorama-item" data-gallery-role="gallery">\n    <div data-gallery-role="fotorama__focusable-start" tabindex="-1"></div>\n    <div class="fotorama__wrap fotorama__wrap--css3 fotorama__wrap--slide fotorama__wrap--toggle-arrows">\n        <div class="fotorama__nav-wrap" data-gallery-role="nav-wrap">\n            <div class="fotorama__nav fotorama__nav--thumbs">\n                <div class="fotorama__fullscreen-icon"\n                     data-gallery-role="fotorama__fullscreen-icon"\n                     tabindex="0"\n                     aria-label="Exit fullscreen"\n                     role="button"></div>\n                <div class="fotorama__thumb__arr fotorama__thumb__arr--left"\n                     role="button"\n                     aria-label="Previous"\n                     data-gallery-role="arrow"\n                     tabindex = "-1">\n                    <div class="fotorama__thumb--icon"></div>\n                </div>\n                <div class="fotorama__nav__shaft">\n                    <div class="fotorama__thumb-border"></div>\n                </div>\n                <div class="fotorama__thumb__arr fotorama__thumb__arr--right"\n                     role="button"\n                     aria-label="Next"\n                     data-gallery-role="arrow"\n                     tabindex = "-1">\n                    <div class="fotorama__thumb--icon"></div>\n                </div>\n            </div>\n        </div>\n        <div class="fotorama__stage" data-fotorama-stage="fotorama__stage">\n            <div class="fotorama__arr fotorama__arr--prev"\n                 tabindex="0"\n                 role="button"\n                 aria-label="Previous"\n                 data-gallery-role="arrow">\n                <div class="fotorama__arr__arr"></div>\n            </div>\n            <div class="fotorama__stage__shaft" tabindex="0" data-gallery-role="stage-shaft">\n            </div>\n            <div class="fotorama__arr fotorama__arr--next fotorama__arr--disabled" tabindex="-1" role="button"\n                 aria-label="Next" data-gallery-role="arrow">\n                <div class="fotorama__arr__arr"></div>\n            </div>\n            <div class="fotorama__video-close"></div>\n            <a href="#" class="fotorama__fullscreen-trigger">\n                <span class="icon__full-screen"></span>\n            </a>\n        </div>\n    </div>\n    <div data-gallery-role="fotorama__focusable-end" tabindex="-1"></div>\n</div>\n<div class="magnifier-preview" data-gallery-role="magnifier" id="preview"></div>\n';});define('fotorama/fotorama',(require.s.contexts._.config.shim['fotorama/fotorama']&&require.s.contexts._.config.shim['fotorama/fotorama'].deps||[]),function(){/*!
* Fotorama 4.6.4 | http://fotorama.io/license/
*/fotoramaVersion='4.6.4';(function(window,document,location,$,undefined){"use strict";var _fotoramaClass='fotorama',_fullscreenClass='fotorama__fullscreen',wrapClass=_fotoramaClass+'__wrap',wrapCss2Class=wrapClass+'--css2',wrapCss3Class=wrapClass+'--css3',wrapVideoClass=wrapClass+'--video',wrapFadeClass=wrapClass+'--fade',wrapSlideClass=wrapClass+'--slide',wrapNoControlsClass=wrapClass+'--no-controls',wrapNoShadowsClass=wrapClass+'--no-shadows',wrapPanYClass=wrapClass+'--pan-y',wrapRtlClass=wrapClass+'--rtl',wrapOnlyActiveClass=wrapClass+'--only-active',wrapNoCaptionsClass=wrapClass+'--no-captions',wrapToggleArrowsClass=wrapClass+'--toggle-arrows',stageClass=_fotoramaClass+'__stage',stageFrameClass=stageClass+'__frame',stageFrameVideoClass=stageFrameClass+'--video',stageShaftClass=stageClass+'__shaft',grabClass=_fotoramaClass+'__grab',pointerClass=_fotoramaClass+'__pointer',arrClass=_fotoramaClass+'__arr',arrDisabledClass=arrClass+'--disabled',arrPrevClass=arrClass+'--prev',arrNextClass=arrClass+'--next',navClass=_fotoramaClass+'__nav',navWrapClass=navClass+'-wrap',navShaftClass=navClass+'__shaft',navShaftVerticalClass=navWrapClass+'--vertical',navShaftListClass=navWrapClass+'--list',navShafthorizontalClass=navWrapClass+'--horizontal',navDotsClass=navClass+'--dots',navThumbsClass=navClass+'--thumbs',navFrameClass=navClass+'__frame',fadeClass=_fotoramaClass+'__fade',fadeFrontClass=fadeClass+'-front',fadeRearClass=fadeClass+'-rear',shadowClass=_fotoramaClass+'__shadow',shadowsClass=shadowClass+'s',shadowsLeftClass=shadowsClass+'--left',shadowsRightClass=shadowsClass+'--right',shadowsTopClass=shadowsClass+'--top',shadowsBottomClass=shadowsClass+'--bottom',activeClass=_fotoramaClass+'__active',selectClass=_fotoramaClass+'__select',hiddenClass=_fotoramaClass+'--hidden',fullscreenClass=_fotoramaClass+'--fullscreen',fullscreenIconClass=_fotoramaClass+'__fullscreen-icon',errorClass=_fotoramaClass+'__error',loadingClass=_fotoramaClass+'__loading',loadedClass=_fotoramaClass+'__loaded',loadedFullClass=loadedClass+'--full',loadedImgClass=loadedClass+'--img',grabbingClass=_fotoramaClass+'__grabbing',imgClass=_fotoramaClass+'__img',imgFullClass=imgClass+'--full',thumbClass=_fotoramaClass+'__thumb',thumbArrLeft=thumbClass+'__arr--left',thumbArrRight=thumbClass+'__arr--right',thumbBorderClass=thumbClass+'-border',htmlClass=_fotoramaClass+'__html',videoContainerClass=_fotoramaClass+'-video-container',videoClass=_fotoramaClass+'__video',videoPlayClass=videoClass+'-play',videoCloseClass=videoClass+'-close',horizontalImageClass=_fotoramaClass+'_horizontal_ratio',verticalImageClass=_fotoramaClass+'_vertical_ratio',fotoramaSpinnerClass=_fotoramaClass+'__spinner',spinnerShowClass=fotoramaSpinnerClass+'--show';var JQUERY_VERSION=$&&$.fn.jquery.split('.');if(!JQUERY_VERSION||JQUERY_VERSION[0]<1||(JQUERY_VERSION[0]==1&&JQUERY_VERSION[1]<8)){throw 'Fotorama requires jQuery 1.8 or later and will not run without it.';}
var _={};var Modernizr=(function(window,document,undefined){var version='2.8.3',Modernizr={},docElement=document.documentElement,mod='modernizr',modElem=document.createElement(mod),mStyle=modElem.style,inputElem,toString={}.toString,prefixes=' -webkit- -moz- -o- -ms- '.split(' '),omPrefixes='Webkit Moz O ms',cssomPrefixes=omPrefixes.split(' '),domPrefixes=omPrefixes.toLowerCase().split(' '),tests={},inputs={},attrs={},classes=[],slice=classes.slice,featureName,injectElementWithStyles=function(rule,callback,nodes,testnames){var style,ret,node,docOverflow,div=document.createElement('div'),body=document.body,fakeBody=body||document.createElement('body');if(parseInt(nodes,10)){while(nodes--){node=document.createElement('div');node.id=testnames?testnames[nodes]:mod+(nodes+1);div.appendChild(node);}}
style=['&#173;','<style id="s',mod,'">',rule,'</style>'].join('');div.id=mod;(body?div:fakeBody).innerHTML+=style;fakeBody.appendChild(div);if(!body){fakeBody.style.background='';fakeBody.style.overflow='hidden';docOverflow=docElement.style.overflow;docElement.style.overflow='hidden';docElement.appendChild(fakeBody);}
ret=callback(div,rule);if(!body){fakeBody.parentNode.removeChild(fakeBody);docElement.style.overflow=docOverflow;}else{div.parentNode.removeChild(div);}
return!!ret;},_hasOwnProperty=({}).hasOwnProperty,hasOwnProp;if(!is(_hasOwnProperty,'undefined')&&!is(_hasOwnProperty.call,'undefined')){hasOwnProp=function(object,property){return _hasOwnProperty.call(object,property);};}
else{hasOwnProp=function(object,property){return((property in object)&&is(object.constructor.prototype[property],'undefined'));};}
if(!Function.prototype.bind){Function.prototype.bind=function bind(that){var target=this;if(typeof target!="function"){throw new TypeError();}
var args=slice.call(arguments,1),bound=function(){if(this instanceof bound){var F=function(){};F.prototype=target.prototype;var self=new F();var result=target.apply(self,args.concat(slice.call(arguments)));if(Object(result)===result){return result;}
return self;}else{return target.apply(that,args.concat(slice.call(arguments)));}};return bound;};}
function setCss(str){mStyle.cssText=str;}
function setCssAll(str1,str2){return setCss(prefixes.join(str1+';')+(str2||''));}
function is(obj,type){return typeof obj===type;}
function contains(str,substr){return!!~(''+str).indexOf(substr);}
function testProps(props,prefixed){for(var i in props){var prop=props[i];if(!contains(prop,"-")&&mStyle[prop]!==undefined){return prefixed=='pfx'?prop:true;}}
return false;}
function testDOMProps(props,obj,elem){for(var i in props){var item=obj[props[i]];if(item!==undefined){if(elem===false)return props[i];if(is(item,'function')){return item.bind(elem||obj);}
return item;}}
return false;}
function testPropsAll(prop,prefixed,elem){var ucProp=prop.charAt(0).toUpperCase()+prop.slice(1),props=(prop+' '+cssomPrefixes.join(ucProp+' ')+ucProp).split(' ');if(is(prefixed,"string")||is(prefixed,"undefined")){return testProps(props,prefixed);}else{props=(prop+' '+(domPrefixes).join(ucProp+' ')+ucProp).split(' ');return testDOMProps(props,prefixed,elem);}}
tests['touch']=function(){var bool;if(('ontouchstart'in window)||window.DocumentTouch&&document instanceof DocumentTouch){bool=true;}else{injectElementWithStyles(['@media (',prefixes.join('touch-enabled),('),mod,')','{#modernizr{top:9px;position:absolute}}'].join(''),function(node){bool=node.offsetTop===9;});}
return bool;};tests['csstransforms3d']=function(){var ret=!!testPropsAll('perspective');if(ret&&'webkitPerspective'in docElement.style){injectElementWithStyles('@media (transform-3d),(-webkit-transform-3d){#modernizr{left:9px;position:absolute;height:3px;}}',function(node,rule){ret=node.offsetLeft===9&&node.offsetHeight===3;});}
return ret;};tests['csstransitions']=function(){return testPropsAll('transition');};for(var feature in tests){if(hasOwnProp(tests,feature)){featureName=feature.toLowerCase();Modernizr[featureName]=tests[feature]();classes.push((Modernizr[featureName]?'':'no-')+featureName);}}
Modernizr.addTest=function(feature,test){if(typeof feature=='object'){for(var key in feature){if(hasOwnProp(feature,key)){Modernizr.addTest(key,feature[key]);}}}else{feature=feature.toLowerCase();if(Modernizr[feature]!==undefined){return Modernizr;}
test=typeof test=='function'?test():test;if(typeof enableClasses!=="undefined"&&enableClasses){docElement.className+=' '+(test?'':'no-')+feature;}
Modernizr[feature]=test;}
return Modernizr;};setCss('');modElem=inputElem=null;Modernizr._version=version;Modernizr._prefixes=prefixes;Modernizr._domPrefixes=domPrefixes;Modernizr._cssomPrefixes=cssomPrefixes;Modernizr.testProp=function(prop){return testProps([prop]);};Modernizr.testAllProps=testPropsAll;Modernizr.testStyles=injectElementWithStyles;Modernizr.prefixed=function(prop,obj,elem){if(!obj){return testPropsAll(prop,'pfx');}else{return testPropsAll(prop,obj,elem);}};return Modernizr;})(window,document);var fullScreenApi={ok:false,is:function(){return false;},request:function(){},cancel:function(){},event:'',prefix:''},browserPrefixes='webkit moz o ms khtml'.split(' ');if(typeof document.cancelFullScreen!='undefined'){fullScreenApi.ok=true;}else{for(var i=0,il=browserPrefixes.length;i<il;i++){fullScreenApi.prefix=browserPrefixes[i];if(typeof document[fullScreenApi.prefix+'CancelFullScreen']!='undefined'){fullScreenApi.ok=true;break;}}}
if(fullScreenApi.ok){fullScreenApi.event=fullScreenApi.prefix+'fullscreenchange';fullScreenApi.is=function(){switch(this.prefix){case '':return document.fullScreen;case 'webkit':return document.webkitIsFullScreen;default:return document[this.prefix+'FullScreen'];}};fullScreenApi.request=function(el){return(this.prefix==='')?el.requestFullScreen():el[this.prefix+'RequestFullScreen']();};fullScreenApi.cancel=function(el){if(!this.is()){return false;}
return(this.prefix==='')?document.cancelFullScreen():document[this.prefix+'CancelFullScreen']();};}
function bez(coOrdArray){var encodedFuncName="bez_"+$.makeArray(arguments).join("_").replace(".","p");if(typeof $['easing'][encodedFuncName]!=="function"){var polyBez=function(p1,p2){var A=[null,null],B=[null,null],C=[null,null],bezCoOrd=function(t,ax){C[ax]=3*p1[ax];B[ax]=3*(p2[ax]-p1[ax])-C[ax];A[ax]=1-C[ax]-B[ax];return t*(C[ax]+t*(B[ax]+t*A[ax]));},xDeriv=function(t){return C[0]+t*(2*B[0]+3*A[0]*t);},xForT=function(t){var x=t,i=0,z;while(++i<14){z=bezCoOrd(x,0)-t;if(Math.abs(z)<1e-3)break;x-=z/xDeriv(x);}
return x;};return function(t){return bezCoOrd(xForT(t),1);}};$['easing'][encodedFuncName]=function(x,t,b,c,d){return c*polyBez([coOrdArray[0],coOrdArray[1]],[coOrdArray[2],coOrdArray[3]])(t/d)+b;}}
return encodedFuncName;}
var $WINDOW=$(window),$DOCUMENT=$(document),$HTML,$BODY,QUIRKS_FORCE=location.hash.replace('#','')==='quirks',TRANSFORMS3D=Modernizr.csstransforms3d,CSS3=TRANSFORMS3D&&!QUIRKS_FORCE,COMPAT=TRANSFORMS3D||document.compatMode==='CSS1Compat',FULLSCREEN=fullScreenApi.ok,MOBILE=navigator.userAgent.match(/Android|webOS|iPhone|iPad|iPod|BlackBerry|Windows Phone/i),SLOW=!CSS3||MOBILE,MS_POINTER=navigator.msPointerEnabled,WHEEL="onwheel"in document.createElement("div")?"wheel":document.onmousewheel!==undefined?"mousewheel":"DOMMouseScroll",TOUCH_TIMEOUT=250,TRANSITION_DURATION=300,SCROLL_LOCK_TIMEOUT=1400,AUTOPLAY_INTERVAL=5000,MARGIN=2,THUMB_SIZE=64,WIDTH=500,HEIGHT=333,STAGE_FRAME_KEY='$stageFrame',NAV_DOT_FRAME_KEY='$navDotFrame',NAV_THUMB_FRAME_KEY='$navThumbFrame',AUTO='auto',BEZIER=bez([.1,0,.25,1]),MAX_WIDTH=1200,thumbsPerSlide=1,OPTIONS={width:null,minwidth:null,maxwidth:'100%',height:null,minheight:null,maxheight:null,ratio:null,margin:MARGIN,nav:'dots',navposition:'bottom',navwidth:null,thumbwidth:THUMB_SIZE,thumbheight:THUMB_SIZE,thumbmargin:MARGIN,thumbborderwidth:MARGIN,allowfullscreen:false,transition:'slide',clicktransition:null,transitionduration:TRANSITION_DURATION,captions:true,startindex:0,loop:false,autoplay:false,stopautoplayontouch:true,keyboard:false,arrows:true,click:true,swipe:false,trackpad:false,shuffle:false,direction:'ltr',shadows:true,showcaption:true,navdir:'horizontal',navarrows:true,navtype:'thumbs'},KEYBOARD_OPTIONS={left:true,right:true,down:true,up:true,space:false,home:false,end:false};function noop(){}
function minMaxLimit(value,min,max){return Math.max(isNaN(min)?-Infinity:min,Math.min(isNaN(max)?Infinity:max,value));}
function readTransform(css,dir){return css.match(/ma/)&&css.match(/-?\d+(?!d)/g)[css.match(/3d/)?(dir==='vertical'?13:12):(dir==='vertical'?5:4)]}
function readPosition($el,dir){if(CSS3){return+readTransform($el.css('transform'),dir);}else{return+$el.css(dir==='vertical'?'top':'left').replace('px','');}}
function getTranslate(pos,direction){var obj={};if(CSS3){switch(direction){case 'vertical':obj.transform='translate3d(0, '+(pos)+'px,0)';break;case 'list':break;default:obj.transform='translate3d('+(pos)+'px,0,0)';break;}}else{direction==='vertical'?obj.top=pos:obj.left=pos;}
return obj;}
function getDuration(time){return{'transition-duration':time+'ms'};}
function unlessNaN(value,alternative){return isNaN(value)?alternative:value;}
function numberFromMeasure(value,measure){return unlessNaN(+String(value).replace(measure||'px',''));}
function numberFromPercent(value){return /%$/.test(value)?numberFromMeasure(value,'%'):undefined;}
function numberFromWhatever(value,whole){return unlessNaN(numberFromPercent(value)/100*whole,numberFromMeasure(value));}
function measureIsValid(value){return(!isNaN(numberFromMeasure(value))||!isNaN(numberFromMeasure(value,'%')))&&value;}
function getPosByIndex(index,side,margin,baseIndex){return(index-(baseIndex||0))*(side+(margin||0));}
function getIndexByPos(pos,side,margin,baseIndex){return-Math.round(pos/(side+(margin||0))-(baseIndex||0));}
function bindTransitionEnd($el){var elData=$el.data();if(elData.tEnd)return;var el=$el[0],transitionEndEvent={WebkitTransition:'webkitTransitionEnd',MozTransition:'transitionend',OTransition:'oTransitionEnd otransitionend',msTransition:'MSTransitionEnd',transition:'transitionend'};addEvent(el,transitionEndEvent[Modernizr.prefixed('transition')],function(e){elData.tProp&&e.propertyName.match(elData.tProp)&&elData.onEndFn();});elData.tEnd=true;}
function afterTransition($el,property,fn,time){var ok,elData=$el.data();if(elData){elData.onEndFn=function(){if(ok)return;ok=true;clearTimeout(elData.tT);fn();};elData.tProp=property;clearTimeout(elData.tT);elData.tT=setTimeout(function(){elData.onEndFn();},time*1.5);bindTransitionEnd($el);}}
function stop($el,pos){var dir=$el.navdir||'horizontal';if($el.length){var elData=$el.data();if(CSS3){$el.css(getDuration(0));elData.onEndFn=noop;clearTimeout(elData.tT);}else{$el.stop();}
var lockedPos=getNumber(pos,function(){return readPosition($el,dir);});$el.css(getTranslate(lockedPos,dir));return lockedPos;}}
function getNumber(){var number;for(var _i=0,_l=arguments.length;_i<_l;_i++){number=_i?arguments[_i]():arguments[_i];if(typeof number==='number'){break;}}
return number;}
function edgeResistance(pos,edge){return Math.round(pos+((edge-pos)/1.5));}
function getProtocol(){getProtocol.p=getProtocol.p||(location.protocol==='https:'?'https://':'http://');return getProtocol.p;}
function parseHref(href){var a=document.createElement('a');a.href=href;return a;}
function findVideoId(href,forceVideo){if(typeof href!=='string')return href;href=parseHref(href);var id,type;if(href.host.match(/youtube\.com/)&&href.search){id=href.search.split('v=')[1];if(id){var ampersandPosition=id.indexOf('&');if(ampersandPosition!==-1){id=id.substring(0,ampersandPosition);}
type='youtube';}}else if(href.host.match(/youtube\.com|youtu\.be|youtube-nocookie.com/)){id=href.pathname.replace(/^\/(embed\/|v\/)?/,'').replace(/\/.*/,'');type='youtube';}else if(href.host.match(/vimeo\.com/)){type='vimeo';id=href.pathname.replace(/^\/(video\/)?/,'').replace(/\/.*/,'');}
if((!id||!type)&&forceVideo){id=href.href;type='custom';}
return id?{id:id,type:type,s:href.search.replace(/^\?/,''),p:getProtocol()}:false;}
function getVideoThumbs(dataFrame,data,fotorama){var img,thumb,video=dataFrame.video;if(video.type==='youtube'){thumb=getProtocol()+'img.youtube.com/vi/'+video.id+'/default.jpg';img=thumb.replace(/\/default.jpg$/,'/hqdefault.jpg');dataFrame.thumbsReady=true;}else if(video.type==='vimeo'){$.ajax({url:getProtocol()+'vimeo.com/api/v2/video/'+video.id+'.json',dataType:'jsonp',success:function(json){dataFrame.thumbsReady=true;updateData(data,{img:json[0].thumbnail_large,thumb:json[0].thumbnail_small},dataFrame.i,fotorama);}});}else{dataFrame.thumbsReady=true;}
return{img:img,thumb:thumb}}
function updateData(data,_dataFrame,i,fotorama){for(var _i=0,_l=data.length;_i<_l;_i++){var dataFrame=data[_i];if(dataFrame.i===i&&dataFrame.thumbsReady){var clear={videoReady:true};clear[STAGE_FRAME_KEY]=clear[NAV_THUMB_FRAME_KEY]=clear[NAV_DOT_FRAME_KEY]=false;fotorama.splice(_i,1,$.extend({},dataFrame,clear,_dataFrame));break;}}}
function getDataFromHtml($el){var data=[];function getDataFromImg($img,imgData,checkVideo){var $child=$img.children('img').eq(0),_imgHref=$img.attr('href'),_imgSrc=$img.attr('src'),_thumbSrc=$child.attr('src'),_video=imgData.video,video=checkVideo?findVideoId(_imgHref,_video===true):false;if(video){_imgHref=false;}else{video=_video;}
getDimensions($img,$child,$.extend(imgData,{video:video,img:imgData.img||_imgHref||_imgSrc||_thumbSrc,thumb:imgData.thumb||_thumbSrc||_imgSrc||_imgHref}));}
function getDimensions($img,$child,imgData){var separateThumbFLAG=imgData.thumb&&imgData.img!==imgData.thumb,width=numberFromMeasure(imgData.width||$img.attr('width')),height=numberFromMeasure(imgData.height||$img.attr('height'));$.extend(imgData,{width:width,height:height,thumbratio:getRatio(imgData.thumbratio||(numberFromMeasure(imgData.thumbwidth||($child&&$child.attr('width'))||separateThumbFLAG||width)/numberFromMeasure(imgData.thumbheight||($child&&$child.attr('height'))||separateThumbFLAG||height)))});}
$el.children().each(function(){var $this=$(this),dataFrame=optionsToLowerCase($.extend($this.data(),{id:$this.attr('id')}));if($this.is('a, img')){getDataFromImg($this,dataFrame,true);}else if(!$this.is(':empty')){getDimensions($this,null,$.extend(dataFrame,{html:this,_html:$this.html()}));}else return;data.push(dataFrame);});return data;}
function isHidden(el){return el.offsetWidth===0&&el.offsetHeight===0;}
function isDetached(el){return!$.contains(document.documentElement,el);}
function waitFor(test,fn,timeout,i){if(!waitFor.i){waitFor.i=1;waitFor.ii=[true];}
i=i||waitFor.i;if(typeof waitFor.ii[i]==='undefined'){waitFor.ii[i]=true;}
if(test()){fn();}else{waitFor.ii[i]&&setTimeout(function(){waitFor.ii[i]&&waitFor(test,fn,timeout,i);},timeout||100);}
return waitFor.i++;}
waitFor.stop=function(i){waitFor.ii[i]=false;};function fit($el,measuresToFit){var elData=$el.data(),measures=elData.measures;if(measures&&(!elData.l||elData.l.W!==measures.width||elData.l.H!==measures.height||elData.l.r!==measures.ratio||elData.l.w!==measuresToFit.w||elData.l.h!==measuresToFit.h)){var height=minMaxLimit(measuresToFit.h,0,measures.height),width=height*measures.ratio;UTIL.setRatio($el,width,height);elData.l={W:measures.width,H:measures.height,r:measures.ratio,w:measuresToFit.w,h:measuresToFit.h};}
return true;}
function setStyle($el,style){var el=$el[0];if(el.styleSheet){el.styleSheet.cssText=style;}else{$el.html(style);}}
function findShadowEdge(pos,min,max,dir){return min===max?false:dir==='vertical'?(pos<=min?'top':pos>=max?'bottom':'top bottom'):(pos<=min?'left':pos>=max?'right':'left right');}
function smartClick($el,fn,_options){_options=_options||{};$el.each(function(){var $this=$(this),thisData=$this.data(),startEvent;if(thisData.clickOn)return;thisData.clickOn=true;$.extend(touch($this,{onStart:function(e){startEvent=e;(_options.onStart||noop).call(this,e);},onMove:_options.onMove||noop,onTouchEnd:_options.onTouchEnd||noop,onEnd:function(result){if(result.moved)return;fn.call(this,startEvent);}}),{noMove:true});});}
function div(classes,child){return '<div class="'+classes+'">'+(child||'')+'</div>';}
function cls(className){return "."+className;}
function createVideoFrame(videoItem){var frame='<iframe src="'+videoItem.p+videoItem.type+'.com/embed/'+videoItem.id+'" frameborder="0" allowfullscreen></iframe>';return frame;}
function shuffle(array){var l=array.length;while(l){var i=Math.floor(Math.random()*l--);var t=array[l];array[l]=array[i];array[i]=t;}
return array;}
function clone(array){return Object.prototype.toString.call(array)=='[object Array]'&&$.map(array,function(frame){return $.extend({},frame);});}
function lockScroll($el,left,top){$el.scrollLeft(left||0).scrollTop(top||0);}
function optionsToLowerCase(options){if(options){var opts={};$.each(options,function(key,value){opts[key.toLowerCase()]=value;});return opts;}}
function getRatio(_ratio){if(!_ratio)return;var ratio=+_ratio;if(!isNaN(ratio)){return ratio;}else{ratio=_ratio.split('/');return+ratio[0]/+ratio[1]||undefined;}}
function addEvent(el,e,fn,bool){if(!e)return;el.addEventListener?el.addEventListener(e,fn,!!bool):el.attachEvent('on'+e,fn);}
function validateRestrictions(position,restriction){if(position>restriction.max){position=restriction.max;}else{if(position<restriction.min){position=restriction.min;}}
return position;}
function validateSlidePos(opt,navShaftTouchTail,guessIndex,offsetNav,$guessNavFrame,$navWrap,dir){var position,size,wrapSize;if(dir==='horizontal'){size=opt.thumbwidth;wrapSize=$navWrap.width();}else{size=opt.thumbheight;wrapSize=$navWrap.height();}
if((size+opt.margin)*(guessIndex+1)>=(wrapSize-offsetNav)){if(dir==='horizontal'){position=-$guessNavFrame.position().left;}else{position=-$guessNavFrame.position().top;}}else{if((size+opt.margin)*(guessIndex)<=Math.abs(offsetNav)){if(dir==='horizontal'){position=-$guessNavFrame.position().left+wrapSize-(size+opt.margin);}else{position=-$guessNavFrame.position().top+wrapSize-(size+opt.margin);}}else{position=offsetNav;}}
position=validateRestrictions(position,navShaftTouchTail);return position||0;}
function elIsDisabled(el){return!!el.getAttribute('disabled');}
function disableAttr(FLAG,disable){if(disable){return{disabled:FLAG};}else{return{tabindex:FLAG*-1+'',disabled:FLAG};}}
function addEnterUp(el,fn){addEvent(el,'keyup',function(e){elIsDisabled(el)||e.keyCode==13&&fn.call(el,e);});}
function addFocus(el,fn){addEvent(el,'focus',el.onfocusin=function(e){fn.call(el,e);},true);}
function stopEvent(e,stopPropagation){e.preventDefault?e.preventDefault():(e.returnValue=false);stopPropagation&&e.stopPropagation&&e.stopPropagation();}
function stubEvent($el,fromType){setupEventRedirect($el,fromType,'mouseup')}
function setupEventRedirect($el,fromType,toType){$el.on(fromType,function(e){$DOCUMENT.trigger(toType,e);});$el.on(fromType,function(e){stopEvent(e,true);return false;});}
function getDirectionSign(forward){return forward?'>':'<';}
var UTIL=(function(){function setRatioClass($el,wh,ht){var rateImg=wh/ht;if(rateImg<=1){$el.parent().removeClass(horizontalImageClass);$el.parent().addClass(verticalImageClass);}else{$el.parent().removeClass(verticalImageClass);$el.parent().addClass(horizontalImageClass);}}
function setThumbAttr($frame,value,searchAttr){var attr=searchAttr;if(!$frame.attr(attr)&&$frame.attr(attr)!==undefined){$frame.attr(attr,value);}
if($frame.find("["+attr+"]").length){$frame.find("["+attr+"]").each(function(){$(this).attr(attr,value);});}}
function isExpectedCaption(frameItem,isExpected,undefined){var expected=false,frameExpected;frameItem.showCaption===undefined||frameItem.showCaption===true?frameExpected=true:frameExpected=false;if(!isExpected){return false;}
if(frameItem.caption&&frameExpected){expected=true;}
return expected;}
return{setRatio:setRatioClass,setThumbAttr:setThumbAttr,isExpectedCaption:isExpectedCaption};}(UTIL||{},jQuery));function slide($el,options){var elData=$el.data(),elPos=Math.round(options.pos),onEndFn=function(){if(elData&&elData.sliding){elData.sliding=false;}
(options.onEnd||noop)();};if(typeof options.overPos!=='undefined'&&options.overPos!==options.pos){elPos=options.overPos;}
var translate=$.extend(getTranslate(elPos,options.direction),options.width&&{width:options.width},options.height&&{height:options.height});if(elData&&elData.sliding){elData.sliding=true;}
if(CSS3){$el.css($.extend(getDuration(options.time),translate));if(options.time>10){afterTransition($el,'transform',onEndFn,options.time);}else{onEndFn();}}else{$el.stop().animate(translate,options.time,BEZIER,onEndFn);}}
function fade($el1,$el2,$frames,options,fadeStack,chain){var chainedFLAG=typeof chain!=='undefined';if(!chainedFLAG){fadeStack.push(arguments);Array.prototype.push.call(arguments,fadeStack.length);if(fadeStack.length>1)return;}
$el1=$el1||$($el1);$el2=$el2||$($el2);var _$el1=$el1[0],_$el2=$el2[0],crossfadeFLAG=options.method==='crossfade',onEndFn=function(){if(!onEndFn.done){onEndFn.done=true;var args=(chainedFLAG||fadeStack.shift())&&fadeStack.shift();args&&fade.apply(this,args);(options.onEnd||noop)(!!args);}},time=options.time/(chain||1);$frames.removeClass(fadeRearClass+' '+fadeFrontClass);$el1.stop().addClass(fadeRearClass);$el2.stop().addClass(fadeFrontClass);crossfadeFLAG&&_$el2&&$el1.fadeTo(0,0);$el1.fadeTo(crossfadeFLAG?time:0,1,crossfadeFLAG&&onEndFn);$el2.fadeTo(time,0,onEndFn);(_$el1&&crossfadeFLAG)||_$el2||onEndFn();}
var lastEvent,moveEventType,preventEvent,preventEventTimeout,dragDomEl;function extendEvent(e){var touch=(e.touches||[])[0]||e;e._x=touch.pageX||touch.originalEvent.pageX;e._y=touch.clientY||touch.originalEvent.clientY;e._now=$.now();}
function touch($el,options){var el=$el[0],tail={},touchEnabledFLAG,startEvent,$target,controlTouch,touchFLAG,targetIsSelectFLAG,targetIsLinkFlag,isDisabledSwipe,tolerance,moved;function onStart(e){$target=$(e.target);tail.checked=targetIsSelectFLAG=targetIsLinkFlag=isDisabledSwipe=moved=false;if(touchEnabledFLAG||tail.flow||(e.touches&&e.touches.length>1)||e.which>1||(lastEvent&&lastEvent.type!==e.type&&preventEvent)||(targetIsSelectFLAG=options.select&&$target.is(options.select,el)))return targetIsSelectFLAG;touchFLAG=e.type==='touchstart';targetIsLinkFlag=$target.is('a, a *',el);isDisabledSwipe=$target.hasClass('disableSwipe');controlTouch=tail.control;tolerance=(tail.noMove||tail.noSwipe||controlTouch)?16:!tail.snap?4:0;extendEvent(e);startEvent=lastEvent=e;moveEventType=e.type.replace(/down|start/,'move').replace(/Down/,'Move');(options.onStart||noop).call(el,e,{control:controlTouch,$target:$target});touchEnabledFLAG=tail.flow=true;if(!isDisabledSwipe&&(!touchFLAG||tail.go))stopEvent(e);}
function onMove(e){if((e.touches&&e.touches.length>1)||(MS_POINTER&&!e.isPrimary)||moveEventType!==e.type||!touchEnabledFLAG){touchEnabledFLAG&&onEnd();(options.onTouchEnd||noop)();return;}
isDisabledSwipe=$(e.target).hasClass('disableSwipe');if(isDisabledSwipe){return;}
extendEvent(e);var xDiff=Math.abs(e._x-startEvent._x),yDiff=Math.abs(e._y-startEvent._y),xyDiff=xDiff-yDiff,xWin=(tail.go||tail.x||xyDiff>=0)&&!tail.noSwipe,yWin=xyDiff<0;if(touchFLAG&&!tail.checked){if(touchEnabledFLAG=xWin){stopEvent(e);}}else{stopEvent(e);if(movedEnough(xDiff,yDiff)){(options.onMove||noop).call(el,e,{touch:touchFLAG});}}
if(!moved&&movedEnough(xDiff,yDiff)&&Math.sqrt(Math.pow(xDiff,2)+Math.pow(yDiff,2))>tolerance){moved=true;}
tail.checked=tail.checked||xWin||yWin;}
function movedEnough(xDiff,yDiff){return xDiff>yDiff&&xDiff>1.5;}
function onEnd(e){(options.onTouchEnd||noop)();var _touchEnabledFLAG=touchEnabledFLAG;tail.control=touchEnabledFLAG=false;if(_touchEnabledFLAG){tail.flow=false;}
if(!_touchEnabledFLAG||(targetIsLinkFlag&&!tail.checked))return;e&&stopEvent(e);preventEvent=true;clearTimeout(preventEventTimeout);preventEventTimeout=setTimeout(function(){preventEvent=false;},1000);(options.onEnd||noop).call(el,{moved:moved,$target:$target,control:controlTouch,touch:touchFLAG,startEvent:startEvent,aborted:!e||e.type==='MSPointerCancel'});}
function onOtherStart(){if(tail.flow)return;tail.flow=true;}
function onOtherEnd(){if(!tail.flow)return;tail.flow=false;}
if(MS_POINTER){addEvent(el,'MSPointerDown',onStart);addEvent(document,'MSPointerMove',onMove);addEvent(document,'MSPointerCancel',onEnd);addEvent(document,'MSPointerUp',onEnd);}else{addEvent(el,'touchstart',onStart);addEvent(el,'touchmove',onMove);addEvent(el,'touchend',onEnd);addEvent(document,'touchstart',onOtherStart);addEvent(document,'touchend',onOtherEnd);addEvent(document,'touchcancel',onOtherEnd);$WINDOW.on('scroll',onOtherEnd);$el.on('mousedown pointerdown',onStart);$DOCUMENT.on('mousemove pointermove',onMove).on('mouseup pointerup',onEnd);}
if(Modernizr.touch){dragDomEl='a';}else{dragDomEl='div';}
$el.on('click',dragDomEl,function(e){tail.checked&&stopEvent(e);});return tail;}
function moveOnTouch($el,options){var el=$el[0],elData=$el.data(),tail={},startCoo,coo,startElPos,moveElPos,edge,moveTrack,startTime,endTime,min,max,snap,dir,slowFLAG,controlFLAG,moved,tracked;function startTracking(e,noStop){tracked=true;startCoo=coo=(dir==='vertical')?e._y:e._x;startTime=e._now;moveTrack=[[startTime,startCoo]];startElPos=moveElPos=tail.noMove||noStop?0:stop($el,(options.getPos||noop)());(options.onStart||noop).call(el,e);}
function onStart(e,result){min=tail.min;max=tail.max;snap=tail.snap,dir=tail.direction||'horizontal',$el.navdir=dir;slowFLAG=e.altKey;tracked=moved=false;controlFLAG=result.control;if(!controlFLAG&&!elData.sliding){startTracking(e);}}
function onMove(e,result){if(!tail.noSwipe){if(!tracked){startTracking(e);}
coo=(dir==='vertical')?e._y:e._x;moveTrack.push([e._now,coo]);moveElPos=startElPos-(startCoo-coo);edge=findShadowEdge(moveElPos,min,max,dir);if(moveElPos<=min){moveElPos=edgeResistance(moveElPos,min);}else if(moveElPos>=max){moveElPos=edgeResistance(moveElPos,max);}
if(!tail.noMove){$el.css(getTranslate(moveElPos,dir));if(!moved){moved=true;result.touch||MS_POINTER||$el.addClass(grabbingClass);}
(options.onMove||noop).call(el,e,{pos:moveElPos,edge:edge});}}}
function onEnd(result){if(tail.noSwipe&&result.moved)return;if(!tracked){startTracking(result.startEvent,true);}
result.touch||MS_POINTER||$el.removeClass(grabbingClass);endTime=$.now();var _backTimeIdeal=endTime-TOUCH_TIMEOUT,_backTime,_timeDiff,_timeDiffLast,backTime=null,backCoo,virtualPos,limitPos,newPos,overPos,time=TRANSITION_DURATION,speed,friction=options.friction;for(var _i=moveTrack.length-1;_i>=0;_i--){_backTime=moveTrack[_i][0];_timeDiff=Math.abs(_backTime-_backTimeIdeal);if(backTime===null||_timeDiff<_timeDiffLast){backTime=_backTime;backCoo=moveTrack[_i][1];}else if(backTime===_backTimeIdeal||_timeDiff>_timeDiffLast){break;}
_timeDiffLast=_timeDiff;}
newPos=minMaxLimit(moveElPos,min,max);var cooDiff=backCoo-coo,forwardFLAG=cooDiff>=0,timeDiff=endTime-backTime,longTouchFLAG=timeDiff>TOUCH_TIMEOUT,swipeFLAG=!longTouchFLAG&&moveElPos!==startElPos&&newPos===moveElPos;if(snap){newPos=minMaxLimit(Math[swipeFLAG?(forwardFLAG?'floor':'ceil'):'round'](moveElPos/snap)*snap,min,max);min=max=newPos;}
if(swipeFLAG&&(snap||newPos===moveElPos)){speed=-(cooDiff/timeDiff);time*=minMaxLimit(Math.abs(speed),options.timeLow,options.timeHigh);virtualPos=Math.round(moveElPos+speed*time/friction);if(!snap){newPos=virtualPos;}
if(!forwardFLAG&&virtualPos>max||forwardFLAG&&virtualPos<min){limitPos=forwardFLAG?min:max;overPos=virtualPos-limitPos;if(!snap){newPos=limitPos;}
overPos=minMaxLimit(newPos+overPos*.03,limitPos-50,limitPos+50);time=Math.abs((moveElPos-overPos)/(speed/friction));}}
time*=slowFLAG?10:1;(options.onEnd||noop).call(el,$.extend(result,{moved:result.moved||longTouchFLAG&&snap,pos:moveElPos,newPos:newPos,overPos:overPos,time:time,dir:dir}));}
tail=$.extend(touch(options.$wrap,$.extend({},options,{onStart:onStart,onMove:onMove,onEnd:onEnd})),tail);return tail;}
function wheel($el,options){var el=$el[0],lockFLAG,lastDirection,lastNow,tail={prevent:{}};addEvent(el,WHEEL,function(e){var yDelta=e.wheelDeltaY||-1*e.deltaY||0,xDelta=e.wheelDeltaX||-1*e.deltaX||0,xWin=Math.abs(xDelta)&&!Math.abs(yDelta),direction=getDirectionSign(xDelta<0),sameDirection=lastDirection===direction,now=$.now(),tooFast=now-lastNow<TOUCH_TIMEOUT;lastDirection=direction;lastNow=now;if(!xWin||!tail.ok||tail.prevent[direction]&&!lockFLAG){return;}else{stopEvent(e,true);if(lockFLAG&&sameDirection&&tooFast){return;}}
if(options.shift){lockFLAG=true;clearTimeout(tail.t);tail.t=setTimeout(function(){lockFLAG=false;},SCROLL_LOCK_TIMEOUT);}
(options.onEnd||noop)(e,options.shift?direction:xDelta);});return tail;}
jQuery.Fotorama=function($fotorama,opts){$HTML=$('html');$BODY=$('body');var that=this,stamp=$.now(),stampClass=_fotoramaClass+stamp,fotorama=$fotorama[0],data,dataFrameCount=1,fotoramaData=$fotorama.data(),size,$style=$('<style></style>'),$anchor=$(div(hiddenClass)),$wrap=$fotorama.find(cls(wrapClass)),$stage=$wrap.find(cls(stageClass)),stage=$stage[0],$stageShaft=$fotorama.find(cls(stageShaftClass)),$stageFrame=$(),$arrPrev=$fotorama.find(cls(arrPrevClass)),$arrNext=$fotorama.find(cls(arrNextClass)),$arrs=$fotorama.find(cls(arrClass)),$navWrap=$fotorama.find(cls(navWrapClass)),$nav=$navWrap.find(cls(navClass)),$navShaft=$nav.find(cls(navShaftClass)),$navFrame,$navDotFrame=$(),$navThumbFrame=$(),stageShaftData=$stageShaft.data(),navShaftData=$navShaft.data(),$thumbBorder=$fotorama.find(cls(thumbBorderClass)),$thumbArrLeft=$fotorama.find(cls(thumbArrLeft)),$thumbArrRight=$fotorama.find(cls(thumbArrRight)),$fullscreenIcon=$fotorama.find(cls(fullscreenIconClass)),fullscreenIcon=$fullscreenIcon[0],$videoPlay=$(div(videoPlayClass)),$videoClose=$fotorama.find(cls(videoCloseClass)),videoClose=$videoClose[0],$spinner=$fotorama.find(cls(fotoramaSpinnerClass)),$videoPlaying,activeIndex=false,activeFrame,activeIndexes,repositionIndex,dirtyIndex,lastActiveIndex,prevIndex,nextIndex,nextAutoplayIndex,startIndex,o_loop,o_nav,o_navThumbs,o_navTop,o_allowFullScreen,o_nativeFullScreen,o_fade,o_thumbSide,o_thumbSide2,o_transitionDuration,o_transition,o_shadows,o_rtl,o_keyboard,lastOptions={},measures={},measuresSetFLAG,stageShaftTouchTail={},stageWheelTail={},navShaftTouchTail={},navWheelTail={},scrollTop,scrollLeft,showedFLAG,pausedAutoplayFLAG,stoppedAutoplayFLAG,toDeactivate={},toDetach={},measuresStash,touchedFLAG,hoverFLAG,navFrameKey,stageLeft=0,fadeStack=[];$wrap[STAGE_FRAME_KEY]=$('<div class="'+stageFrameClass+'"></div>');$wrap[NAV_THUMB_FRAME_KEY]=$($.Fotorama.jst.thumb());$wrap[NAV_DOT_FRAME_KEY]=$($.Fotorama.jst.dots());toDeactivate[STAGE_FRAME_KEY]=[];toDeactivate[NAV_THUMB_FRAME_KEY]=[];toDeactivate[NAV_DOT_FRAME_KEY]=[];toDetach[STAGE_FRAME_KEY]={};$wrap.addClass(CSS3?wrapCss3Class:wrapCss2Class);fotoramaData.fotorama=this;function checkForVideo(){$.each(data,function(i,dataFrame){if(!dataFrame.i){dataFrame.i=dataFrameCount++;var video=findVideoId(dataFrame.video,true);if(video){var thumbs={};dataFrame.video=video;if(!dataFrame.img&&!dataFrame.thumb){thumbs=getVideoThumbs(dataFrame,data,that);}else{dataFrame.thumbsReady=true;}
updateData(data,{img:thumbs.img,thumb:thumbs.thumb},dataFrame.i,that);}}});}
function allowKey(key){return o_keyboard[key];}
function setStagePosition(){if($stage!==undefined){if(opts.navdir=='vertical'){var padding=opts.thumbwidth+opts.thumbmargin;$stage.css('left',padding);$arrNext.css('right',padding);$fullscreenIcon.css('right',padding);$wrap.css('width',$wrap.css('width')+padding);$stageShaft.css('max-width',$wrap.width()-padding);}else{$stage.css('left','');$arrNext.css('right','');$fullscreenIcon.css('right','');$wrap.css('width',$wrap.css('width')+padding);$stageShaft.css('max-width','');}}}
function bindGlobalEvents(FLAG){var keydownCommon='keydown.'+_fotoramaClass,localStamp=_fotoramaClass+stamp,keydownLocal='keydown.'+localStamp,keyupLocal='keyup.'+localStamp,resizeLocal='resize.'+localStamp+' '+'orientationchange.'+localStamp,showParams;if(FLAG){$DOCUMENT.on(keydownLocal,function(e){var catched,index;if($videoPlaying&&e.keyCode===27){catched=true;unloadVideo($videoPlaying,true,true);}else if(that.fullScreen||(opts.keyboard&&!that.index)){if(e.keyCode===27){catched=true;that.cancelFullScreen();}else if((e.shiftKey&&e.keyCode===32&&allowKey('space'))||(!e.altKey&&!e.metaKey&&e.keyCode===37&&allowKey('left'))||(e.keyCode===38&&allowKey('up')&&$(':focus').attr('data-gallery-role'))){that.longPress.progress();index='<';}else if((e.keyCode===32&&allowKey('space'))||(!e.altKey&&!e.metaKey&&e.keyCode===39&&allowKey('right'))||(e.keyCode===40&&allowKey('down')&&$(':focus').attr('data-gallery-role'))){that.longPress.progress();index='>';}else if(e.keyCode===36&&allowKey('home')){that.longPress.progress();index='<<';}else if(e.keyCode===35&&allowKey('end')){that.longPress.progress();index='>>';}}
(catched||index)&&stopEvent(e);showParams={index:index,slow:e.altKey,user:true};index&&(that.longPress.inProgress?that.showWhileLongPress(showParams):that.show(showParams));});if(FLAG){$DOCUMENT.on(keyupLocal,function(e){if(that.longPress.inProgress){that.showEndLongPress({user:true});}
that.longPress.reset();});}
if(!that.index){$DOCUMENT.off(keydownCommon).on(keydownCommon,'textarea, input, select',function(e){!$BODY.hasClass(_fullscreenClass)&&e.stopPropagation();});}
$WINDOW.on(resizeLocal,that.resize);}else{$DOCUMENT.off(keydownLocal);$WINDOW.off(resizeLocal);}}
function appendElements(FLAG){if(FLAG===appendElements.f)return;if(FLAG){$fotorama.addClass(_fotoramaClass+' '+stampClass).before($anchor).before($style);addInstance(that);}else{$anchor.detach();$style.detach();$fotorama.html(fotoramaData.urtext).removeClass(stampClass);hideInstance(that);}
bindGlobalEvents(FLAG);appendElements.f=FLAG;}
function setData(){data=that.data=data||clone(opts.data)||getDataFromHtml($fotorama);size=that.size=data.length;ready.ok&&opts.shuffle&&shuffle(data);checkForVideo();activeIndex=limitIndex(activeIndex);size&&appendElements(true);}
function stageNoMove(){var _noMove=size<2||$videoPlaying;stageShaftTouchTail.noMove=_noMove||o_fade;stageShaftTouchTail.noSwipe=_noMove||!opts.swipe;!o_transition&&$stageShaft.toggleClass(grabClass,!opts.click&&!stageShaftTouchTail.noMove&&!stageShaftTouchTail.noSwipe);MS_POINTER&&$wrap.toggleClass(wrapPanYClass,!stageShaftTouchTail.noSwipe);}
function setAutoplayInterval(interval){if(interval===true)interval='';opts.autoplay=Math.max(+interval||AUTOPLAY_INTERVAL,o_transitionDuration*1.5);}
function updateThumbArrow(opt){if(opt.navarrows&&opt.nav==='thumbs'){$thumbArrLeft.show();$thumbArrRight.show();}else{$thumbArrLeft.hide();$thumbArrRight.hide();}}
function getThumbsInSlide($el,opts){return Math.floor($wrap.width()/(opts.thumbwidth+opts.thumbmargin));}
function setOptions(){if(!opts.nav||opts.nav==='dots'){opts.navdir='horizontal'}
that.options=opts=optionsToLowerCase(opts);thumbsPerSlide=getThumbsInSlide($wrap,opts);o_fade=(opts.transition==='crossfade'||opts.transition==='dissolve');o_loop=opts.loop&&(size>2||(o_fade&&(!o_transition||o_transition!=='slide')));o_transitionDuration=+opts.transitionduration||TRANSITION_DURATION;o_rtl=opts.direction==='rtl';o_keyboard=$.extend({},opts.keyboard&&KEYBOARD_OPTIONS,opts.keyboard);updateThumbArrow(opts);var classes={add:[],remove:[]};function addOrRemoveClass(FLAG,value){classes[FLAG?'add':'remove'].push(value);}
if(size>1){o_nav=opts.nav;o_navTop=opts.navposition==='top';classes.remove.push(selectClass);$arrs.toggle(!!opts.arrows);}else{o_nav=false;$arrs.hide();}
arrsUpdate();stageWheelUpdate();thumbArrUpdate();if(opts.autoplay)setAutoplayInterval(opts.autoplay);o_thumbSide=numberFromMeasure(opts.thumbwidth)||THUMB_SIZE;o_thumbSide2=numberFromMeasure(opts.thumbheight)||THUMB_SIZE;stageWheelTail.ok=navWheelTail.ok=opts.trackpad&&!SLOW;stageNoMove();extendMeasures(opts,[measures]);o_navThumbs=o_nav==='thumbs';if($navWrap.filter(':hidden')&&!!o_nav){$navWrap.show();}
if(o_navThumbs){frameDraw(size,'navThumb');$navFrame=$navThumbFrame;navFrameKey=NAV_THUMB_FRAME_KEY;setStyle($style,$.Fotorama.jst.style({w:o_thumbSide,h:o_thumbSide2,b:opts.thumbborderwidth,m:opts.thumbmargin,s:stamp,q:!COMPAT}));$nav.addClass(navThumbsClass).removeClass(navDotsClass);}else if(o_nav==='dots'){frameDraw(size,'navDot');$navFrame=$navDotFrame;navFrameKey=NAV_DOT_FRAME_KEY;$nav.addClass(navDotsClass).removeClass(navThumbsClass);}else{$navWrap.hide();o_nav=false;$nav.removeClass(navThumbsClass+' '+navDotsClass);}
if(o_nav){if(o_navTop){$navWrap.insertBefore($stage);}else{$navWrap.insertAfter($stage);}
frameAppend.nav=false;frameAppend($navFrame,$navShaft,'nav');}
o_allowFullScreen=opts.allowfullscreen;if(o_allowFullScreen){$fullscreenIcon.prependTo($stage);o_nativeFullScreen=FULLSCREEN&&o_allowFullScreen==='native';setupEventRedirect($fullscreenIcon,'touchend','mouseup');}else{$fullscreenIcon.detach();o_nativeFullScreen=false;}
addOrRemoveClass(o_fade,wrapFadeClass);addOrRemoveClass(!o_fade,wrapSlideClass);addOrRemoveClass(!opts.captions,wrapNoCaptionsClass);addOrRemoveClass(o_rtl,wrapRtlClass);addOrRemoveClass(opts.arrows,wrapToggleArrowsClass);o_shadows=opts.shadows&&!SLOW;addOrRemoveClass(!o_shadows,wrapNoShadowsClass);$wrap.addClass(classes.add.join(' ')).removeClass(classes.remove.join(' '));lastOptions=$.extend({},opts);setStagePosition();}
function normalizeIndex(index){return index<0?(size+(index%size))%size:index>=size?index%size:index;}
function limitIndex(index){return minMaxLimit(index,0,size-1);}
function edgeIndex(index){return o_loop?normalizeIndex(index):limitIndex(index);}
function getPrevIndex(index){return index>0||o_loop?index-1:false;}
function getNextIndex(index){return index<size-1||o_loop?index+1:false;}
function setStageShaftMinmaxAndSnap(){stageShaftTouchTail.min=o_loop?-Infinity:-getPosByIndex(size-1,measures.w,opts.margin,repositionIndex);stageShaftTouchTail.max=o_loop?Infinity:-getPosByIndex(0,measures.w,opts.margin,repositionIndex);stageShaftTouchTail.snap=measures.w+opts.margin;}
function setNavShaftMinMax(){var isVerticalDir=(opts.navdir==='vertical');var param=isVerticalDir?$navShaft.height():$navShaft.width();var mainParam=isVerticalDir?measures.h:measures.nw;navShaftTouchTail.min=Math.min(0,mainParam-param);navShaftTouchTail.max=0;navShaftTouchTail.direction=opts.navdir;$navShaft.toggleClass(grabClass,!(navShaftTouchTail.noMove=navShaftTouchTail.min===navShaftTouchTail.max));}
function eachIndex(indexes,type,fn){if(typeof indexes==='number'){indexes=new Array(indexes);var rangeFLAG=true;}
return $.each(indexes,function(i,index){if(rangeFLAG)index=i;if(typeof index==='number'){var dataFrame=data[normalizeIndex(index)];if(dataFrame){var key='$'+type+'Frame',$frame=dataFrame[key];fn.call(this,i,index,dataFrame,$frame,key,$frame&&$frame.data());}}});}
function setMeasures(width,height,ratio,index){if(!measuresSetFLAG||(measuresSetFLAG==='*'&&index===startIndex)){width=measureIsValid(opts.width)||measureIsValid(width)||WIDTH;height=measureIsValid(opts.height)||measureIsValid(height)||HEIGHT;that.resize({width:width,ratio:opts.ratio||ratio||width/height},0,index!==startIndex&&'*');}}
function loadImg(indexes,type,specialMeasures,again){eachIndex(indexes,type,function(i,index,dataFrame,$frame,key,frameData){if(!$frame)return;var fullFLAG=that.fullScreen&&!frameData.$full&&type==='stage';if(frameData.$img&&!again&&!fullFLAG)return;var img=new Image(),$img=$(img),imgData=$img.data();frameData[fullFLAG?'$full':'$img']=$img;var srcKey=type==='stage'?(fullFLAG?'full':'img'):'thumb',src=dataFrame[srcKey],dummy=fullFLAG?dataFrame['img']:dataFrame[type==='stage'?'thumb':'img'];if(type==='navThumb')$frame=frameData.$wrap;function triggerTriggerEvent(event){var _index=normalizeIndex(index);triggerEvent(event,{index:_index,src:src,frame:data[_index]});}
function error(){$img.remove();$.Fotorama.cache[src]='error';if((!dataFrame.html||type!=='stage')&&dummy&&dummy!==src){dataFrame[srcKey]=src=dummy;frameData.$full=null;loadImg([index],type,specialMeasures,true);}else{if(src&&!dataFrame.html&&!fullFLAG){$frame.trigger('f:error').removeClass(loadingClass).addClass(errorClass);triggerTriggerEvent('error');}else if(type==='stage'){$frame.trigger('f:load').removeClass(loadingClass+' '+errorClass).addClass(loadedClass);triggerTriggerEvent('load');setMeasures();}
frameData.state='error';if(size>1&&data[index]===dataFrame&&!dataFrame.html&&!dataFrame.deleted&&!dataFrame.video&&!fullFLAG){dataFrame.deleted=true;that.splice(index,1);}}}
function loaded(){$.Fotorama.measures[src]=imgData.measures=$.Fotorama.measures[src]||{width:img.width,height:img.height,ratio:img.width/img.height};setMeasures(imgData.measures.width,imgData.measures.height,imgData.measures.ratio,index);$img.off('load error').addClass(''+(fullFLAG?imgFullClass:imgClass)).attr('aria-hidden','false').prependTo($frame);if($frame.hasClass(stageFrameClass)&&!$frame.hasClass(videoContainerClass)){$frame.attr("href",$img.attr("src"));}
fit($img,($.isFunction(specialMeasures)?specialMeasures():specialMeasures)||measures);$.Fotorama.cache[src]=frameData.state='loaded';setTimeout(function(){$frame.trigger('f:load').removeClass(loadingClass+' '+errorClass).addClass(loadedClass+' '+(fullFLAG?loadedFullClass:loadedImgClass));if(type==='stage'){triggerTriggerEvent('load');}else if(dataFrame.thumbratio===AUTO||!dataFrame.thumbratio&&opts.thumbratio===AUTO){dataFrame.thumbratio=imgData.measures.ratio;reset();}},0);}
if(!src){error();return;}
function waitAndLoad(){var _i=10;waitFor(function(){return!touchedFLAG||!_i--&&!SLOW;},function(){loaded();});}
if(!$.Fotorama.cache[src]){$.Fotorama.cache[src]='*';$img.on('load',waitAndLoad).on('error',error);}else{(function justWait(){if($.Fotorama.cache[src]==='error'){error();}else if($.Fotorama.cache[src]==='loaded'){setTimeout(waitAndLoad,0);}else{setTimeout(justWait,100);}})();}
frameData.state='';img.src=src;if(frameData.data.caption){img.alt=frameData.data.caption||"";}
if(frameData.data.full){$(img).data('original',frameData.data.full);}
if(UTIL.isExpectedCaption(dataFrame,opts.showcaption)){$(img).attr('aria-labelledby',dataFrame.labelledby);}});}
function updateFotoramaState(){var $frame=activeFrame[STAGE_FRAME_KEY];if($frame&&!$frame.data().state){$spinner.addClass(spinnerShowClass);$frame.on('f:load f:error',function(){$frame.off('f:load f:error');$spinner.removeClass(spinnerShowClass);});}}
function addNavFrameEvents(frame){addEnterUp(frame,onNavFrameClick);addFocus(frame,function(){setTimeout(function(){lockScroll($nav);},0);slideNavShaft({time:o_transitionDuration,guessIndex:$(this).data().eq,minMax:navShaftTouchTail});});}
function frameDraw(indexes,type){eachIndex(indexes,type,function(i,index,dataFrame,$frame,key,frameData){if($frame)return;$frame=dataFrame[key]=$wrap[key].clone();frameData=$frame.data();frameData.data=dataFrame;var frame=$frame[0],labelledbyValue="labelledby"+$.now();if(type==='stage'){if(dataFrame.html){$('<div class="'+htmlClass+'"></div>').append(dataFrame._html?$(dataFrame.html).removeAttr('id').html(dataFrame._html):dataFrame.html).appendTo($frame);}
if(dataFrame.id){labelledbyValue=dataFrame.id||labelledbyValue;}
dataFrame.labelledby=labelledbyValue;if(UTIL.isExpectedCaption(dataFrame,opts.showcaption)){$($.Fotorama.jst.frameCaption({caption:dataFrame.caption,labelledby:labelledbyValue})).appendTo($frame);}
dataFrame.video&&$frame.addClass(stageFrameVideoClass).append($videoPlay.clone());addFocus(frame,function(e){setTimeout(function(){lockScroll($stage);},0);clickToShow({index:frameData.eq,user:true},e);});$stageFrame=$stageFrame.add($frame);}else if(type==='navDot'){addNavFrameEvents(frame);$navDotFrame=$navDotFrame.add($frame);}else if(type==='navThumb'){addNavFrameEvents(frame);frameData.$wrap=$frame.children(':first');$navThumbFrame=$navThumbFrame.add($frame);if(dataFrame.video){frameData.$wrap.append($videoPlay.clone());}}});}
function callFit($img,measuresToFit){return $img&&$img.length&&fit($img,measuresToFit);}
function stageFramePosition(indexes){eachIndex(indexes,'stage',function(i,index,dataFrame,$frame,key,frameData){if(!$frame)return;var normalizedIndex=normalizeIndex(index);frameData.eq=normalizedIndex;toDetach[STAGE_FRAME_KEY][normalizedIndex]=$frame.css($.extend({left:o_fade?0:getPosByIndex(index,measures.w,opts.margin,repositionIndex)},o_fade&&getDuration(0)));if(isDetached($frame[0])){$frame.appendTo($stageShaft);unloadVideo(dataFrame.$video);}
callFit(frameData.$img,measures);callFit(frameData.$full,measures);if($frame.hasClass(stageFrameClass)&&!($frame.attr('aria-hidden')==="false"&&$frame.hasClass(activeClass))){$frame.attr('aria-hidden','true');}});}
function thumbsDraw(pos,loadFLAG){var leftLimit,rightLimit,exceedLimit;if(o_nav!=='thumbs'||isNaN(pos))return;leftLimit=-pos;rightLimit=-pos+measures.nw;if(opts.navdir==='vertical'){pos=pos-opts.thumbheight;rightLimit=-pos+measures.h;}
$navThumbFrame.each(function(){var $this=$(this),thisData=$this.data(),eq=thisData.eq,getSpecialMeasures=function(){return{h:o_thumbSide2,w:thisData.w}},specialMeasures=getSpecialMeasures(),exceedLimit=opts.navdir==='vertical'?thisData.t>rightLimit:thisData.l>rightLimit;specialMeasures.w=thisData.w;if((opts.navdir!=='vertical'&&thisData.l+thisData.w<leftLimit)||exceedLimit||callFit(thisData.$img,specialMeasures))return;loadFLAG&&loadImg([eq],'navThumb',getSpecialMeasures);});}
function frameAppend($frames,$shaft,type){if(!frameAppend[type]){var thumbsFLAG=type==='nav'&&o_navThumbs,left=0,top=0;$shaft.append($frames.filter(function(){var actual,$this=$(this),frameData=$this.data();for(var _i=0,_l=data.length;_i<_l;_i++){if(frameData.data===data[_i]){actual=true;frameData.eq=_i;break;}}
return actual||$this.remove()&&false;}).sort(function(a,b){return $(a).data().eq-$(b).data().eq;}).each(function(){var $this=$(this),frameData=$this.data();UTIL.setThumbAttr($this,frameData.data.caption,"aria-label");}).each(function(){if(!thumbsFLAG)return;var $this=$(this),frameData=$this.data(),thumbwidth=Math.round(o_thumbSide2*frameData.data.thumbratio)||o_thumbSide,thumbheight=Math.round(o_thumbSide/frameData.data.thumbratio)||o_thumbSide2;frameData.t=top;frameData.h=thumbheight;frameData.l=left;frameData.w=thumbwidth;$this.css({width:thumbwidth});top+=thumbheight+opts.thumbmargin;left+=thumbwidth+opts.thumbmargin;}));frameAppend[type]=true;}}
function getDirection(x){return x-stageLeft>measures.w/3;}
function disableDirrection(i){return!o_loop&&(!(activeIndex+i)||!(activeIndex-size+i))&&!$videoPlaying;}
function arrsUpdate(){var disablePrev=disableDirrection(0),disableNext=disableDirrection(1);$arrPrev.toggleClass(arrDisabledClass,disablePrev).attr(disableAttr(disablePrev,false));$arrNext.toggleClass(arrDisabledClass,disableNext).attr(disableAttr(disableNext,false));}
function thumbArrUpdate(){var isLeftDisable=false,isRightDisable=false;if(opts.navtype==='thumbs'&&!opts.loop){(activeIndex==0)?isLeftDisable=true:isLeftDisable=false;(activeIndex==opts.data.length-1)?isRightDisable=true:isRightDisable=false;}
if(opts.navtype==='slides'){var pos=readPosition($navShaft,opts.navdir);pos>=navShaftTouchTail.max?isLeftDisable=true:isLeftDisable=false;pos<=navShaftTouchTail.min?isRightDisable=true:isRightDisable=false;}
$thumbArrLeft.toggleClass(arrDisabledClass,isLeftDisable).attr(disableAttr(isLeftDisable,true));$thumbArrRight.toggleClass(arrDisabledClass,isRightDisable).attr(disableAttr(isRightDisable,true));}
function stageWheelUpdate(){if(stageWheelTail.ok){stageWheelTail.prevent={'<':disableDirrection(0),'>':disableDirrection(1)};}}
function getNavFrameBounds($navFrame){var navFrameData=$navFrame.data(),left,top,width,height;if(o_navThumbs){left=navFrameData.l;top=navFrameData.t;width=navFrameData.w;height=navFrameData.h;}else{left=$navFrame.position().left;width=$navFrame.width();}
var horizontalBounds={c:left+width/2,min:-left+opts.thumbmargin*10,max:-left+measures.w-width-opts.thumbmargin*10};var verticalBounds={c:top+height/2,min:-top+opts.thumbmargin*10,max:-top+measures.h-height-opts.thumbmargin*10};return opts.navdir==='vertical'?verticalBounds:horizontalBounds;}
function slideThumbBorder(time){var navFrameData=activeFrame[navFrameKey].data();slide($thumbBorder,{time:time*1.2,pos:(opts.navdir==='vertical'?navFrameData.t:navFrameData.l),width:navFrameData.w,height:navFrameData.h,direction:opts.navdir});}
function slideNavShaft(options){var $guessNavFrame=data[options.guessIndex][navFrameKey],typeOfAnimation=opts.navtype;var overflowFLAG,time,minMax,boundTop,boundLeft,l,pos,x;if($guessNavFrame){if(typeOfAnimation==='thumbs'){overflowFLAG=navShaftTouchTail.min!==navShaftTouchTail.max;minMax=options.minMax||overflowFLAG&&getNavFrameBounds(activeFrame[navFrameKey]);boundTop=overflowFLAG&&(options.keep&&slideNavShaft.t?slideNavShaft.l:minMaxLimit((options.coo||measures.nw/2)-getNavFrameBounds($guessNavFrame).c,minMax.min,minMax.max));boundLeft=overflowFLAG&&(options.keep&&slideNavShaft.l?slideNavShaft.l:minMaxLimit((options.coo||measures.nw/2)-getNavFrameBounds($guessNavFrame).c,minMax.min,minMax.max));l=(opts.navdir==='vertical'?boundTop:boundLeft);pos=overflowFLAG&&minMaxLimit(l,navShaftTouchTail.min,navShaftTouchTail.max)||0;time=options.time*1.1;slide($navShaft,{time:time,pos:pos,direction:opts.navdir,onEnd:function(){thumbsDraw(pos,true);thumbArrUpdate();}});setShadow($nav,findShadowEdge(pos,navShaftTouchTail.min,navShaftTouchTail.max,opts.navdir));slideNavShaft.l=l;}else{x=readPosition($navShaft,opts.navdir);time=options.time*1.11;pos=validateSlidePos(opts,navShaftTouchTail,options.guessIndex,x,$guessNavFrame,$navWrap,opts.navdir);slide($navShaft,{time:time,pos:pos,direction:opts.navdir,onEnd:function(){thumbsDraw(pos,true);thumbArrUpdate();}});setShadow($nav,findShadowEdge(pos,navShaftTouchTail.min,navShaftTouchTail.max,opts.navdir));}}}
function navUpdate(){deactivateFrames(navFrameKey);toDeactivate[navFrameKey].push(activeFrame[navFrameKey].addClass(activeClass).attr('data-active',true));}
function deactivateFrames(key){var _toDeactivate=toDeactivate[key];while(_toDeactivate.length){_toDeactivate.shift().removeClass(activeClass).attr('data-active',false);}}
function detachFrames(key){var _toDetach=toDetach[key];$.each(activeIndexes,function(i,index){delete _toDetach[normalizeIndex(index)];});$.each(_toDetach,function(index,$frame){delete _toDetach[index];$frame.detach();});}
function stageShaftReposition(skipOnEnd){repositionIndex=dirtyIndex=activeIndex;var $frame=activeFrame[STAGE_FRAME_KEY];if($frame){deactivateFrames(STAGE_FRAME_KEY);toDeactivate[STAGE_FRAME_KEY].push($frame.addClass(activeClass).attr('data-active',true));if($frame.hasClass(stageFrameClass)){$frame.attr('aria-hidden','false');}
skipOnEnd||that.showStage.onEnd(true);stop($stageShaft,0,true);detachFrames(STAGE_FRAME_KEY);stageFramePosition(activeIndexes);setStageShaftMinmaxAndSnap();setNavShaftMinMax();addEnterUp($stageShaft[0],function(){if(!$fotorama.hasClass(fullscreenClass)){that.requestFullScreen();$fullscreenIcon.focus();}});}}
function extendMeasures(options,measuresArray){if(!options)return;$.each(measuresArray,function(i,measures){if(!measures)return;$.extend(measures,{width:options.width||measures.width,height:options.height,minwidth:options.minwidth,maxwidth:options.maxwidth,minheight:options.minheight,maxheight:options.maxheight,ratio:getRatio(options.ratio)})});}
function triggerEvent(event,extra){$fotorama.trigger(_fotoramaClass+':'+event,[that,extra]);}
function onTouchStart(){clearTimeout(onTouchEnd.t);touchedFLAG=1;if(opts.stopautoplayontouch){that.stopAutoplay();}else{pausedAutoplayFLAG=true;}}
function onTouchEnd(){if(!touchedFLAG)return;if(!opts.stopautoplayontouch){releaseAutoplay();changeAutoplay();}
onTouchEnd.t=setTimeout(function(){touchedFLAG=0;},TRANSITION_DURATION+TOUCH_TIMEOUT);}
function releaseAutoplay(){pausedAutoplayFLAG=!!($videoPlaying||stoppedAutoplayFLAG);}
function changeAutoplay(){clearTimeout(changeAutoplay.t);waitFor.stop(changeAutoplay.w);if(!opts.autoplay||pausedAutoplayFLAG){if(that.autoplay){that.autoplay=false;triggerEvent('stopautoplay');}
return;}
if(!that.autoplay){that.autoplay=true;triggerEvent('startautoplay');}
var _activeIndex=activeIndex;var frameData=activeFrame[STAGE_FRAME_KEY].data();changeAutoplay.w=waitFor(function(){return frameData.state||_activeIndex!==activeIndex;},function(){changeAutoplay.t=setTimeout(function(){if(pausedAutoplayFLAG||_activeIndex!==activeIndex)return;var _nextAutoplayIndex=nextAutoplayIndex,nextFrameData=data[_nextAutoplayIndex][STAGE_FRAME_KEY].data();changeAutoplay.w=waitFor(function(){return nextFrameData.state||_nextAutoplayIndex!==nextAutoplayIndex;},function(){if(pausedAutoplayFLAG||_nextAutoplayIndex!==nextAutoplayIndex)return;that.show(o_loop?getDirectionSign(!o_rtl):nextAutoplayIndex);});},opts.autoplay);});}
that.startAutoplay=function(interval){if(that.autoplay)return this;pausedAutoplayFLAG=stoppedAutoplayFLAG=false;setAutoplayInterval(interval||opts.autoplay);changeAutoplay();return this;};that.stopAutoplay=function(){if(that.autoplay){pausedAutoplayFLAG=stoppedAutoplayFLAG=true;changeAutoplay();}
return this;};that.showSlide=function(slideDir){var currentPosition=readPosition($navShaft,opts.navdir),pos,time=500*1.1,size=opts.navdir==='horizontal'?opts.thumbwidth:opts.thumbheight,onEnd=function(){thumbArrUpdate();};if(slideDir==='next'){pos=currentPosition-(size+opts.margin)*thumbsPerSlide;}
if(slideDir==='prev'){pos=currentPosition+(size+opts.margin)*thumbsPerSlide;}
pos=validateRestrictions(pos,navShaftTouchTail);thumbsDraw(pos,true);slide($navShaft,{time:time,pos:pos,direction:opts.navdir,onEnd:onEnd});};that.showWhileLongPress=function(options){if(that.longPress.singlePressInProgress){return;}
var index=calcActiveIndex(options);calcGlobalIndexes(index);var time=calcTime(options)/50;var _activeFrame=activeFrame;that.activeFrame=activeFrame=data[activeIndex];var silent=_activeFrame===activeFrame&&!options.user;that.showNav(silent,options,time);return this;};that.showEndLongPress=function(options){if(that.longPress.singlePressInProgress){return;}
var index=calcActiveIndex(options);calcGlobalIndexes(index);var time=calcTime(options)/50;var _activeFrame=activeFrame;that.activeFrame=activeFrame=data[activeIndex];var silent=_activeFrame===activeFrame&&!options.user;that.showStage(silent,options,time);showedFLAG=typeof lastActiveIndex!=='undefined'&&lastActiveIndex!==activeIndex;lastActiveIndex=activeIndex;return this;};function calcActiveIndex(options){var index;if(typeof options!=='object'){index=options;options={};}else{index=options.index;}
index=index==='>'?dirtyIndex+1:index==='<'?dirtyIndex-1:index==='<<'?0:index==='>>'?size-1:index;index=isNaN(index)?undefined:index;index=typeof index==='undefined'?activeIndex||0:index;return index;}
function calcGlobalIndexes(index){that.activeIndex=activeIndex=edgeIndex(index);prevIndex=getPrevIndex(activeIndex);nextIndex=getNextIndex(activeIndex);nextAutoplayIndex=normalizeIndex(activeIndex+(o_rtl?-1:1));activeIndexes=[activeIndex,prevIndex,nextIndex];dirtyIndex=o_loop?index:activeIndex;}
function calcTime(options){var diffIndex=Math.abs(lastActiveIndex-dirtyIndex),time=getNumber(options.time,function(){return Math.min(o_transitionDuration*(1+(diffIndex-1)/12),o_transitionDuration*2);});if(options.slow){time*=10;}
return time;}
that.showStage=function(silent,options,time,e){if(e!==undefined&&e.target.tagName=='IFRAME'){return;}
unloadVideo($videoPlaying,activeFrame.i!==data[normalizeIndex(repositionIndex)].i);frameDraw(activeIndexes,'stage');stageFramePosition(SLOW?[dirtyIndex]:[dirtyIndex,getPrevIndex(dirtyIndex),getNextIndex(dirtyIndex)]);updateTouchTails('go',true);silent||triggerEvent('show',{user:options.user,time:time});pausedAutoplayFLAG=true;var overPos=options.overPos;var onEnd=that.showStage.onEnd=function(skipReposition){if(onEnd.ok)return;onEnd.ok=true;skipReposition||stageShaftReposition(true);if(!silent){triggerEvent('showend',{user:options.user});}
if(!skipReposition&&o_transition&&o_transition!==opts.transition){that.setOptions({transition:o_transition});o_transition=false;return;}
updateFotoramaState();loadImg(activeIndexes,'stage');updateTouchTails('go',false);stageWheelUpdate();stageCursor();releaseAutoplay();changeAutoplay();if(that.fullScreen){activeFrame[STAGE_FRAME_KEY].find('.'+imgFullClass).attr('aria-hidden',false);activeFrame[STAGE_FRAME_KEY].find('.'+imgClass).attr('aria-hidden',true)}else{activeFrame[STAGE_FRAME_KEY].find('.'+imgFullClass).attr('aria-hidden',true);activeFrame[STAGE_FRAME_KEY].find('.'+imgClass).attr('aria-hidden',false)}};if(!o_fade){slide($stageShaft,{pos:-getPosByIndex(dirtyIndex,measures.w,opts.margin,repositionIndex),overPos:overPos,time:time,onEnd:onEnd});}else{var $activeFrame=activeFrame[STAGE_FRAME_KEY],$prevActiveFrame=data[lastActiveIndex]&&activeIndex!==lastActiveIndex?data[lastActiveIndex][STAGE_FRAME_KEY]:null;fade($activeFrame,$prevActiveFrame,$stageFrame,{time:time,method:opts.transition,onEnd:onEnd},fadeStack);}
arrsUpdate();};that.showNav=function(silent,options,time){thumbArrUpdate();if(o_nav){navUpdate();var guessIndex=limitIndex(activeIndex+minMaxLimit(dirtyIndex-lastActiveIndex,-1,1));slideNavShaft({time:time,coo:guessIndex!==activeIndex&&options.coo,guessIndex:typeof options.coo!=='undefined'?guessIndex:activeIndex,keep:silent});if(o_navThumbs)slideThumbBorder(time);}};that.show=function(options,e){that.longPress.singlePressInProgress=true;var index=calcActiveIndex(options);calcGlobalIndexes(index);var time=calcTime(options);var _activeFrame=activeFrame;that.activeFrame=activeFrame=data[activeIndex];var silent=_activeFrame===activeFrame&&!options.user;that.showStage(silent,options,time,e);that.showNav(silent,options,time);showedFLAG=typeof lastActiveIndex!=='undefined'&&lastActiveIndex!==activeIndex;lastActiveIndex=activeIndex;that.longPress.singlePressInProgress=false;return this;};that.requestFullScreen=function(){if(o_allowFullScreen&&!that.fullScreen){var isVideo=$((that.activeFrame||{}).$stageFrame||{}).hasClass('fotorama-video-container');if(isVideo){return;}
scrollTop=$WINDOW.scrollTop();scrollLeft=$WINDOW.scrollLeft();lockScroll($WINDOW);updateTouchTails('x',true);measuresStash=$.extend({},measures);$fotorama.addClass(fullscreenClass).appendTo($BODY.addClass(_fullscreenClass));$HTML.addClass(_fullscreenClass);unloadVideo($videoPlaying,true,true);that.fullScreen=true;if(o_nativeFullScreen){fullScreenApi.request(fotorama);}
that.resize();loadImg(activeIndexes,'stage');updateFotoramaState();triggerEvent('fullscreenenter');if(!('ontouchstart'in window)){$fullscreenIcon.focus();}}
return this;};function cancelFullScreen(){if(that.fullScreen){that.fullScreen=false;if(FULLSCREEN){fullScreenApi.cancel(fotorama);}
$BODY.removeClass(_fullscreenClass);$HTML.removeClass(_fullscreenClass);$fotorama.removeClass(fullscreenClass).insertAfter($anchor);measures=$.extend({},measuresStash);unloadVideo($videoPlaying,true,true);updateTouchTails('x',false);that.resize();loadImg(activeIndexes,'stage');lockScroll($WINDOW,scrollLeft,scrollTop);triggerEvent('fullscreenexit');}}
that.cancelFullScreen=function(){if(o_nativeFullScreen&&fullScreenApi.is()){fullScreenApi.cancel(document);}else{cancelFullScreen();}
return this;};that.toggleFullScreen=function(){return that[(that.fullScreen?'cancel':'request')+'FullScreen']();};that.resize=function(options){if(!data)return this;var time=arguments[1]||0,setFLAG=arguments[2];thumbsPerSlide=getThumbsInSlide($wrap,opts);extendMeasures(!that.fullScreen?optionsToLowerCase(options):{width:$(window).width(),maxwidth:null,minwidth:null,height:$(window).height(),maxheight:null,minheight:null},[measures,setFLAG||that.fullScreen||opts]);var width=measures.width,height=measures.height,ratio=measures.ratio,windowHeight=$WINDOW.height()-(o_nav?$nav.height():0);if(measureIsValid(width)){$wrap.css({width:''});$wrap.css({height:''});$stage.css({width:''});$stage.css({height:''});$stageShaft.css({width:''});$stageShaft.css({height:''});$nav.css({width:''});$nav.css({height:''});$wrap.css({minWidth:measures.minwidth||0,maxWidth:measures.maxwidth||MAX_WIDTH});if(o_nav==='dots'){$navWrap.hide();}
width=measures.W=measures.w=$wrap.width();measures.nw=o_nav&&numberFromWhatever(opts.navwidth,width)||width;$stageShaft.css({width:measures.w,marginLeft:(measures.W-measures.w)/2});height=numberFromWhatever(height,windowHeight);height=height||(ratio&&width/ratio);if(height){width=Math.round(width);height=measures.h=Math.round(minMaxLimit(height,numberFromWhatever(measures.minheight,windowHeight),numberFromWhatever(measures.maxheight,windowHeight)));$stage.css({'width':width,'height':height});if(opts.navdir==='vertical'&&!that.fullscreen){$nav.width(opts.thumbwidth+opts.thumbmargin*2);}
if(opts.navdir==='horizontal'&&!that.fullscreen){$nav.height(opts.thumbheight+opts.thumbmargin*2);}
if(o_nav==='dots'){$nav.width(width).height('auto');$navWrap.show();}
if(opts.navdir==='vertical'&&that.fullScreen){$stage.css('height',$WINDOW.height());}
if(opts.navdir==='horizontal'&&that.fullScreen){$stage.css('height',$WINDOW.height()-$nav.height());}
if(o_nav){switch(opts.navdir){case 'vertical':$navWrap.removeClass(navShafthorizontalClass);$navWrap.removeClass(navShaftListClass);$navWrap.addClass(navShaftVerticalClass);$nav.stop().animate({height:measures.h,width:opts.thumbwidth},time);break;case 'list':$navWrap.removeClass(navShaftVerticalClass);$navWrap.removeClass(navShafthorizontalClass);$navWrap.addClass(navShaftListClass);break;default:$navWrap.removeClass(navShaftVerticalClass);$navWrap.removeClass(navShaftListClass);$navWrap.addClass(navShafthorizontalClass);$nav.stop().animate({width:measures.nw},time);break;}
stageShaftReposition();slideNavShaft({guessIndex:activeIndex,time:time,keep:true});if(o_navThumbs&&frameAppend.nav)slideThumbBorder(time);}
measuresSetFLAG=setFLAG||true;ready.ok=true;ready();}}
stageLeft=$stage.offset().left;setStagePosition();return this;};that.setOptions=function(options){$.extend(opts,options);reset();return this;};that.shuffle=function(){data&&shuffle(data)&&reset();return this;};function setShadow($el,edge){if(o_shadows){$el.removeClass(shadowsLeftClass+' '+shadowsRightClass);$el.removeClass(shadowsTopClass+' '+shadowsBottomClass);edge&&!$videoPlaying&&$el.addClass(edge.replace(/^|\s/g,' '+shadowsClass+'--'));}}
that.longPress={threshold:1,count:0,thumbSlideTime:20,progress:function(){if(!this.inProgress){this.count++;this.inProgress=this.count>this.threshold;}},end:function(){if(this.inProgress){this.isEnded=true}},reset:function(){this.count=0;this.inProgress=false;this.isEnded=false;}};that.destroy=function(){that.cancelFullScreen();that.stopAutoplay();data=that.data=null;appendElements();activeIndexes=[];detachFrames(STAGE_FRAME_KEY);reset.ok=false;return this;};that.playVideo=function(){var dataFrame=activeFrame,video=dataFrame.video,_activeIndex=activeIndex;if(typeof video==='object'&&dataFrame.videoReady){o_nativeFullScreen&&that.fullScreen&&that.cancelFullScreen();waitFor(function(){return!fullScreenApi.is()||_activeIndex!==activeIndex;},function(){if(_activeIndex===activeIndex){dataFrame.$video=dataFrame.$video||$(div(videoClass)).append(createVideoFrame(video));dataFrame.$video.appendTo(dataFrame[STAGE_FRAME_KEY]);$wrap.addClass(wrapVideoClass);$videoPlaying=dataFrame.$video;stageNoMove();$arrs.blur();$fullscreenIcon.blur();triggerEvent('loadvideo');}});}
return this;};that.stopVideo=function(){unloadVideo($videoPlaying,true,true);return this;};that.spliceByIndex=function(index,newImgObj){newImgObj.i=index+1;newImgObj.img&&$.ajax({url:newImgObj.img,type:'HEAD',success:function(){data.splice(index,1,newImgObj);reset();}});};function unloadVideo($video,unloadActiveFLAG,releaseAutoplayFLAG){if(unloadActiveFLAG){$wrap.removeClass(wrapVideoClass);$videoPlaying=false;stageNoMove();}
if($video&&$video!==$videoPlaying){$video.remove();triggerEvent('unloadvideo');}
if(releaseAutoplayFLAG){releaseAutoplay();changeAutoplay();}}
function toggleControlsClass(FLAG){$wrap.toggleClass(wrapNoControlsClass,FLAG);}
function stageCursor(e){if(stageShaftTouchTail.flow)return;var x=e?e.pageX:stageCursor.x,pointerFLAG=x&&!disableDirrection(getDirection(x))&&opts.click;if(stageCursor.p!==pointerFLAG&&$stage.toggleClass(pointerClass,pointerFLAG)){stageCursor.p=pointerFLAG;stageCursor.x=x;}}
$stage.on('mousemove',stageCursor);function clickToShow(showOptions,e){clearTimeout(clickToShow.t);if(opts.clicktransition&&opts.clicktransition!==opts.transition){setTimeout(function(){var _o_transition=opts.transition;that.setOptions({transition:opts.clicktransition});o_transition=_o_transition;clickToShow.t=setTimeout(function(){that.show(showOptions);},10);},0);}else{that.show(showOptions,e);}}
function onStageTap(e,toggleControlsFLAG){var target=e.target,$target=$(target);if($target.hasClass(videoPlayClass)){that.playVideo();}else if(target===fullscreenIcon){that.toggleFullScreen();}else if($videoPlaying){target===videoClose&&unloadVideo($videoPlaying,true,true);}else if(!$fotorama.hasClass(fullscreenClass)){that.requestFullScreen();}}
function updateTouchTails(key,value){stageShaftTouchTail[key]=navShaftTouchTail[key]=value;}
stageShaftTouchTail=moveOnTouch($stageShaft,{onStart:onTouchStart,onMove:function(e,result){setShadow($stage,result.edge);},onTouchEnd:onTouchEnd,onEnd:function(result){var toggleControlsFLAG;setShadow($stage);toggleControlsFLAG=(MS_POINTER&&!hoverFLAG||result.touch)&&opts.arrows;if((result.moved||(toggleControlsFLAG&&result.pos!==result.newPos&&!result.control))&&result.$target[0]!==$fullscreenIcon[0]){var index=getIndexByPos(result.newPos,measures.w,opts.margin,repositionIndex);that.show({index:index,time:o_fade?o_transitionDuration:result.time,overPos:result.overPos,user:true});}else if(!result.aborted&&!result.control){onStageTap(result.startEvent,toggleControlsFLAG);}},timeLow:1,timeHigh:1,friction:2,select:'.'+selectClass+', .'+selectClass+' *',$wrap:$stage,direction:'horizontal'});navShaftTouchTail=moveOnTouch($navShaft,{onStart:onTouchStart,onMove:function(e,result){setShadow($nav,result.edge);},onTouchEnd:onTouchEnd,onEnd:function(result){function onEnd(){slideNavShaft.l=result.newPos;releaseAutoplay();changeAutoplay();thumbsDraw(result.newPos,true);thumbArrUpdate();}
if(!result.moved){var target=result.$target.closest('.'+navFrameClass,$navShaft)[0];target&&onNavFrameClick.call(target,result.startEvent);}else if(result.pos!==result.newPos){pausedAutoplayFLAG=true;slide($navShaft,{time:result.time,pos:result.newPos,overPos:result.overPos,direction:opts.navdir,onEnd:onEnd});thumbsDraw(result.newPos);o_shadows&&setShadow($nav,findShadowEdge(result.newPos,navShaftTouchTail.min,navShaftTouchTail.max,result.dir));}else{onEnd();}},timeLow:.5,timeHigh:2,friction:5,$wrap:$nav,direction:opts.navdir});stageWheelTail=wheel($stage,{shift:true,onEnd:function(e,direction){onTouchStart();onTouchEnd();that.show({index:direction,slow:e.altKey})}});navWheelTail=wheel($nav,{onEnd:function(e,direction){onTouchStart();onTouchEnd();var newPos=stop($navShaft)+direction*.25;$navShaft.css(getTranslate(minMaxLimit(newPos,navShaftTouchTail.min,navShaftTouchTail.max),opts.navdir));o_shadows&&setShadow($nav,findShadowEdge(newPos,navShaftTouchTail.min,navShaftTouchTail.max,opts.navdir));navWheelTail.prevent={'<':newPos>=navShaftTouchTail.max,'>':newPos<=navShaftTouchTail.min};clearTimeout(navWheelTail.t);navWheelTail.t=setTimeout(function(){slideNavShaft.l=newPos;thumbsDraw(newPos,true)},TOUCH_TIMEOUT);thumbsDraw(newPos);}});$wrap.hover(function(){setTimeout(function(){if(touchedFLAG)return;toggleControlsClass(!(hoverFLAG=true));},0);},function(){if(!hoverFLAG)return;toggleControlsClass(!(hoverFLAG=false));});function onNavFrameClick(e){var index=$(this).data().eq;if(opts.navtype==='thumbs'){clickToShow({index:index,slow:e.altKey,user:true,coo:e._x-$nav.offset().left});}else{clickToShow({index:index,slow:e.altKey,user:true});}}
function onArrClick(e){clickToShow({index:$arrs.index(this)?'>':'<',slow:e.altKey,user:true});}
smartClick($arrs,function(e){stopEvent(e);onArrClick.call(this,e);},{onStart:function(){onTouchStart();stageShaftTouchTail.control=true;},onTouchEnd:onTouchEnd});smartClick($thumbArrLeft,function(e){stopEvent(e);if(opts.navtype==='thumbs'){that.show('<');}else{that.showSlide('prev')}});smartClick($thumbArrRight,function(e){stopEvent(e);if(opts.navtype==='thumbs'){that.show('>');}else{that.showSlide('next')}});function addFocusOnControls(el){addFocus(el,function(){setTimeout(function(){lockScroll($stage);},0);toggleControlsClass(false);});}
$arrs.each(function(){addEnterUp(this,function(e){onArrClick.call(this,e);});addFocusOnControls(this);});addEnterUp(fullscreenIcon,function(){if($fotorama.hasClass(fullscreenClass)){that.cancelFullScreen();$stageShaft.focus();}else{that.requestFullScreen();$fullscreenIcon.focus();}});addFocusOnControls(fullscreenIcon);function reset(){setData();setOptions();if(!reset.i){reset.i=true;var _startindex=opts.startindex;activeIndex=repositionIndex=dirtyIndex=lastActiveIndex=startIndex=edgeIndex(_startindex)||0;}
if(size){if(changeToRtl())return;if($videoPlaying){unloadVideo($videoPlaying,true);}
activeIndexes=[];detachFrames(STAGE_FRAME_KEY);reset.ok=true;that.show({index:activeIndex,time:0});that.resize();}else{that.destroy();}}
function changeToRtl(){if(!changeToRtl.f===o_rtl){changeToRtl.f=o_rtl;activeIndex=size-1-activeIndex;that.reverse();return true;}}
$.each('load push pop shift unshift reverse sort splice'.split(' '),function(i,method){that[method]=function(){data=data||[];if(method!=='load'){Array.prototype[method].apply(data,arguments);}else if(arguments[0]&&typeof arguments[0]==='object'&&arguments[0].length){data=clone(arguments[0]);}
reset();return that;}});function ready(){if(ready.ok){ready.ok=false;triggerEvent('ready');}}
reset();};$.fn.fotorama=function(opts){return this.each(function(){var that=this,$fotorama=$(this),fotoramaData=$fotorama.data(),fotorama=fotoramaData.fotorama;if(!fotorama){waitFor(function(){return!isHidden(that);},function(){fotoramaData.urtext=$fotorama.html();new $.Fotorama($fotorama,$.extend({},OPTIONS,window.fotoramaDefaults,opts,fotoramaData));});}else{fotorama.setOptions(opts,true);}});};$.Fotorama.instances=[];function calculateIndexes(){$.each($.Fotorama.instances,function(index,instance){instance.index=index;});}
function addInstance(instance){$.Fotorama.instances.push(instance);calculateIndexes();}
function hideInstance(instance){$.Fotorama.instances.splice(instance.index,1);calculateIndexes();}
$.Fotorama.cache={};$.Fotorama.measures={};$=$||{};$.Fotorama=$.Fotorama||{};$.Fotorama.jst=$.Fotorama.jst||{};$.Fotorama.jst.dots=function(v){var __t,__p='',__e=_.escape;__p+='<div class="fotorama__nav__frame fotorama__nav__frame--dot" tabindex="0" role="button" data-gallery-role="nav-frame" data-nav-type="thumb" aria-label>\r\n    <div class="fotorama__dot"></div>\r\n</div>';return __p};$.Fotorama.jst.frameCaption=function(v){var __t,__p='',__e=_.escape;__p+='<div class="fotorama__caption" aria-hidden="true">\r\n    <div class="fotorama__caption__wrap" id="'+
((__t=(v.labelledby))==null?'':__t)+
'">'+
((__t=(v.caption))==null?'':__t)+
'</div>\r\n</div>\r\n';return __p};$.Fotorama.jst.style=function(v){var __t,__p='',__e=_.escape;__p+='.fotorama'+
((__t=(v.s))==null?'':__t)+
' .fotorama__nav--thumbs .fotorama__nav__frame{\r\npadding:'+
((__t=(v.m))==null?'':__t)+
'px;\r\nheight:'+
((__t=(v.h))==null?'':__t)+
'px}\r\n.fotorama'+
((__t=(v.s))==null?'':__t)+
' .fotorama__thumb-border{\r\nheight:'+
((__t=(v.h))==null?'':__t)+
'px;\r\nborder-width:'+
((__t=(v.b))==null?'':__t)+
'px;\r\nmargin-top:'+
((__t=(v.m))==null?'':__t)+
'px}';return __p};$.Fotorama.jst.thumb=function(v){var __t,__p='',__e=_.escape;__p+='<div class="fotorama__nav__frame fotorama__nav__frame--thumb" tabindex="0" role="button" data-gallery-role="nav-frame" data-nav-type="thumb" aria-label>\r\n    <div class="fotorama__thumb">\r\n    </div>\r\n</div>';return __p};})(window,document,location,typeof jQuery!=='undefined'&&jQuery);return(require.s.contexts._.config.shim['fotorama/fotorama']&&require.s.contexts._.config.shim['fotorama/fotorama'].exportsFn&&require.s.contexts._.config.shim['fotorama/fotorama'].exportsFn());}.bind(window));define('mage/gallery/gallery',['jquery','fotorama/fotorama','underscore','matchMedia','mage/template','text!mage/gallery/gallery.html','uiClass','mage/translate'],function($,fotorama,_,mediaCheck,template,galleryTpl,Class,$t){'use strict';var getMainImageIndex=function(data){var mainIndex;if(_.every(data,function(item){return _.isObject(item);})){mainIndex=_.findIndex(data,function(item){return item.isMain;});}
return mainIndex>0?mainIndex:0;},getTranslate=function(el){var slideTransform=$(el).attr('style').split(';');slideTransform=$.map(slideTransform,function(style){style=style.trim();if(style.startsWith('transform: translate3d')){return style.match(/transform: translate3d\((.+)px,(.+)px,(.+)px\)/);}
return false;});return slideTransform.filter(Boolean);},_toNumber=function(str){var type=typeof str;if(type==='string'){return parseInt(str);}
return str;};return Class.extend({defaults:{settings:{},config:{},startConfig:{}},isTouchEnabled:(function(){return 'ontouchstart'in document.documentElement;})(),initialize:function(config,element){var self=this;this._super();_.bindAll(this,'_focusSwitcher');if(this.isTouchEnabled){config.options.arrows=false;if(config.fullscreen){config.fullscreen.arrows=false;}}
config.options.width=_toNumber(config.options.width);config.options.height=_toNumber(config.options.height);config.options.thumbwidth=_toNumber(config.options.thumbwidth);config.options.thumbheight=_toNumber(config.options.thumbheight);config.options.swipe=true;this.config=config;this.settings={$element:$(element),$pageWrapper:$('body>.page-wrapper'),currentConfig:config,defaultConfig:_.clone(config),fullscreenConfig:_.clone(config.fullscreen),breakpoints:config.breakpoints,activeBreakpoint:{},fotoramaApi:null,isFullscreen:false,api:null,data:_.clone(config.data)};config.options.ratio=config.options.width/config.options.height;config.options.height=null;$.extend(true,this.startConfig,config);this.initGallery();this.initApi();this.setupBreakpoints();this.initFullscreenSettings();this.settings.$element.on('click','.fotorama__stage__frame',function(){if(!$(this).parents('.fotorama__shadows--left, .fotorama__shadows--right').length&&!$(this).hasClass('fotorama-video-container')){self.openFullScreen();}});if(this.isTouchEnabled&&this.settings.isFullscreen){this.settings.$element.on('tap','.fotorama__stage__frame',function(){var translate=getTranslate($(this).parents('.fotorama__stage__shaft'));if(translate[1]==='0'&&!$(this).hasClass('fotorama-video-container')){self.openFullScreen();self.settings.$pageWrapper.hide();}});}},openFullScreen:function(){this.settings.api.fotorama.requestFullScreen();this.settings.$fullscreenIcon.css({opacity:1,visibility:'visible',display:'block'});},initFullscreenSettings:function(){var settings=this.settings,self=this;settings.$gallery=this.settings.$element.find('[data-gallery-role="gallery"]');settings.$fullscreenIcon=this.settings.$element.find('[data-gallery-role="fotorama__fullscreen-icon"]');settings.focusableStart=this.settings.$element.find('[data-gallery-role="fotorama__focusable-start"]');settings.focusableEnd=this.settings.$element.find('[data-gallery-role="fotorama__focusable-end"]');settings.closeIcon=this.settings.$element.find('[data-gallery-role="fotorama__fullscreen-icon"]');settings.fullscreenConfig.swipe=true;settings.$gallery.on('fotorama:fullscreenenter',function(){settings.closeIcon.show();settings.focusableStart.attr('tabindex','0');settings.focusableEnd.attr('tabindex','0');settings.focusableStart.bind('focusin',self._focusSwitcher);settings.focusableEnd.bind('focusin',self._focusSwitcher);settings.api.updateOptions(settings.defaultConfig.options,true);settings.api.updateOptions(settings.fullscreenConfig,true);if(!_.isEqual(settings.activeBreakpoint,{})&&settings.breakpoints){settings.api.updateOptions(settings.activeBreakpoint.options,true);}
settings.isFullscreen=true;});settings.$gallery.on('fotorama:fullscreenexit',function(){settings.closeIcon.hide();settings.focusableStart.attr('tabindex','-1');settings.focusableEnd.attr('tabindex','-1');settings.api.updateOptions(settings.defaultConfig.options,true);settings.focusableStart.unbind('focusin',this._focusSwitcher);settings.focusableEnd.unbind('focusin',this._focusSwitcher);settings.closeIcon.hide();if(!_.isEqual(settings.activeBreakpoint,{})&&settings.breakpoints){settings.api.updateOptions(settings.activeBreakpoint.options,true);}
settings.isFullscreen=false;settings.$element.data('gallery').updateOptions({swipe:true});});},_focusSwitcher:function(e){var target=$(e.target),settings=this.settings;if(target.is(settings.focusableStart)){this._setFocus('start');}else if(target.is(settings.focusableEnd)){this._setFocus('end');}},_setFocus:function(position){var settings=this.settings,focusableElements,infelicity;if(position==='end'){settings.$gallery.find(settings.closeIcon).focus();}else if(position==='start'){infelicity=3;focusableElements=settings.$gallery.find(':focusable');focusableElements.eq(focusableElements.length-infelicity).focus();}},initGallery:function(){var breakpoints={},settings=this.settings,config=this.config,tpl=template(galleryTpl,{next:$t('Next'),previous:$t('Previous')}),mainImageIndex;if(settings.breakpoints){_.each(_.values(settings.breakpoints),function(breakpoint){var conditions;_.each(_.pairs(breakpoint.conditions),function(pair){conditions=conditions?conditions+' and ('+pair[0]+': '+pair[1]+')':'('+pair[0]+': '+pair[1]+')';});breakpoints[conditions]=breakpoint.options;});settings.breakpoints=breakpoints;}
_.extend(config,config.options);config.options=undefined;config.click=false;config.breakpoints=null;settings.currentConfig=config;settings.$element.html(tpl);settings.$element.removeClass('_block-content-loading');settings.$elementF=$(settings.$element.children()[0]);settings.$elementF.fotorama(config);settings.fotoramaApi=settings.$elementF.data('fotorama');$.extend(true,config,this.startConfig);mainImageIndex=getMainImageIndex(config.data);if(mainImageIndex){this.settings.fotoramaApi.show({index:mainImageIndex,time:0});}},setupBreakpoints:function(){var pairs,settings=this.settings,config=this.config,startConfig=this.startConfig,isTouchEnabled=this.isTouchEnabled;if(_.isObject(settings.breakpoints)){pairs=_.pairs(settings.breakpoints);_.each(pairs,function(pair){mediaCheck({media:pair[0],entry:function(){$.extend(true,config,_.clone(startConfig));settings.api.updateOptions(settings.defaultConfig.options,true);if(settings.isFullscreen){settings.api.updateOptions(settings.fullscreenConfig,true);}
if(isTouchEnabled){settings.breakpoints[pair[0]].options.arrows=false;if(settings.breakpoints[pair[0]].options.fullscreen){settings.breakpoints[pair[0]].options.fullscreen.arrows=false;}}
settings.api.updateOptions(settings.breakpoints[pair[0]].options,true);$.extend(true,config,settings.breakpoints[pair[0]]);settings.activeBreakpoint=settings.breakpoints[pair[0]];},exit:function(){$.extend(true,config,_.clone(startConfig));settings.api.updateOptions(settings.defaultConfig.options,true);if(settings.isFullscreen){settings.api.updateOptions(settings.fullscreenConfig,true);}
settings.activeBreakpoint={};}});});}},initApi:function(){var settings=this.settings,config=this.config,api={fotorama:settings.fotoramaApi,last:function(){settings.fotoramaApi.show('>>');},first:function(){settings.fotoramaApi.show('<<');},prev:function(){settings.fotoramaApi.show('<');},next:function(){settings.fotoramaApi.show('>');},seek:function(index){if(_.isNumber(index)&&index!==0){if(index>0){index-=1;}
settings.fotoramaApi.show(index);}},updateOptions:function(configuration,isInternal){var $selectable=$('a[href], area[href], input, select, '+
'textarea, button, iframe, object, embed, *[tabindex], *[contenteditable]').not('[tabindex=-1], [disabled], :hidden'),$focus=$(':focus'),index;if(_.isObject(configuration)){$selectable.each(function(number){if($(this).is($focus)){index=number;}});if(this.isTouchEnabled){configuration.arrows=false;}
configuration.click=false;configuration.breakpoints=null;if(!isInternal){!_.isEqual(settings.activeBreakpoint,{}&&settings.brekpoints)?$.extend(true,settings.activeBreakpoint.options,configuration):settings.isFullscreen?$.extend(true,settings.fullscreenConfig,configuration):$.extend(true,settings.defaultConfig.options,configuration);}
$.extend(true,settings.currentConfig.options,configuration);settings.fotoramaApi.setOptions(settings.currentConfig.options);if(_.isNumber(index)){$selectable.eq(index).focus();}}},updateData:function(data){var mainImageIndex;if(_.isArray(data)){settings.fotoramaApi.load(data);mainImageIndex=getMainImageIndex(data);if(mainImageIndex){settings.fotoramaApi.show({index:mainImageIndex,time:0});}
$.extend(false,settings,{data:data,defaultConfig:data});$.extend(false,config,{data:data});}},returnCurrentImages:function(){var images=[];_.each(this.fotorama.data,function(item){images.push(_.omit(item,'$navThumbFrame','$navDotFrame','$stageFrame','labelledby'));});return images;},updateDataByIndex:function(index,item){settings.fotoramaApi.spliceByIndex(index,item);}};settings.$element.data('gallery',api);settings.api=settings.$element.data('gallery');settings.$element.trigger('gallery:loaded');}});});